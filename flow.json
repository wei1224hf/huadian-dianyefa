[
    {
        "id": "71f537202ea9cf55",
        "type": "tab",
        "label": "screw-60",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "dce641ad0336b7ac",
        "type": "tab",
        "label": "simulater",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "20ecc5cb793b2ee6",
        "type": "tab",
        "label": "dataCenter-60",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8cd94eec31b4ac8f",
        "type": "tab",
        "label": "vision-60",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "572b6390b7e3b873",
        "type": "tab",
        "label": "scheduler-40",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3afa9c07e50614a3",
        "type": "tab",
        "label": "dataCenter-40",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7ea93ba33d73caab",
        "type": "tab",
        "label": "scheduler-60",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "0ed9a07ea391dd22",
        "type": "tab",
        "label": "scheduler-90",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e938579b29d3cf7f",
        "type": "tab",
        "label": "vision-90",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "6b25f2664a9c5aec",
        "type": "tab",
        "label": "logic-90",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3b5216fa86e84cf0",
        "type": "tab",
        "label": "dataCenter-90",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "0aceb91922d497d0",
        "type": "tab",
        "label": "screw-90",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8c57d52fe6250639",
        "type": "tab",
        "label": "dataCenter-10",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "f9ed7ce98dfb48f5",
        "type": "tab",
        "label": "dataCenter-100",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b60c316ff0a6b6c0",
        "type": "tab",
        "label": "scheduler-10",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "9a4dd78996491658",
        "type": "modbus-client",
        "name": "螺丝刀-63",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.110.63",
        "tcpPort": "23",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "6f8d38c417897cab",
        "type": "modbus-client",
        "name": "控制器-60",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.110.60",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "d6782a77eee52a2e",
        "type": "modbus-client",
        "name": "虚拟modbus-10060",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "10060",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "967785e4049706c4",
        "type": "modbus-client",
        "name": "6轴-94",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.110.94",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "9644a7088aaca35d",
        "type": "modbus-client",
        "name": "控制器-90",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.105.190",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "8b08ccb1dadce45a",
        "type": "modbus-client",
        "name": "虚拟modbus-10090",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "10090",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "b73080d51bca954d",
        "type": "modbus-client",
        "name": "螺丝刀-93",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.110.63",
        "tcpPort": "23",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "bad602b429e6c8ba",
        "type": "modbus-client",
        "name": "虚拟modbus-10040",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "10040",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "3410ec752ba96d35",
        "type": "modbus-client",
        "name": "控制器-40",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "10040",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "b2ca547fae3e7fa9",
        "type": "modbus-client",
        "name": "scara1",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.10.43",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "06b25b867a5a05ee",
        "type": "modbus-client",
        "name": "scara2",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.110.44",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "b491bf7158494622",
        "type": "modbus-client",
        "name": "大负载-10",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.110.10",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "1a3a610758658ecb",
        "type": "modbus-client",
        "name": "大负载-100",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.110.100",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "f45c8577844ced46",
        "type": "modbus-client",
        "name": "虚拟modbus-10",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "10010",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "ebdc7b3b4236640e",
        "type": "modbus-client",
        "name": "虚拟modbus-100",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "8d4d4b53cf1b63e2",
        "type": "modbus-read",
        "z": "71f537202ea9cf55",
        "name": "screw",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "31",
        "quantity": "2",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "9a4dd78996491658",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "c504cd1b4d288507",
                "46fcefbc01d35a56"
            ],
            []
        ]
    },
    {
        "id": "c504cd1b4d288507",
        "type": "debug",
        "z": "71f537202ea9cf55",
        "name": "调试 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 290,
        "y": 80,
        "wires": []
    },
    {
        "id": "4dab851a3090a4ee",
        "type": "modbus-write",
        "z": "71f537202ea9cf55",
        "name": "screw",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "3",
        "quantity": "1",
        "server": "9a4dd78996491658",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1030,
        "y": 240,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "49312cbe0536496d",
        "type": "inject",
        "z": "71f537202ea9cf55",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 750,
        "y": 240,
        "wires": [
            [
                "4dab851a3090a4ee"
            ]
        ]
    },
    {
        "id": "1916e26398944d20",
        "type": "inject",
        "z": "71f537202ea9cf55",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "8",
        "payloadType": "num",
        "x": 750,
        "y": 280,
        "wires": [
            [
                "4dab851a3090a4ee"
            ]
        ]
    },
    {
        "id": "dbb6283463f60b0e",
        "type": "inject",
        "z": "71f537202ea9cf55",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 750,
        "y": 320,
        "wires": [
            [
                "4dab851a3090a4ee"
            ]
        ]
    },
    {
        "id": "182b0b97b21da321",
        "type": "trigger",
        "z": "71f537202ea9cf55",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 310,
        "y": 260,
        "wires": [
            [
                "7f9f5dfb8250b123"
            ]
        ]
    },
    {
        "id": "9d8c504c1ac36899",
        "type": "function",
        "z": "71f537202ea9cf55",
        "name": "screw",
        "func": "var val = 0;\nif(msg.payload.screw_run==1){\n    val += 1;\n}\nif (msg.payload.screw_clockwise==1){\n    val += 2;\n}\nif (msg.payload.screw_pause == 1) {\n    val += 4;\n}\nif (msg.payload.screw_reset == 1) {\n    val += 8;\n}\nmsg.payload = val;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 180,
        "wires": [
            [
                "ecce777fee31e872"
            ]
        ]
    },
    {
        "id": "46fcefbc01d35a56",
        "type": "change",
        "z": "71f537202ea9cf55",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_60.AO.screw_error",
                "pt": "global",
                "to": "payload[0]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "IO_60.AO.screw_status",
                "pt": "global",
                "to": "payload[1]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "7f9f5dfb8250b123",
        "type": "change",
        "z": "71f537202ea9cf55",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_60.AI",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 260,
        "wires": [
            [
                "9d8c504c1ac36899",
                "53731b7b0844da45",
                "1cc2b3a4c0a852ee"
            ]
        ]
    },
    {
        "id": "c093bb83b677bf58",
        "type": "modbus-read",
        "z": "71f537202ea9cf55",
        "name": "screw",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "25",
        "quantity": "2",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "9a4dd78996491658",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 490,
        "y": 80,
        "wires": [
            [
                "d514673c90fffe90"
            ],
            []
        ]
    },
    {
        "id": "d514673c90fffe90",
        "type": "function",
        "z": "71f537202ea9cf55",
        "name": "完成扭矩",
        "func": "var data = msg.payload[0] + msg.payload[1]*0xff;\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 80,
        "wires": [
            [
                "c52a9f97c85b9848"
            ]
        ]
    },
    {
        "id": "c52a9f97c85b9848",
        "type": "change",
        "z": "71f537202ea9cf55",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_60.AO.screw_torque",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "069f70e3615897de",
        "type": "inject",
        "z": "71f537202ea9cf55",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 260,
        "wires": [
            [
                "182b0b97b21da321"
            ]
        ]
    },
    {
        "id": "6ff5ff2ceef04486",
        "type": "inject",
        "z": "71f537202ea9cf55",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 750,
        "y": 360,
        "wires": [
            [
                "4dab851a3090a4ee"
            ]
        ]
    },
    {
        "id": "ecce777fee31e872",
        "type": "rbe",
        "z": "71f537202ea9cf55",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 810,
        "y": 180,
        "wires": [
            [
                "4dab851a3090a4ee",
                "85b7e3633978bdab"
            ]
        ]
    },
    {
        "id": "9ee58c96d40ed36c",
        "type": "modbus-write",
        "z": "71f537202ea9cf55",
        "name": "screw",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "48",
        "quantity": "1",
        "server": "9a4dd78996491658",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1090,
        "y": 400,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "b7d63146a71a3898",
        "type": "inject",
        "z": "71f537202ea9cf55",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "12",
        "payloadType": "num",
        "x": 750,
        "y": 480,
        "wires": [
            [
                "9ee58c96d40ed36c"
            ]
        ]
    },
    {
        "id": "e30a2187d403c988",
        "type": "inject",
        "z": "71f537202ea9cf55",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 750,
        "y": 520,
        "wires": [
            [
                "9ee58c96d40ed36c"
            ]
        ]
    },
    {
        "id": "53731b7b0844da45",
        "type": "change",
        "z": "71f537202ea9cf55",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO.AO.screw_mode",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 420,
        "wires": [
            [
                "1d8a69a3d9705111"
            ]
        ]
    },
    {
        "id": "1d8a69a3d9705111",
        "type": "rbe",
        "z": "71f537202ea9cf55",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 870,
        "y": 420,
        "wires": [
            [
                "9ee58c96d40ed36c"
            ]
        ]
    },
    {
        "id": "85b7e3633978bdab",
        "type": "debug",
        "z": "71f537202ea9cf55",
        "name": "调试 21",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1040,
        "y": 140,
        "wires": []
    },
    {
        "id": "1cc2b3a4c0a852ee",
        "type": "debug",
        "z": "71f537202ea9cf55",
        "name": "调试 22",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 360,
        "wires": []
    },
    {
        "id": "641d89254f2cca64",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 40,
        "wires": [
            [
                "3c4531c31ebe7e63"
            ]
        ]
    },
    {
        "id": "2e2a1d1a6275c463",
        "type": "http request",
        "z": "dce641ad0336b7ac",
        "name": "ReceiveStationTask",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost/60/ReceiveStationTask",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 510,
        "y": 40,
        "wires": [
            [
                "83013cfd2eb967b8"
            ]
        ]
    },
    {
        "id": "3c4531c31ebe7e63",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "",
        "func": "var t = (new Date()).toISOString();\nmsg.payload = {\n    BillCode: t,\n    ProductCode: \"FHDC125(6)X\",\n    ProductName:\"电液7阀常规-6功能6接口\",\n    ProcessDetail: [{\n        ProcessCode: \"OP60\",\n        ProcessName: \"丝堵/滤芯/单向阀装配拧紧\",\n        EquipmentCode: \"OP60\",\n        ProgramNumer: 1,\n        Num: 100,\n        MaterialDetails: [\n\n            {\n                MaterialCode: \"M18-SD\",\n                MaterialName: \"M18丝堵\",\n                Num: 100,\n            },\n            {\n                MaterialCode: \"DXF-2\",\n                MaterialName: \"单向阀2\",\n                Num: 100,\n            },\n            {\n                MaterialCode: \"LX\",\n                MaterialName: \"滤芯\",\n                Num: 100,\n            },\n            {\n                MaterialCode: \"DXF-1\",\n                MaterialName: \"单向阀1\",\n                Num: 100,\n            },\n            {\n                MaterialCode: \"M24-SD\",\n                MaterialName: \"M24丝堵\",\n                Num: 100,\n            },\n            {\n                MaterialCode: \"M14-SD\",\n                MaterialName: \"M14丝堵\",\n                Num: 100,\n            }      \n        ]\n    }]\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 40,
        "wires": [
            [
                "2e2a1d1a6275c463"
            ]
        ]
    },
    {
        "id": "83013cfd2eb967b8",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 40,
        "wires": []
    },
    {
        "id": "1969f806ca1f286e",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "232",
        "payloadType": "num",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "f2ffa1920956d589"
            ]
        ]
    },
    {
        "id": "5c22d545187ca5b0",
        "type": "http request",
        "z": "dce641ad0336b7ac",
        "name": "WriteValue",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost/60/WriteValue",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 490,
        "y": 120,
        "wires": [
            [
                "8f47783786614967"
            ]
        ]
    },
    {
        "id": "8f47783786614967",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 9",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 120,
        "wires": []
    },
    {
        "id": "f2ffa1920956d589",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "函数 6",
        "func": "msg.payload = [\n    {Value:1, Address:40001, RequestID: \"asdfasdf\"},\n\n];\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 120,
        "wires": [
            [
                "5c22d545187ca5b0"
            ]
        ]
    },
    {
        "id": "18ddfefe2bf12a60",
        "type": "modbus-read",
        "z": "dce641ad0336b7ac",
        "name": "",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "0",
        "quantity": "10",
        "rate": "500",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "d6782a77eee52a2e",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 150,
        "y": 160,
        "wires": [
            [
                "c8a78bcd8c961154"
            ],
            []
        ]
    },
    {
        "id": "c8a78bcd8c961154",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 10",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 400,
        "y": 160,
        "wires": []
    },
    {
        "id": "80b652851eaea996",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "232",
        "payloadType": "num",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "57bba61c15c2f2a0"
            ]
        ]
    },
    {
        "id": "d596236ca41e6fb1",
        "type": "http request",
        "z": "dce641ad0336b7ac",
        "name": "接收接驳信号",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/ReceiveConnectSignal",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 500,
        "y": 200,
        "wires": [
            [
                "ff62a92f838bc341"
            ]
        ]
    },
    {
        "id": "ff62a92f838bc341",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 200,
        "wires": []
    },
    {
        "id": "57bba61c15c2f2a0",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "函数 7",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 200,
        "wires": [
            [
                "d596236ca41e6fb1"
            ]
        ]
    },
    {
        "id": "30db300d7274f22d",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "232",
        "payloadType": "num",
        "x": 130,
        "y": 240,
        "wires": [
            [
                "e7041e0dcf67959b"
            ]
        ]
    },
    {
        "id": "4f09a6d0d1f1d3db",
        "type": "http request",
        "z": "dce641ad0336b7ac",
        "name": "通用读多个接口",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/ReadValue",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 500,
        "y": 240,
        "wires": [
            [
                "b7c29a24de37137b"
            ]
        ]
    },
    {
        "id": "b7c29a24de37137b",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 13",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 240,
        "wires": []
    },
    {
        "id": "e7041e0dcf67959b",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "函数 8",
        "func": "msg.payload = [\n    {Address:0},\n    {  Address: 1 },\n    { Address: 2 },\n    { Address: 3 },\n    { Address: 4 },\n];\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 240,
        "wires": [
            [
                "4f09a6d0d1f1d3db"
            ]
        ]
    },
    {
        "id": "53263861fbceb1c0",
        "type": "http in",
        "z": "dce641ad0336b7ac",
        "name": "",
        "url": "/StationFinishSignal",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 360,
        "wires": [
            [
                "39bb80b210848ca8"
            ]
        ]
    },
    {
        "id": "39bb80b210848ca8",
        "type": "http response",
        "z": "dce641ad0336b7ac",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 450,
        "y": 360,
        "wires": []
    },
    {
        "id": "b47ddc461d12a0c2",
        "type": "http in",
        "z": "dce641ad0336b7ac",
        "name": "",
        "url": "/ReceiveUbiquestionsWarn",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 400,
        "wires": [
            [
                "8bcf415c5dc04635"
            ]
        ]
    },
    {
        "id": "8bcf415c5dc04635",
        "type": "http response",
        "z": "dce641ad0336b7ac",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 450,
        "y": 400,
        "wires": []
    },
    {
        "id": "1374416c947894de",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "232",
        "payloadType": "num",
        "x": 130,
        "y": 320,
        "wires": [
            [
                "eb9fa2eb684b46c6"
            ]
        ]
    },
    {
        "id": "eb9fa2eb684b46c6",
        "type": "change",
        "z": "dce641ad0336b7ac",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO.AO.status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "435a2f86f2fbd950",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 130,
        "y": 280,
        "wires": [
            [
                "eb9fa2eb684b46c6"
            ]
        ]
    },
    {
        "id": "607e45a90e04f430",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2",
        "payloadType": "num",
        "x": 130,
        "y": 480,
        "wires": [
            [
                "45b44fd230aa81f0"
            ]
        ]
    },
    {
        "id": "45b44fd230aa81f0",
        "type": "change",
        "z": "dce641ad0336b7ac",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO.AO.error",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "07996ba42c67ead8",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 130,
        "y": 440,
        "wires": [
            [
                "45b44fd230aa81f0"
            ]
        ]
    },
    {
        "id": "18d9bb02efa9b576",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2",
        "payloadType": "num",
        "x": 130,
        "y": 520,
        "wires": [
            [
                "f4d03992a76aa6a5"
            ]
        ]
    },
    {
        "id": "f4d03992a76aa6a5",
        "type": "change",
        "z": "dce641ad0336b7ac",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "materials[0].remain",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "45583527446cf58e",
        "type": "http in",
        "z": "dce641ad0336b7ac",
        "name": "",
        "url": "/GetLackMaterialsInfo",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 560,
        "wires": [
            [
                "be4a64fd143289e5"
            ]
        ]
    },
    {
        "id": "be4a64fd143289e5",
        "type": "http response",
        "z": "dce641ad0336b7ac",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 450,
        "y": 560,
        "wires": []
    },
    {
        "id": "dcf72d2a2bd9fcfe",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "232",
        "payloadType": "num",
        "x": 130,
        "y": 600,
        "wires": [
            [
                "2bb5269de6fc325f"
            ]
        ]
    },
    {
        "id": "ad32cb5152ba0ed4",
        "type": "http request",
        "z": "dce641ad0336b7ac",
        "name": "通用读多个接口",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/ReadValue",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 480,
        "y": 600,
        "wires": [
            [
                "afd804fe24150fbe"
            ]
        ]
    },
    {
        "id": "afd804fe24150fbe",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 20",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 600,
        "wires": []
    },
    {
        "id": "2bb5269de6fc325f",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "函数 16",
        "func": "msg.payload = [\n    {Address:0},\n    {  Address: 1 },\n    { Address: 2 },\n    { Address: 3 },\n    { Address: 4 },\n];\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 600,
        "wires": [
            [
                "ad32cb5152ba0ed4"
            ]
        ]
    },
    {
        "id": "858421057a2ca46c",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "555",
        "payloadType": "num",
        "x": 870,
        "y": 120,
        "wires": [
            [
                "d16b4fda71553ea6"
            ]
        ]
    },
    {
        "id": "d16b4fda71553ea6",
        "type": "modbus-write",
        "z": "dce641ad0336b7ac",
        "name": "",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "4001",
        "quantity": "1",
        "server": "d6782a77eee52a2e",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1160,
        "y": 120,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "90e8a47913847a4e",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 660,
        "wires": [
            [
                "7a42adee6d3e7c2f"
            ]
        ]
    },
    {
        "id": "490a48784849d45d",
        "type": "change",
        "z": "dce641ad0336b7ac",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_60.AI.status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "e0377f0066bc1875",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 720,
        "wires": [
            [
                "062399a5d424ebbf"
            ]
        ]
    },
    {
        "id": "19537b7ed188a932",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 780,
        "wires": [
            [
                "bb9fd26b33464f6e"
            ]
        ]
    },
    {
        "id": "80586cb76a5963e8",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 840,
        "wires": [
            [
                "01f14e112c292ffc"
            ]
        ]
    },
    {
        "id": "c826f6c36476e3c7",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 900,
        "wires": [
            [
                "d4695fe79fb9352d"
            ]
        ]
    },
    {
        "id": "b82e8f667a34ec5b",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 960,
        "wires": [
            [
                "7a154fafed9578b9"
            ]
        ]
    },
    {
        "id": "33bc007496b3ebd9",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 1020,
        "wires": [
            [
                "27c9a15e6d57e17b"
            ]
        ]
    },
    {
        "id": "d87d11d5d4ec381c",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 1080,
        "wires": [
            [
                "dc746aa49d7344cf"
            ]
        ]
    },
    {
        "id": "49425ce767475de6",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 640,
        "y": 1080,
        "wires": [
            [
                "7a42adee6d3e7c2f"
            ]
        ]
    },
    {
        "id": "7a42adee6d3e7c2f",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 5",
        "func": "\nreturn {payload: 0};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 660,
        "wires": [
            [
                "e0377f0066bc1875",
                "9d45d435bf53cb0e"
            ]
        ]
    },
    {
        "id": "062399a5d424ebbf",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 6",
        "func": "\nreturn {payload: 1};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 720,
        "wires": [
            [
                "19537b7ed188a932",
                "9d45d435bf53cb0e"
            ]
        ]
    },
    {
        "id": "bb9fd26b33464f6e",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 7",
        "func": "\nreturn {payload: 2};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 780,
        "wires": [
            [
                "80586cb76a5963e8",
                "9d45d435bf53cb0e"
            ]
        ]
    },
    {
        "id": "01f14e112c292ffc",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 8",
        "func": "\nreturn {payload: 3};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 840,
        "wires": [
            [
                "c826f6c36476e3c7",
                "9d45d435bf53cb0e"
            ]
        ]
    },
    {
        "id": "d4695fe79fb9352d",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 9",
        "func": "\nreturn {payload: 40};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 900,
        "wires": [
            [
                "b82e8f667a34ec5b",
                "9d45d435bf53cb0e"
            ]
        ]
    },
    {
        "id": "7a154fafed9578b9",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 10",
        "func": "\nreturn {payload: 5};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 960,
        "wires": [
            [
                "33bc007496b3ebd9",
                "9d45d435bf53cb0e"
            ]
        ]
    },
    {
        "id": "27c9a15e6d57e17b",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 11",
        "func": "\nreturn {payload: 6};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1020,
        "wires": [
            [
                "d87d11d5d4ec381c",
                "9d45d435bf53cb0e"
            ]
        ]
    },
    {
        "id": "dc746aa49d7344cf",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 12",
        "func": "\nreturn {payload: 7};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1080,
        "wires": [
            [
                "49425ce767475de6",
                "9d45d435bf53cb0e"
            ]
        ]
    },
    {
        "id": "eb8ee2af1328506b",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1160,
        "wires": [
            [
                "d0d9fc460406be0c"
            ]
        ]
    },
    {
        "id": "5ad1a3442af1691c",
        "type": "http request",
        "z": "dce641ad0336b7ac",
        "name": "ReceiveStationTask",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://172.64.16.27/60/GetStationState",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 510,
        "y": 1160,
        "wires": [
            [
                "d097ce9891e89e0f"
            ]
        ]
    },
    {
        "id": "d0d9fc460406be0c",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "函数 3",
        "func": "msg.payload = {\n    MoCode: \"String\",\n    ProductCode: \"String\",\n    ProductName:\"String\",\n    ProcessDetail: [{\n        ProcessCode: \"String\",\n        ProcessName: \"String\",\n        EquipmentCode: \"OP60\",\n        ProgramNumer: 1,\n        Num: 1,\n        MaterialDetails: [\n            {\n                MaterialCode: \"String\",\n                MaterialName: \"String\",\n                Num: 1\n            }\n        ]\n    }]\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 1160,
        "wires": [
            [
                "5ad1a3442af1691c"
            ]
        ]
    },
    {
        "id": "d097ce9891e89e0f",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 1160,
        "wires": []
    },
    {
        "id": "f6f43c8e9834b506",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1260,
        "wires": [
            [
                "484962f359453173"
            ]
        ]
    },
    {
        "id": "ccc8883285cd154c",
        "type": "change",
        "z": "dce641ad0336b7ac",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_60.AI.error",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "db11c91d8d0d96e0",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 140,
        "y": 1320,
        "wires": [
            [
                "fecf7194e1d352ce"
            ]
        ]
    },
    {
        "id": "1d8b0253201ba8a1",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 140,
        "y": 1380,
        "wires": [
            [
                "e8c47fa809683418"
            ]
        ]
    },
    {
        "id": "267703932db15827",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 140,
        "y": 1440,
        "wires": [
            [
                "068626c7eae6169e"
            ]
        ]
    },
    {
        "id": "484962f359453173",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 15",
        "func": "\nreturn {payload: 0};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1260,
        "wires": [
            [
                "ccc8883285cd154c",
                "db11c91d8d0d96e0"
            ]
        ]
    },
    {
        "id": "fecf7194e1d352ce",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 16",
        "func": "\nreturn {payload: 1};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1320,
        "wires": [
            [
                "1d8b0253201ba8a1",
                "ccc8883285cd154c"
            ]
        ]
    },
    {
        "id": "e8c47fa809683418",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 17",
        "func": "\nreturn {payload: 2};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1380,
        "wires": [
            [
                "267703932db15827",
                "ccc8883285cd154c"
            ]
        ]
    },
    {
        "id": "068626c7eae6169e",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 18",
        "func": "\nreturn {payload: 3};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1440,
        "wires": [
            [
                "ccc8883285cd154c",
                "0aada4861c110bae"
            ]
        ]
    },
    {
        "id": "0aada4861c110bae",
        "type": "delay",
        "z": "dce641ad0336b7ac",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 500,
        "y": 1440,
        "wires": [
            [
                "484962f359453173"
            ]
        ]
    },
    {
        "id": "2b06bc97c865e720",
        "type": "change",
        "z": "dce641ad0336b7ac",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_40.AI.status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "d585b63e8d8344f5",
        "type": "change",
        "z": "dce641ad0336b7ac",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AI.status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "9d45d435bf53cb0e",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "function 27",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 800,
        "wires": [
            [
                "2b06bc97c865e720",
                "490a48784849d45d",
                "d585b63e8d8344f5"
            ]
        ]
    },
    {
        "id": "71db5a78637246bc",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "232",
        "payloadType": "num",
        "x": 170,
        "y": 1500,
        "wires": [
            [
                "20e76205572649e9"
            ]
        ]
    },
    {
        "id": "6c4cda931e317d00",
        "type": "http request",
        "z": "dce641ad0336b7ac",
        "name": "DoAction",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost/60/DoAction",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 520,
        "y": 1500,
        "wires": [
            [
                "3206b4b65fd1882e"
            ]
        ]
    },
    {
        "id": "3206b4b65fd1882e",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 9",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 1500,
        "wires": []
    },
    {
        "id": "20e76205572649e9",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "函数 6",
        "func": "msg.payload = \n    {Value:1, Address:4001, RequestID: \"asdfasdf\"}\n;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1500,
        "wires": [
            [
                "6c4cda931e317d00",
                "25dfc7f79cb66659"
            ]
        ]
    },
    {
        "id": "25dfc7f79cb66659",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "debug 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 1540,
        "wires": []
    },
    {
        "id": "2b707d4594bb9fcd",
        "type": "inject",
        "z": "dce641ad0336b7ac",
        "name": "test",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 80,
        "wires": [
            [
                "d38f46edf71eb8bc"
            ]
        ]
    },
    {
        "id": "703486c68966a235",
        "type": "http request",
        "z": "dce641ad0336b7ac",
        "name": "ReceiveEndSignal",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost/60/ReceiveEndSignal",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 510,
        "y": 80,
        "wires": [
            [
                "702c2198cb853b4c"
            ]
        ]
    },
    {
        "id": "d38f46edf71eb8bc",
        "type": "function",
        "z": "dce641ad0336b7ac",
        "name": "",
        "func": "\nmsg.payload = {\n   BillCode: \"2024-08-07T05:17:15.468Z\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 80,
        "wires": [
            [
                "703486c68966a235"
            ]
        ]
    },
    {
        "id": "702c2198cb853b4c",
        "type": "debug",
        "z": "dce641ad0336b7ac",
        "name": "调试 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 80,
        "wires": []
    },
    {
        "id": "9291dbbb055a3f08",
        "type": "modbus-server",
        "z": "20ecc5cb793b2ee6",
        "name": "本机modbus",
        "logEnabled": false,
        "hostname": "0.0.0.0",
        "serverPort": "10060",
        "responseDelay": 100,
        "delayUnit": "ms",
        "coilsBufferSize": 10000,
        "holdingBufferSize": 10000,
        "inputBufferSize": 10000,
        "discreteBufferSize": 10000,
        "showErrors": false,
        "x": 310,
        "y": 180,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "0f42adb68b0a3974",
        "type": "modbus-read",
        "z": "20ecc5cb793b2ee6",
        "name": "6axes",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "0",
        "quantity": "20",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "6f8d38c417897cab",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 550,
        "y": 200,
        "wires": [
            [
                "3ef5c0b75d94258a",
                "cdacdaf5f7367456"
            ],
            []
        ]
    },
    {
        "id": "3ef5c0b75d94258a",
        "type": "debug",
        "z": "20ecc5cb793b2ee6",
        "name": "调试 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 220,
        "wires": []
    },
    {
        "id": "f1c754f87be25191",
        "type": "function",
        "z": "20ecc5cb793b2ee6",
        "name": "函数 1",
        "func": "var IO = global.get(\"IO_60\");\n\nvar arr = [\n    IO.AI.work_object,\n    IO.AI.product_status,\n    IO.AI.screw_status,\n    IO.AI.M1,\n    IO.AI.M2,\n    IO.AI.M3,\n    IO.AI.M4,\n    IO.AI.M5,\n    IO.AI.M6,\n    IO.AI.M7,   \n    IO.AI.material_status, \n    ];\narr = msg.payload;  \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "2817f570591dafa7",
        "type": "function",
        "z": "20ecc5cb793b2ee6",
        "name": "函数 18",
        "func": "var IO = global.get(\"IO\");\nvar AO = IO.AO;\nvar AI = IO.AI;\n\nAO.Home = 0;\nAO.Ready = 0;\nAO.error = 0;\nAO.mode = 0;\nAO.status = 0;\nAO.screw_reset = 0;\nAO.screw_run = 0;\nAO.screw_clockwise = 0;\nAO.screw_pause = 0;\nAO.screw_mode = 0;\nAO.work_over = 0;\nAO.M1 = 0;\nAO.M2 = 0;\nAO.M3 = 0;\nAO.M4 = 0;\nAO.M5 = 0;\nAO.M6 = 0;\nAO.M7 = 0;\n\nAI.work_object = 0;\nAI.product_status = 0;\nAI.screw_status = 0;\nAI.M1 = 0;\nAI.M2 = 0;\nAI.M3 = 0;\nAI.M4 = 0;\nAI.M5 = 0;\nAI.M6 = 0;\nAI.M7 = 0;\nAI.material_status = 0;\n\nglobal.set(\"IO\",IO);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "cdacdaf5f7367456",
        "type": "function",
        "z": "20ecc5cb793b2ee6",
        "name": "函数 19",
        "func": "var IO = global.get(\"IO\");\nvar idx = 0;\nIO.AO.Home = msg.payload[idx]; idx ++;\nIO.AO.Ready = msg.payload[idx]; idx++;\nIO.AO.error = msg.payload[idx]; idx++;\nIO.AO.mode = msg.payload[idx]; idx++;\nIO.AO.status = msg.payload[idx]; idx++;\nIO.AO.screw_reset = msg.payload[idx]; idx++;\nIO.AO.screw_run = msg.payload[idx]; idx++;\nIO.AO.screw_clockwise = msg.payload[idx]; idx++;\nIO.AO.screw_pause = msg.payload[idx]; idx++;\nIO.AO.screw_mode = msg.payload[idx]; idx++;\nIO.AO.work_over = msg.payload[idx]; idx++;\nIO.AO.M1 = msg.payload[idx]; idx++;\nIO.AO.M2 = msg.payload[idx]; idx++;\nIO.AO.M3 = msg.payload[idx]; idx++;\nIO.AO.M4 = msg.payload[idx]; idx++;\nIO.AO.M5 = msg.payload[idx]; idx++;\nIO.AO.M6 = msg.payload[idx]; idx++;\nIO.AO.M7 = msg.payload[idx]; idx++;\nglobal.set(\"IO\",IO);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 160,
        "wires": [
            [
                "0a2c7fc64a951652"
            ]
        ]
    },
    {
        "id": "0a2c7fc64a951652",
        "type": "modbus-write",
        "z": "20ecc5cb793b2ee6",
        "name": "localhost",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "20",
        "server": "d6782a77eee52a2e",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1100,
        "y": 160,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "af831fe136157038",
        "type": "modbus-read",
        "z": "20ecc5cb793b2ee6",
        "name": "localhost-analog",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "20",
        "quantity": "10",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "d6782a77eee52a2e",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 400,
        "y": 420,
        "wires": [
            [
                "62b5295f0ac48e9b",
                "f1c754f87be25191"
            ],
            []
        ]
    },
    {
        "id": "62b5295f0ac48e9b",
        "type": "modbus-write",
        "z": "20ecc5cb793b2ee6",
        "name": "写入运动控制器",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "20",
        "quantity": "10",
        "server": "6f8d38c417897cab",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 640,
        "y": 420,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "4a2525de98b04f13",
        "type": "inject",
        "z": "20ecc5cb793b2ee6",
        "name": "OP60数据初始化",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 370,
        "y": 80,
        "wires": [
            [
                "b36f63a61bc1f843"
            ]
        ]
    },
    {
        "id": "b36f63a61bc1f843",
        "type": "function",
        "z": "20ecc5cb793b2ee6",
        "name": "数据初始化",
        "func": "var IO_60 = {\n    DO:{},\n    DI:{},\n    AI:{//node-red收到来自控制器的逻辑变量\n        action: 0,//控制器端动作端的完成信号\n        action_6axes: 0,//6轴机械臂端动作的完成信号\n        error: 0,//控制器端的故障码\n        error_6axes: 0,//6轴机械臂的故障码\n        status: 0,//控制器端的状态\n        status_6axes: 0,//6轴机械臂状态\n\n        screw_reset : 0,\n        screw_run : 0,\n        screw_clockwise : 0,\n        screw_pause : 0,     \n        screw_mode : 0,     \n        \n        M1 : 0,\n        M2 : 0,\n        M3 : 0,\n        M4 : 0,\n        M5 : 0,        \n    },\n    AO:{//node-red要发送下去的逻辑变量\n        controller_action: 0,//下发给控制器的动作号\n        controller_6axes: 0,//下发给6轴机械臂的动作号,\n\n        tray1_vision_x: 90,//料盘拍照纠偏得y到的X坐标\n        tray1_vision_y: 90,//料盘拍照纠偏得到的y坐标\n        tray2_vision_x: 90,//料盘拍照纠偏得y到的X坐标\n        tray2_vision_y: 90,//料盘拍照纠偏得到的y坐标\n        tray3_vision_x: 90,//料盘拍照纠偏得y到的X坐标\n        tray3_vision_y: 90,//料盘拍照纠偏得到的y坐标\n        tray4_vision_x: 90,//料盘拍照纠偏得y到的X坐标\n        tray4_vision_y: 90,//料盘拍照纠偏得到的y坐标\n        tray5_vision_x: 90,//料盘拍照纠偏得y到的X坐标\n        tray5_vision_y: 90,//料盘拍照纠偏得到的y坐标\n        \n        screw_error:0,\n        screw_status: 0,\n        screw_torque: 0,\n        \n        M1 : 0,\n        M2 : 0,\n        M3 : 0,\n        M4 : 0,\n        M5 : 0,   \n        material_status: 0,\n        work_object: 0, //产品类型\n        production: 0, // 当前执行工单的产量, 在工单开启或关闭的时候，改为0\n    }\n};\nvar Material_60 = [\n    {\n        code: \"XDF001\",//物料批次码,由MES下发\n        patch: 1000,//本生产批次的物料数量,根据这个来做退料计算\n        patch_remain: 1000,//本批次的物料剩余量\n        name: \"单向阀1\",\n        remain: 100,//变成0的时候, 触发 搬动料盘层 的动作\n        used: 100,\n        trash: 0,\n        dosage: 1,\n    },\n    {\n        code:\"XDF002\",//\n        patch: 2000,\n        patch_remain: 1000,\n        name: \"单向阀2\",\n        remain: 100,\n        used: 80,\n        trash: 0,\n        dosage: 1,\n    },\n    {\n        code: \"XDF003\",//\n        patch: 2000,\n        patch_remain: 1000,\n        name: \"丝堵\",\n        remain: 100,\n        used: 80,\n        trash: 0,\n        dosage: 1,\n    },\n    {\n        code: \"XDF003\",//\n        patch: 2000,\n        patch_remain: 1000,\n        name: \"滤芯\",\n        remain: 100,\n        used: 80,\n        trash: 0,\n        dosage: 1,\n    }    \n];\nvar Vision_60 = {\n    session: \"\",\n    p1:{\n        msg: \"\",\n        response: \"\",\n        x:0,\n        y:0,\n    },\n    p2: {\n        msg: \"\",\n        response: \"\",\n        x: 0,\n        y: 0,\n    },\n    p3:{\n        msg: \"\",\n        response: \"\",\n        x:0,\n        y:0,\n    },\n    p4: {\n        msg: \"\",\n        response: \"\",\n        x: 0,\n        y: 0,\n    },\n    p5:{\n        msg: \"\",\n        response: \"\",\n        x:0,\n        y:0,\n    },\n    p6: {\n        msg: \"\",\n        response: \"\",\n        x: 0,\n        y: 0,\n    },    \n};\nvar ErrorMap_60 = [\n    \"视觉通信故障\",\n    \"螺丝刀通信故障\",\n    \"伺服1故障\",\n    \"伺服2故障\",\n    \"伺服3故障\",\n    \"伺服4故障\",   \n    \"伺服5故障\",\n    \"伺服6故障\",\n    \"伺服7故障\",\n];\n\nglobal.set(\"Vision_60\",Vision_60);\nglobal.set(\"IO_60\",IO_60);\nglobal.set(\"Material_60\", Material_60);\nglobal.set(\"ErrorMap_60\", ErrorMap_60);\n\nvar t = (new Date()).toISOString();\n\nglobal.set(\"StartTime_60\", t);\nglobal.set(\"EndTime_60\", t);\nglobal.set(\"RequestID_60\", \"-\");\nglobal.set(\"LCS\",\"http://192.168.130.245:30009/openApiUbiquitous/\");\nglobal.set(\"StationTask_60\",{\n    BillCode: \"-\",\n    ProductCode: \"-\",\n    ProductName:\"-\",\n    ProcessDetail: [{\n        ProcessCode: \"OP60\",\n        ProcessName: \"-\",\n        EquipmentCode: \"OP60\",\n        ProgramNumer: 1,\n        Num: 0,\n        MaterialDetails: [\n            {\n                MaterialCode: \"M18-SD\",\n                MaterialName: \"M18丝堵\",\n                Num: 0,\n            },\n            {\n                MaterialCode: \"DXF-2\",\n                MaterialName: \"单向阀2\",\n                Num: 0,\n            },\n            {\n                MaterialCode: \"LX\",\n                MaterialName: \"滤芯\",\n                Num: 0,\n            },\n            {\n                MaterialCode: \"DXF-1\",\n                MaterialName: \"单向阀1\",\n                Num: 0,\n            },\n            {\n                MaterialCode: \"24-SD\",\n                MaterialName: \"M24丝堵\",\n                Num: 0,\n            },\n            {\n                MaterialCode: \"M14-SD\",\n                MaterialName: \"M14丝堵\",\n                Num: 0,\n            }      \n        ]\n    }]\n});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "56c897a2fdb7eefb",
        "type": "tcp in",
        "z": "8cd94eec31b4ac8f",
        "name": "",
        "server": "client",
        "host": "localhost",
        "port": "1060",
        "datamode": "stream",
        "datatype": "utf8",
        "newline": "",
        "topic": "",
        "trim": false,
        "base64": false,
        "tls": "",
        "x": 130,
        "y": 160,
        "wires": [
            [
                "052fc56b2d0c0035"
            ]
        ]
    },
    {
        "id": "6e55c69c2524d31b",
        "type": "tcp out",
        "z": "8cd94eec31b4ac8f",
        "name": "",
        "host": "",
        "port": "",
        "beserver": "reply",
        "base64": false,
        "end": false,
        "tls": "",
        "x": 870,
        "y": 240,
        "wires": []
    },
    {
        "id": "26630eaf24419640",
        "type": "inject",
        "z": "8cd94eec31b4ac8f",
        "name": "左1托盘定位报文",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#1",
        "payloadType": "str",
        "x": 400,
        "y": 420,
        "wires": [
            [
                "f7343c08026237b3"
            ]
        ]
    },
    {
        "id": "e28bc42f85783bd2",
        "type": "inject",
        "z": "8cd94eec31b4ac8f",
        "name": "左2托盘定位报文",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#2",
        "payloadType": "str",
        "x": 400,
        "y": 460,
        "wires": [
            [
                "f7343c08026237b3"
            ]
        ]
    },
    {
        "id": "351256e4cf69c421",
        "type": "inject",
        "z": "8cd94eec31b4ac8f",
        "name": "右1托盘定位报文",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#3",
        "payloadType": "str",
        "x": 400,
        "y": 500,
        "wires": [
            [
                "f7343c08026237b3"
            ]
        ]
    },
    {
        "id": "052fc56b2d0c0035",
        "type": "function",
        "z": "8cd94eec31b4ac8f",
        "name": "视觉报文解析",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 160,
        "wires": [
            [
                "cc4fc39314279d0c"
            ]
        ]
    },
    {
        "id": "cc4fc39314279d0c",
        "type": "switch",
        "z": "8cd94eec31b4ac8f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "left1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "left2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "right",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 490,
        "y": 140,
        "wires": [
            [
                "ef776878e0fb4926"
            ],
            [
                "3dd571f933c090a2"
            ],
            [
                "04dfdde4a4659292"
            ]
        ]
    },
    {
        "id": "488c11ca173033c3",
        "type": "status",
        "z": "8cd94eec31b4ac8f",
        "d": true,
        "name": "",
        "scope": [
            "56c897a2fdb7eefb"
        ],
        "x": 150,
        "y": 80,
        "wires": [
            [
                "a3c6bf304a1a1080",
                "7338844a69c8518f"
            ]
        ]
    },
    {
        "id": "a3c6bf304a1a1080",
        "type": "function",
        "z": "8cd94eec31b4ac8f",
        "name": "监听视觉控制器连接",
        "func": "if(msg.status.text=='common.status.connected'){\n    var Vision_60 = global.get(\"Vision_60\");\n    Vision_60.session = msg._session.id;\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "f7343c08026237b3",
        "type": "function",
        "z": "8cd94eec31b4ac8f",
        "name": "添加视觉session",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 240,
        "wires": [
            [
                "6e55c69c2524d31b"
            ]
        ]
    },
    {
        "id": "ef776878e0fb4926",
        "type": "function",
        "z": "8cd94eec31b4ac8f",
        "name": "左1托盘定位",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 100,
        "wires": [
            [
                "4f17f83c44aaf305"
            ]
        ]
    },
    {
        "id": "3dd571f933c090a2",
        "type": "function",
        "z": "8cd94eec31b4ac8f",
        "name": "左2托盘定位",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 140,
        "wires": [
            [
                "4f17f83c44aaf305"
            ]
        ]
    },
    {
        "id": "04dfdde4a4659292",
        "type": "function",
        "z": "8cd94eec31b4ac8f",
        "name": "左3托盘定位",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 180,
        "wires": [
            [
                "4f17f83c44aaf305"
            ]
        ]
    },
    {
        "id": "4f17f83c44aaf305",
        "type": "function",
        "z": "8cd94eec31b4ac8f",
        "name": "视觉定位完成",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "f6b32c092955fd3e",
        "type": "change",
        "z": "8cd94eec31b4ac8f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 130,
        "y": 240,
        "wires": [
            [
                "54d26b2a05bc813e"
            ]
        ]
    },
    {
        "id": "54d26b2a05bc813e",
        "type": "rbe",
        "z": "8cd94eec31b4ac8f",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 310,
        "y": 240,
        "wires": [
            [
                "db960e516dda963c"
            ]
        ]
    },
    {
        "id": "db960e516dda963c",
        "type": "switch",
        "z": "8cd94eec31b4ac8f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "left1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "left2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "right",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 450,
        "y": 240,
        "wires": [
            [
                "f7343c08026237b3"
            ],
            [
                "f7343c08026237b3"
            ],
            [
                "f7343c08026237b3"
            ],
            []
        ]
    },
    {
        "id": "7338844a69c8518f",
        "type": "debug",
        "z": "8cd94eec31b4ac8f",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 480,
        "y": 40,
        "wires": []
    },
    {
        "id": "35a4d36c06a516f6",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 260,
        "wires": []
    },
    {
        "id": "a257155de3246fa9",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "工位任务接收",
        "url": "/40/ReceiveStationTask",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 260,
        "wires": [
            [
                "727320929feae3f0"
            ]
        ]
    },
    {
        "id": "727320929feae3f0",
        "type": "change",
        "z": "572b6390b7e3b873",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ReceiveStationTask_40",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 260,
        "wires": [
            [
                "3b2682a4cde6d25f"
            ]
        ]
    },
    {
        "id": "d2c4705b336995ae",
        "type": "inject",
        "z": "572b6390b7e3b873",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 660,
        "wires": [
            [
                "2ce158388e05bfcd"
            ]
        ]
    },
    {
        "id": "2ce158388e05bfcd",
        "type": "trigger",
        "z": "572b6390b7e3b873",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 310,
        "y": 660,
        "wires": [
            [
                "5131e5d7887441ec",
                "6cef8cbb5611550e"
            ]
        ]
    },
    {
        "id": "eb787dd90ce2a698",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "通用读多个接口",
        "url": "/40/ReadValue",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 500,
        "wires": [
            [
                "626fbef07d7ee4e8",
                "b10831b6eda3796a"
            ]
        ]
    },
    {
        "id": "f6d752032fdf7b81",
        "type": "modbus-flex-getter",
        "z": "572b6390b7e3b873",
        "name": "",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "logIOActivities": false,
        "server": "d6782a77eee52a2e",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 770,
        "y": 500,
        "wires": [
            [
                "8276787a53be6059"
            ],
            []
        ]
    },
    {
        "id": "626fbef07d7ee4e8",
        "type": "change",
        "z": "572b6390b7e3b873",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ReadValue",
                "pt": "global",
                "to": "[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 500,
        "wires": [
            [
                "315b0b7e624fb8db"
            ]
        ]
    },
    {
        "id": "315b0b7e624fb8db",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "modbus 报文拆分",
        "func": "var arr = msg.payload;\nfor(var i=0;i<arr.length;i++){\n    var t = arr[i];\n    node.send({payload:{fc:3, address: parseInt(t.Address), quantity:1},temp:parseInt(t.Address)});\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 500,
        "wires": [
            [
                "f6d752032fdf7b81"
            ]
        ]
    },
    {
        "id": "8276787a53be6059",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "函数 4",
        "func": "var arr = global.get(\"ReadValue\");\narr.push({\n    Address: msg.modbusRequest.address,\n    Value: msg.payload[0],\n    ValueType: \"int\"\n});\nconsole.debug(arr);\nglobal.set(\"ReadValue\",arr);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "cdbceecfb36dbef0",
        "type": "change",
        "z": "572b6390b7e3b873",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.Code",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload.Msg",
                "pt": "msg",
                "to": "操作成功",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.Data",
                "pt": "msg",
                "to": "ReadValue",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 540,
        "wires": [
            [
                "3d76528e178c821e"
            ]
        ]
    },
    {
        "id": "3d76528e178c821e",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 540,
        "wires": []
    },
    {
        "id": "b10831b6eda3796a",
        "type": "delay",
        "z": "572b6390b7e3b873",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 300,
        "y": 540,
        "wires": [
            [
                "0cc41b26eb4db17b"
            ]
        ]
    },
    {
        "id": "e8c3c3857599366c",
        "type": "rbe",
        "z": "572b6390b7e3b873",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 370,
        "y": 740,
        "wires": [
            [
                "71d27e5c6322216b"
            ]
        ]
    },
    {
        "id": "5131e5d7887441ec",
        "type": "change",
        "z": "572b6390b7e3b873",
        "name": "加工信号完成监听",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_60.AI.status",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 740,
        "wires": [
            [
                "e8c3c3857599366c"
            ]
        ]
    },
    {
        "id": "71d27e5c6322216b",
        "type": "switch",
        "z": "572b6390b7e3b873",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            },
            {
                "t": "btwn",
                "v": "40",
                "vt": "num",
                "v2": "49",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 740,
        "wires": [
            [
                "701df5f5eb1b5d9c"
            ],
            [
                "dca735309df3b099"
            ]
        ]
    },
    {
        "id": "cfd5b7c8eed0828b",
        "type": "http request",
        "z": "572b6390b7e3b873",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1060,
        "y": 740,
        "wires": [
            [
                "c745b362d8532593"
            ]
        ]
    },
    {
        "id": "5d3532bac127d839",
        "type": "rbe",
        "z": "572b6390b7e3b873",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 370,
        "y": 800,
        "wires": [
            [
                "1c745e1a179b33ec"
            ]
        ]
    },
    {
        "id": "6cef8cbb5611550e",
        "type": "change",
        "z": "572b6390b7e3b873",
        "name": "故障信号监听",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_60.AI.error",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 800,
        "wires": [
            [
                "5d3532bac127d839"
            ]
        ]
    },
    {
        "id": "1c745e1a179b33ec",
        "type": "switch",
        "z": "572b6390b7e3b873",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 800,
        "wires": [
            [
                "e91e4624b934bf6a"
            ]
        ]
    },
    {
        "id": "124f829adf1fc72c",
        "type": "http request",
        "z": "572b6390b7e3b873",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Accept",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 860,
        "y": 800,
        "wires": [
            [
                "1fbcd453e09f4cd2"
            ]
        ]
    },
    {
        "id": "0cc41b26eb4db17b",
        "type": "change",
        "z": "572b6390b7e3b873",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 540,
        "wires": [
            [
                "cdbceecfb36dbef0"
            ]
        ]
    },
    {
        "id": "c745b362d8532593",
        "type": "debug",
        "z": "572b6390b7e3b873",
        "name": "调试 16",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1220,
        "y": 740,
        "wires": []
    },
    {
        "id": "1fbcd453e09f4cd2",
        "type": "debug",
        "z": "572b6390b7e3b873",
        "name": "调试 17",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 800,
        "wires": []
    },
    {
        "id": "ab59f2f7ea7234a6",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "",
        "url": "/40/TransMove",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 1000,
        "wires": [
            [
                "f7f04eeb1d4f636b"
            ]
        ]
    },
    {
        "id": "f7f04eeb1d4f636b",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "函数 15",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1000,
        "wires": [
            [
                "fd93564aade5acb8"
            ]
        ]
    },
    {
        "id": "fd93564aade5acb8",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 1000,
        "wires": []
    },
    {
        "id": "def6a05b3da52b69",
        "type": "inject",
        "z": "572b6390b7e3b873",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 1080,
        "wires": [
            [
                "d15a548129158110"
            ]
        ]
    },
    {
        "id": "d15a548129158110",
        "type": "trigger",
        "z": "572b6390b7e3b873",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-2",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 320,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "fbf71f145d7614e5",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "物料缺料告知MES",
        "func": "var materials = global.get(\"Material_40\");\nfor(var i=0;i<materials.length;i++){\n    var t = materials[i];\n    if (t.remain==0){\n        node.send({payload:[{\n            EquipmentCode: \"OP40\",\n            EquipmentName: \"OP40\",\n            MaterialCode: t.code,\n            MaterialName: t.name,\n            LocationCode: \"L1\",\n            MaxTryNum: 1,\n        }]});\n    }\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 1200,
        "wires": [
            [
                "8b2f40eb6a90e661"
            ]
        ]
    },
    {
        "id": "8b2f40eb6a90e661",
        "type": "http request",
        "z": "572b6390b7e3b873",
        "name": "GetLackMaterialsInfo",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/GetLackMaterialsInfo",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 580,
        "y": 1200,
        "wires": [
            [
                "8cd980b01caea7d5"
            ]
        ]
    },
    {
        "id": "8cd980b01caea7d5",
        "type": "debug",
        "z": "572b6390b7e3b873",
        "name": "调试 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 800,
        "y": 1200,
        "wires": []
    },
    {
        "id": "4495e7d2bf0eb067",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "",
        "url": "/40/GetTrayInfo",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 1300,
        "wires": [
            [
                "36acd1110f61dc40"
            ]
        ]
    },
    {
        "id": "36acd1110f61dc40",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "函数 12",
        "func": "var arr = msg.payload.PortNumber;\nvar data = [];\nvar materials = global.get(\"materials\");\nfor(var i=0;i<arr.length;i++){\n    for (var i2 = 0; i2 < materials.length; i2++) {\n        if(arr[i]==materials[i2].position){\n            data.push({\n                TotalNum: 1,\n                LocationCode: materials[i2].position,\n                item:[{\n                TraySn: materials[i2].position,\n                MaterialCode: materials[i2].code,\n                MaterialName: materials[i2].name,\n                Num: materials[i2].remain,\n            }]})\n        }\n    }\n}\nmsg = {payload:{Code:0, Msg:\"操作成功\",Data:data}};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1300,
        "wires": [
            [
                "b891cc819f98d725"
            ]
        ]
    },
    {
        "id": "b891cc819f98d725",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 550,
        "y": 1300,
        "wires": []
    },
    {
        "id": "55ba8e78d605a349",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "",
        "url": "/40/ReceiveMaterialInfo",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 220,
        "y": 1360,
        "wires": [
            [
                "30dafb07443881ab"
            ]
        ]
    },
    {
        "id": "30dafb07443881ab",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "函数 14",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1360,
        "wires": [
            [
                "ada7e6c72d8848d4"
            ]
        ]
    },
    {
        "id": "ada7e6c72d8848d4",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 570,
        "y": 1360,
        "wires": []
    },
    {
        "id": "3b2682a4cde6d25f",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg:\"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 260,
        "wires": [
            [
                "35a4d36c06a516f6"
            ]
        ]
    },
    {
        "id": "90f4160c0df5af10",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "接收完工信号",
        "url": "/90/ReceiveEndSignal",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 80,
        "wires": [
            [
                "90b710f021e9779c"
            ]
        ]
    },
    {
        "id": "d09b65e1882b0dcb",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 100,
        "wires": []
    },
    {
        "id": "de82fa8eba618ddc",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 80,
        "wires": [
            [
                "d09b65e1882b0dcb"
            ]
        ]
    },
    {
        "id": "90b710f021e9779c",
        "type": "switch",
        "z": "572b6390b7e3b873",
        "name": "",
        "property": "payload.BillCode_40",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "BillCode_40",
                "vt": "global"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 80,
        "wires": [
            [
                "1258ff1d2f3a8c9a",
                "de82fa8eba618ddc"
            ],
            [
                "1c96f90d26377d7c"
            ]
        ]
    },
    {
        "id": "1258ff1d2f3a8c9a",
        "type": "change",
        "z": "572b6390b7e3b873",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_40.AO.production",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "1c96f90d26377d7c",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg: \"操作失败,当前设备执行的工单和下发的结束工单不一致\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 120,
        "wires": [
            [
                "d09b65e1882b0dcb"
            ]
        ]
    },
    {
        "id": "c7a5ac1245634c51",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "接收接驳信号",
        "url": "/40/ReceiveConnectSignal",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 940,
        "wires": [
            [
                "e602bf4535f70ea8"
            ]
        ]
    },
    {
        "id": "d54e8f83d8ac3fe0",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 450,
        "y": 940,
        "wires": []
    },
    {
        "id": "e602bf4535f70ea8",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 940,
        "wires": [
            [
                "d54e8f83d8ac3fe0"
            ]
        ]
    },
    {
        "id": "0640c0a09c79e6bb",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 300,
        "wires": []
    },
    {
        "id": "e78a890ef0edf519",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "工位状态-轮询",
        "url": "/40/GetStationState",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 300,
        "wires": [
            [
                "8fe28cfb651315b0"
            ]
        ]
    },
    {
        "id": "8fe28cfb651315b0",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "反馈",
        "func": "var IO_60 = global.get(\"IO_40\");\nmsg.payload = {\n\t\"Code\": 0,\n\t\"Msg\": \"操作成功\",\n\t\"Data\": [{\n\t\t\"StationCode\": \"OP40\",\n\t\t\"StationName\": \"丝堵预装配\",\n\t\t\"Status\": IO_40.AI.status\n\t}]\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 300,
        "wires": [
            [
                "0640c0a09c79e6bb"
            ]
        ]
    },
    {
        "id": "3882f609074a3df7",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "function 23",
        "func": "msg.payload = {\n \t\"requestID\": global.get(\"RequestID_60\"),\n\t\"startTime\": global.get(\"StartTime_60\"),\n\t\"endTime\": global.get(\"EndTime_60\")\n};\n\nmsg.url = global.get(\"LCS\")+\"actionCompletedSignal\";\n//msg.method = \"POST\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 740,
        "wires": [
            [
                "cfd5b7c8eed0828b"
            ]
        ]
    },
    {
        "id": "e91e4624b934bf6a",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "function 24",
        "func": "var ErrorMap_40 = global.get(\"ErrorMap_40\");\nmsg.payload ={\t\t\t\t\n\tEquipmentCode: \"OP40\",\t\t\t\n\tEquipmentName: \"上料泛在控制器\",\t\t\t\n\tStatus: 0,\n    WarnContent: ErrorMap_40[msg.payload]\t\t\n};\nmsg.url = global.get(\"LCS\")+\"receiveUbiquitousWarn\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 800,
        "wires": [
            [
                "124f829adf1fc72c"
            ]
        ]
    },
    {
        "id": "dca735309df3b099",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "开始加工",
        "func": "var t = (new Date()).toISOString();\nglobal.set(\"StartTime_60\", t);\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "701df5f5eb1b5d9c",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "结束加工",
        "func": "\nvar t = (new Date()).toISOString();\nglobal.set(\"EndTime_40\", t);\nglobal.set(\"RequestID_40\", \"-\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 700,
        "wires": [
            [
                "3882f609074a3df7"
            ]
        ]
    },
    {
        "id": "37e896233fa7d4d5",
        "type": "inject",
        "z": "572b6390b7e3b873",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 490,
        "y": 700,
        "wires": [
            [
                "701df5f5eb1b5d9c"
            ]
        ]
    },
    {
        "id": "4b71e0d21aec967b",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "泛在通用写多个接口",
        "url": "/40/WriteValue",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 460,
        "wires": [
            [
                "6b2f01a8751ea85d"
            ]
        ]
    },
    {
        "id": "6b2f01a8751ea85d",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "modbus 报文拆分",
        "func": "var arr = msg.payload;\nfor(var i=0;i<arr.length;i++){\n    var t = arr[i];\n    msg.payload = { value: parseInt(t.Value), 'fc': 6, 'unitid': 1, 'address': parseInt(t.Address), 'quantity': 1 } \n    node.send(msg);\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 460,
        "wires": [
            [
                "df51096346e12d3d"
            ]
        ]
    },
    {
        "id": "df51096346e12d3d",
        "type": "modbus-flex-write",
        "z": "572b6390b7e3b873",
        "name": "批量修改modbus值",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "server": "bad602b429e6c8ba",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 770,
        "y": 440,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "293b76ae96db3d06",
        "type": "http in",
        "z": "572b6390b7e3b873",
        "name": "动作执行",
        "url": "/40/DoAction",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 420,
        "wires": [
            [
                "de14d34d058c8444"
            ]
        ]
    },
    {
        "id": "964344c86f314c03",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "modbus 报文拆分",
        "func": "var t = msg.payload;\nvar RequestID = t.RequestID;\nglobal.set(\"RequestID_40\",RequestID);\nmsg.payload = { value: parseInt(t.Value), 'fc': 6, 'unitid': 1, 'address': parseInt(t.Address), 'quantity': 1 } \nnode.send(msg);",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 380,
        "wires": [
            [
                "df51096346e12d3d"
            ]
        ]
    },
    {
        "id": "de14d34d058c8444",
        "type": "switch",
        "z": "572b6390b7e3b873",
        "name": "",
        "property": "RequestID_40",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "-",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 310,
        "y": 420,
        "wires": [
            [
                "964344c86f314c03",
                "f6fb41a7df3abbf4"
            ],
            [
                "f0d809f841223f5f"
            ]
        ]
    },
    {
        "id": "f0d809f841223f5f",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg: \"上一个动作还未完成\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 420,
        "wires": [
            [
                "aca6d243cabaa4d9"
            ]
        ]
    },
    {
        "id": "aca6d243cabaa4d9",
        "type": "http response",
        "z": "572b6390b7e3b873",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 340,
        "wires": []
    },
    {
        "id": "f6fb41a7df3abbf4",
        "type": "function",
        "z": "572b6390b7e3b873",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 340,
        "wires": [
            [
                "aca6d243cabaa4d9"
            ]
        ]
    },
    {
        "id": "59ad645db4ab9cdc",
        "type": "modbus-server",
        "z": "3afa9c07e50614a3",
        "name": "10040",
        "logEnabled": false,
        "hostname": "0.0.0.0",
        "serverPort": "10040",
        "responseDelay": 100,
        "delayUnit": "ms",
        "coilsBufferSize": 10000,
        "holdingBufferSize": 10000,
        "inputBufferSize": 10000,
        "discreteBufferSize": 10000,
        "showErrors": false,
        "x": 490,
        "y": 620,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "45017fe01e2a6b29",
        "type": "modbus-read",
        "z": "3afa9c07e50614a3",
        "name": "scara1 modbus-do控制",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "Coil",
        "adr": "100",
        "quantity": "10",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "b2ca547fae3e7fa9",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 200,
        "y": 180,
        "wires": [
            [
                "1387f251896e45c2",
                "9e5a23cdbd4624e8",
                "67fb6d820b48f372"
            ],
            []
        ]
    },
    {
        "id": "e65ae8033e6cb693",
        "type": "modbus-read",
        "z": "3afa9c07e50614a3",
        "name": "读取控制器modbus-di控制",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "Input",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "3410ec752ba96d35",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 210,
        "y": 320,
        "wires": [
            [
                "fe17aec7db684dd3",
                "03213379e8b404e1",
                "dea1aa609948b72b"
            ],
            []
        ]
    },
    {
        "id": "fe17aec7db684dd3",
        "type": "modbus-write",
        "z": "3afa9c07e50614a3",
        "name": "DI信号同步到6轴",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "0",
        "quantity": "100",
        "server": "9644a7088aaca35d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 510,
        "y": 320,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "1387f251896e45c2",
        "type": "modbus-write",
        "z": "3afa9c07e50614a3",
        "name": "DO信号同步到控制器",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "0",
        "quantity": "10",
        "server": "9644a7088aaca35d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 520,
        "y": 220,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "9e5a23cdbd4624e8",
        "type": "modbus-write",
        "z": "3afa9c07e50614a3",
        "name": "DO信号同步到虚拟modbus",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "100",
        "quantity": "10",
        "server": "8b08ccb1dadce45a",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 540,
        "y": 160,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "03213379e8b404e1",
        "type": "modbus-write",
        "z": "3afa9c07e50614a3",
        "name": "DI信号同步到虚拟modbus",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "100",
        "server": "8b08ccb1dadce45a",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 530,
        "y": 380,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "024bbcd10c5bf07c",
        "type": "modbus-read",
        "z": "3afa9c07e50614a3",
        "name": "读取控制器modbus-ao-逻辑变量",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "3410ec752ba96d35",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 230,
        "y": 480,
        "wires": [
            [
                "8f0b81754368b280"
            ],
            []
        ]
    },
    {
        "id": "67fb6d820b48f372",
        "type": "function",
        "z": "3afa9c07e50614a3",
        "name": "写入到本地内存",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "dea1aa609948b72b",
        "type": "function",
        "z": "3afa9c07e50614a3",
        "name": "写入到本地内存",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "8f0b81754368b280",
        "type": "function",
        "z": "3afa9c07e50614a3",
        "name": "写入到本地内存",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "d2f1143207f6f19c",
        "type": "inject",
        "z": "3afa9c07e50614a3",
        "name": "OP40数据初始化",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 60,
        "wires": [
            [
                "458de0be5408defd"
            ]
        ]
    },
    {
        "id": "458de0be5408defd",
        "type": "function",
        "z": "3afa9c07e50614a3",
        "name": "数据初始化",
        "func": "var IO_40 = {\n    DO:{},\n    DI:{},\n    AI:{//node-red收到来自控制器的逻辑变量\n        action: 0,//控制器端动作端的完成信号\n        action_scara1: 0,//6轴机械臂端动作的完成信号\n        action_scara2: 0,//6轴机械臂端动作的完成信号\n        error: 0,//控制器端的故障码\n        error_scara1: 0,//6轴机械臂的故障码\n        error_scara2: 0,//6轴机械臂的故障码\n        status: 0,//控制器端的状态\n        status_scara1: 0,//6轴机械臂状态\n        status_scara2: 0,//6轴机械臂状态\n        \n        M1 : 0,      \n        M2 : 0,      \n    },\n    AO:{//node-red要发送下去的逻辑变量\n        controller_action: 0,//下发给控制器的动作号\n        controller_scara1: 0,//下发给6轴机械臂的动作号,\n        controller_scara2: 0,//下发给6轴机械臂的动作号,\n        tray_in_count: 6,//AGV进口区的托盘号\n        tray_out_count: 6,//AGV出口区的托盘号y\n        tray_count: 30,//当前料盘上的先导阀数量\n        tray_vision_x: 40,//料盘拍照纠偏得y到的X坐标\n        tray_vision_y: 40,//料盘拍照纠偏得到的y坐标\n\n        \n        \n        M1 : 0,      \n        M2 : 0, \n        \n        material_status: 0,\n        work_object: 0, //产品类型\n        production: 0, // 当前执行工单的产量, 在工单开启或关闭的时候，改为0\n    }\n};\nvar Material_40 = [\n    {\n        code: \"XDF001\",//物料批次码,由MES下发\n        patch: 1000,//本生产批次的物料数量,根据这个来做退料计算\n        patch_remain: 1000,//本批次的物料剩余量\n        name: \"先导阀\",\n        remain: 100,//变成0的时候, 触发 搬动料盘层 的动作\n        used: 100,\n        trash: 0,\n    },\n    {\n        code:\"XDF002\",//\n        patch: 2000,\n        patch_remain: 1000,\n        name: \"M5螺丝\",\n        remain: 100,\n        used: 80,\n        trash: 0\n    },\n    {\n        code: \"XDF003\",//\n        patch: 2000,\n        patch_remain: 1000,\n        name: \"M6螺丝\",\n        remain: 100,\n        used: 80,\n        trash: 0\n    }\n];\nvar Vision_40 = {\n    session: \"\",\n    p1:{\n        msg: \"\",\n        response: \"\",\n        x:0,\n        y:0,\n    },\n    p2: {\n        msg: \"\",\n        response: \"\",\n        x: 0,\n        y: 0,\n    },\n    p3: {\n        msg: \"\",\n        response: \"\",\n        result: 0,\n    },\n};\nvar ErrorMap_40 = [\n    \"视觉通信故障\",\n    \"螺丝刀通信故障\",\n    \"伺服1故障\",\n    \"伺服2故障\",\n    \"伺服3故障\",\n    \"伺服4故障\",   \n    \"伺服5故障\",\n    \"伺服6故障\",\n    \"伺服7故障\",\n    ];\n\nglobal.set(\"Vision_40\",Vision_40);\nglobal.set(\"IO_40\",IO_40);\nglobal.set(\"Material_40\", Material_40);\nglobal.set(\"ErrorMap_40\", ErrorMap_40);\nglobal.set(\"BillCode_40\",\"BillCode_40\");\nvar t = (new Date()).toISOString();\nglobal.set(\"StartTime_40\", t);\nglobal.set(\"EndTime_40\", t);\nglobal.set(\"RequestID_40\", \"-\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "ce09e4bf474a4a43",
        "type": "inject",
        "z": "3afa9c07e50614a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 620,
        "wires": [
            [
                "dd60fec8fb4c2ff5"
            ]
        ]
    },
    {
        "id": "dd60fec8fb4c2ff5",
        "type": "function",
        "z": "3afa9c07e50614a3",
        "name": "函数 25",
        "func": "msg.payload = { 'value': 1, 'register': 'coils', 'address': 1 , 'disableMsgOutput' : 0 }; return msg;\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 620,
        "wires": [
            [
                "59ad645db4ab9cdc"
            ]
        ]
    },
    {
        "id": "a75a3cfd9d9b64e7",
        "type": "inject",
        "z": "3afa9c07e50614a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 680,
        "wires": [
            [
                "f8a3aee36c56393f"
            ]
        ]
    },
    {
        "id": "f8a3aee36c56393f",
        "type": "function",
        "z": "3afa9c07e50614a3",
        "name": "函数 26",
        "func": "msg.payload = { 'value': 1.0, 'register': 'input', 'address': 1 , 'disableMsgOutput' : 0 }; return msg;\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 680,
        "wires": [
            [
                "59ad645db4ab9cdc"
            ]
        ]
    },
    {
        "id": "35b7954e52a4e95f",
        "type": "modbus-read",
        "z": "3afa9c07e50614a3",
        "name": "scara2 modbus-do控制",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "Coil",
        "adr": "100",
        "quantity": "10",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "06b25b867a5a05ee",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 820,
        "y": 180,
        "wires": [
            [
                "30f1f4b0cc4a21df",
                "d618da76d39de1a9",
                "6cbab12e5e8cd621"
            ],
            []
        ]
    },
    {
        "id": "30f1f4b0cc4a21df",
        "type": "modbus-write",
        "z": "3afa9c07e50614a3",
        "name": "DO信号同步到控制器",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "0",
        "quantity": "10",
        "server": "9644a7088aaca35d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1140,
        "y": 220,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "d618da76d39de1a9",
        "type": "modbus-write",
        "z": "3afa9c07e50614a3",
        "name": "DO信号同步到虚拟modbus",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "100",
        "quantity": "10",
        "server": "8b08ccb1dadce45a",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1160,
        "y": 160,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "6cbab12e5e8cd621",
        "type": "function",
        "z": "3afa9c07e50614a3",
        "name": "写入到本地内存",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "a1fe1df9593815c4",
        "type": "http response",
        "z": "7ea93ba33d73caab",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1110,
        "y": 220,
        "wires": []
    },
    {
        "id": "4733043110895b60",
        "type": "http in",
        "z": "7ea93ba33d73caab",
        "name": "工位任务接收",
        "url": "/60/ReceiveStationTask",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 240,
        "wires": [
            [
                "12ef75f7c95a2c3c"
            ]
        ]
    },
    {
        "id": "46dc168ab8505d2a",
        "type": "http in",
        "z": "7ea93ba33d73caab",
        "name": "泛在通用写多个接口",
        "url": "/60/WriteValue",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 440,
        "wires": [
            [
                "80231b7ab58b897b"
            ]
        ]
    },
    {
        "id": "80231b7ab58b897b",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "modbus 报文拆分",
        "func": "var arr = msg.payload;\nfor(var i=0;i<arr.length;i++){\n    var t = arr[i];\n    msg.payload = { value: parseInt(t.Value), 'fc': 6, 'unitid': 1, 'address': parseInt(t.Address), 'quantity': 1 } \n    node.send(msg);\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 440,
        "wires": [
            [
                "222dbbbdd8ce1157"
            ]
        ]
    },
    {
        "id": "222dbbbdd8ce1157",
        "type": "modbus-flex-write",
        "z": "7ea93ba33d73caab",
        "name": "批量修改modbus值",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "server": "d6782a77eee52a2e",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 790,
        "y": 420,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "154ad952083142ba",
        "type": "change",
        "z": "7ea93ba33d73caab",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "StationTask_60",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 240,
        "wires": [
            [
                "959b606b0d3d48d9"
            ]
        ]
    },
    {
        "id": "ccbc44ce986db8ce",
        "type": "inject",
        "z": "7ea93ba33d73caab",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 640,
        "wires": [
            [
                "fdfd36a41352b7e7"
            ]
        ]
    },
    {
        "id": "fdfd36a41352b7e7",
        "type": "trigger",
        "z": "7ea93ba33d73caab",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 330,
        "y": 640,
        "wires": [
            [
                "871e81ddbcd0e2c8",
                "3db855298746fd70"
            ]
        ]
    },
    {
        "id": "6fc4c16f460d3327",
        "type": "http in",
        "z": "7ea93ba33d73caab",
        "name": "通用读多个接口",
        "url": "/60/ReadValue",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 480,
        "wires": [
            [
                "3cd048c19b6b2385",
                "99c9365df7f076b4"
            ]
        ]
    },
    {
        "id": "9eab2bb150a4700b",
        "type": "modbus-flex-getter",
        "z": "7ea93ba33d73caab",
        "name": "",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "logIOActivities": false,
        "server": "d6782a77eee52a2e",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 830,
        "y": 480,
        "wires": [
            [
                "b1db1a2770df34f2"
            ],
            []
        ]
    },
    {
        "id": "3cd048c19b6b2385",
        "type": "change",
        "z": "7ea93ba33d73caab",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ReadValue_60",
                "pt": "global",
                "to": "[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 480,
        "wires": [
            [
                "321c7b763544446d"
            ]
        ]
    },
    {
        "id": "321c7b763544446d",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "modbus 报文拆分",
        "func": "var arr = msg.payload;\nfor(var i=0;i<arr.length;i++){\n    var t = arr[i];\n    node.send({payload:{fc:3, address: parseInt(t.Address), quantity:1},temp:parseInt(t.Address)});\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 480,
        "wires": [
            [
                "9eab2bb150a4700b"
            ]
        ]
    },
    {
        "id": "b1db1a2770df34f2",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "函数 4",
        "func": "var arr = global.get(\"ReadValue_60\");\narr.push({\n    Address: msg.modbusRequest.address,\n    Value: msg.payload[0],\n    ValueType: \"int\"\n});\n\nglobal.set(\"ReadValue_60\",arr);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "35523b70b586fc7f",
        "type": "change",
        "z": "7ea93ba33d73caab",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.Code",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload.Msg",
                "pt": "msg",
                "to": "操作成功",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.Data",
                "pt": "msg",
                "to": "ReadValue_60",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 540,
        "wires": [
            [
                "6e21fe6e63c12bd4"
            ]
        ]
    },
    {
        "id": "6e21fe6e63c12bd4",
        "type": "http response",
        "z": "7ea93ba33d73caab",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 830,
        "y": 540,
        "wires": []
    },
    {
        "id": "99c9365df7f076b4",
        "type": "delay",
        "z": "7ea93ba33d73caab",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 320,
        "y": 540,
        "wires": [
            [
                "d306326b5bf01718"
            ]
        ]
    },
    {
        "id": "cddb487d1cbe3241",
        "type": "rbe",
        "z": "7ea93ba33d73caab",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 390,
        "y": 720,
        "wires": [
            [
                "0c8b84a05aa83ab5"
            ]
        ]
    },
    {
        "id": "871e81ddbcd0e2c8",
        "type": "change",
        "z": "7ea93ba33d73caab",
        "name": "加工信号完成监听",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_60.AI.status",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 720,
        "wires": [
            [
                "cddb487d1cbe3241"
            ]
        ]
    },
    {
        "id": "0c8b84a05aa83ab5",
        "type": "switch",
        "z": "7ea93ba33d73caab",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            },
            {
                "t": "btwn",
                "v": "40",
                "vt": "num",
                "v2": "49",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 510,
        "y": 720,
        "wires": [
            [
                "d475f50fd236dacd"
            ],
            [
                "b284ab8eb11386f9"
            ]
        ]
    },
    {
        "id": "eb037aedf2904846",
        "type": "http request",
        "z": "7ea93ba33d73caab",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1080,
        "y": 720,
        "wires": [
            [
                "7de1258a5dcdb9db"
            ]
        ]
    },
    {
        "id": "28c12aa2c6a3dce3",
        "type": "rbe",
        "z": "7ea93ba33d73caab",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 390,
        "y": 780,
        "wires": [
            [
                "07a0ef8fe135791e"
            ]
        ]
    },
    {
        "id": "3db855298746fd70",
        "type": "change",
        "z": "7ea93ba33d73caab",
        "name": "故障信号监听",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_60.AI.error",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 780,
        "wires": [
            [
                "28c12aa2c6a3dce3"
            ]
        ]
    },
    {
        "id": "07a0ef8fe135791e",
        "type": "switch",
        "z": "7ea93ba33d73caab",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 510,
        "y": 780,
        "wires": [
            [
                "a0b31e17ed337999"
            ]
        ]
    },
    {
        "id": "2f0621a45a34b82b",
        "type": "http request",
        "z": "7ea93ba33d73caab",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Accept",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 880,
        "y": 780,
        "wires": [
            [
                "f6cb57bcdad80692"
            ]
        ]
    },
    {
        "id": "d306326b5bf01718",
        "type": "change",
        "z": "7ea93ba33d73caab",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 540,
        "wires": [
            [
                "35523b70b586fc7f"
            ]
        ]
    },
    {
        "id": "7de1258a5dcdb9db",
        "type": "debug",
        "z": "7ea93ba33d73caab",
        "name": "调试 16",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1240,
        "y": 720,
        "wires": []
    },
    {
        "id": "f6cb57bcdad80692",
        "type": "debug",
        "z": "7ea93ba33d73caab",
        "name": "调试 17",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1040,
        "y": 780,
        "wires": []
    },
    {
        "id": "959b606b0d3d48d9",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg:\"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 240,
        "wires": [
            [
                "a1fe1df9593815c4"
            ]
        ]
    },
    {
        "id": "eb9fe35aa2c05dbb",
        "type": "http in",
        "z": "7ea93ba33d73caab",
        "name": "ReceiveEndSignal",
        "url": "/60/ReceiveEndSignal",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "104ea618672f0e8f"
            ]
        ]
    },
    {
        "id": "2d126e7b96bee16f",
        "type": "http response",
        "z": "7ea93ba33d73caab",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 140,
        "wires": []
    },
    {
        "id": "d7c3ccf8018f318b",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 120,
        "wires": [
            [
                "2d126e7b96bee16f"
            ]
        ]
    },
    {
        "id": "104ea618672f0e8f",
        "type": "switch",
        "z": "7ea93ba33d73caab",
        "name": "",
        "property": "payload.BillCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "StationTask_60.BillCode",
                "vt": "global"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 120,
        "wires": [
            [
                "32cf47be67dd3f06",
                "d7c3ccf8018f318b",
                "f140fab0c69631ae"
            ],
            [
                "3d016198f2e9d401"
            ]
        ]
    },
    {
        "id": "32cf47be67dd3f06",
        "type": "change",
        "z": "7ea93ba33d73caab",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_60.AO.production",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "3d016198f2e9d401",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg: \"操作失败,当前设备执行的工单和下发的结束工单不一致\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 160,
        "wires": [
            [
                "2d126e7b96bee16f"
            ]
        ]
    },
    {
        "id": "15a69c2e8a05ca57",
        "type": "http response",
        "z": "7ea93ba33d73caab",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 790,
        "y": 280,
        "wires": []
    },
    {
        "id": "5a300c1d25669d8f",
        "type": "http in",
        "z": "7ea93ba33d73caab",
        "name": "工位状态-轮询",
        "url": "/60/GetStationState",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 280,
        "wires": [
            [
                "82b772b6c9c52464"
            ]
        ]
    },
    {
        "id": "82b772b6c9c52464",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "反馈",
        "func": "var IO_60 = global.get(\"IO_60\");\nmsg.payload = {\n\t\"Code\": 0,\n\t\"Msg\": \"操作成功\",\n\t\"Data\": [{\n\t\t\"StationCode\": \"OP60\",\n\t\t\"StationName\": \"丝堵预装配\",\n\t\t\"Status\": IO_60.AI.status\n\t}]\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 280,
        "wires": [
            [
                "15a69c2e8a05ca57"
            ]
        ]
    },
    {
        "id": "eb0d2b3b282f30a6",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "function 3",
        "func": "msg.payload = {\n \t\"requestID\": global.get(\"RequestID_60\"),\n\t\"startTime\": global.get(\"StartTime_60\"),\n\t\"endTime\": global.get(\"EndTime_60\")\n};\n\nmsg.url = global.get(\"LCS\")+\"actionCompletedSignal\";\n//msg.method = \"POST\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 720,
        "wires": [
            [
                "eb037aedf2904846"
            ]
        ]
    },
    {
        "id": "a0b31e17ed337999",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "function 4",
        "func": "var ErrorMap_60 = global.get(\"ErrorMap_60\");\nmsg.payload ={\t\t\t\t\n\tEquipmentCode: \"OP60\",\t\t\t\n\tEquipmentName: \"上料泛在控制器\",\t\t\t\n\tStatus: 0,\n    WarnContent: ErrorMap_60[msg.payload]\t\t\n};\nmsg.url = global.get(\"LCS\")+\"receiveUbiquitousWarn\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 780,
        "wires": [
            [
                "2f0621a45a34b82b"
            ]
        ]
    },
    {
        "id": "b284ab8eb11386f9",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "function 13",
        "func": "\nvar t = (new Date()).toISOString();\n//t = t.replace(\"T\",\" \");\n//t = t.substring(0,19);\nglobal.set(\"StartTime_60\", t);\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "d475f50fd236dacd",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "function 14",
        "func": "\nvar t = (new Date()).toISOString();\n//t = t.replace(\"T\",\" \");\n//t = t.substring(0,19);\nglobal.set(\"EndTime_60\", t);\nglobal.set(\"RequestID_60\", \"-\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 680,
        "wires": [
            [
                "eb0d2b3b282f30a6"
            ]
        ]
    },
    {
        "id": "b5ef094c0e7ad755",
        "type": "inject",
        "z": "7ea93ba33d73caab",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 510,
        "y": 680,
        "wires": [
            [
                "d475f50fd236dacd"
            ]
        ]
    },
    {
        "id": "1545aee0d0601590",
        "type": "http in",
        "z": "7ea93ba33d73caab",
        "name": "动作执行",
        "url": "/60/DoAction",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 400,
        "wires": [
            [
                "353eb08868cee8f6"
            ]
        ]
    },
    {
        "id": "836df86eb39ec366",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "modbus 报文拆分",
        "func": "var t = msg.payload;\nvar RequestID = t.RequestID;\nglobal.set(\"RequestID_60\",RequestID);\nmsg.payload = { value: parseInt(t.Value), 'fc': 6, 'unitid': 1, 'address': parseInt(t.Address), 'quantity': 1 } \nnode.send(msg);",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 360,
        "wires": [
            [
                "222dbbbdd8ce1157"
            ]
        ]
    },
    {
        "id": "353eb08868cee8f6",
        "type": "switch",
        "z": "7ea93ba33d73caab",
        "name": "",
        "property": "RequestID_60",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "-",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 400,
        "wires": [
            [
                "836df86eb39ec366",
                "0adcd572b255d28a"
            ],
            [
                "9eb85992335a4ef6"
            ]
        ]
    },
    {
        "id": "0adcd572b255d28a",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 320,
        "wires": [
            [
                "e612d00fa180dc3f"
            ]
        ]
    },
    {
        "id": "e612d00fa180dc3f",
        "type": "http response",
        "z": "7ea93ba33d73caab",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "9eb85992335a4ef6",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg: \"上一个动作还未完成\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 400,
        "wires": [
            [
                "e612d00fa180dc3f"
            ]
        ]
    },
    {
        "id": "12ef75f7c95a2c3c",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "格式解析",
        "func": "msg.error = 0;\n\nvar task = global.get(\"StationTask_60\");\nif(task.BillCode!='-'){\n    msg.error = 1;\n    msg.errorMsg = \"previese task is on going\";\n    return msg;\n}\n\nconst data = msg.payload;\nif((typeof(data)!='object')){\n    msg.error = 2;\n    msg.errorMsg = \"format wrong\";\n    return msg;\n}\n\nif (!('BillCode' in data)){\n    msg.error = 3;\n    msg.errorMsg = \"no BillCode\";\n    return msg;\n}\nif (!('ProductCode' in data)){\n    msg.error = 4;\n    msg.errorMsg = \"no ProductCode\";\n    return msg;\n}\n\nif (!('ProcessDetail' in data)){\n    msg.error = 5;\n    msg.errorMsg = \"no ProcessDetail\";\n    return msg;\n}\n\nif(data.ProcessDetail.length==1){\n    const data2 = data.ProcessDetail[0];\n    if (!('ProcessCode' in data2)){\n        msg.error = 6;\n        msg.errorMsg = \"no ProcessCode\";\n        return msg;\n    }\n    if(data2.ProcessCode!='OP60'){\n        msg.error = 7;\n        msg.errorMsg = \"no OP60\";\n        return msg;\n    }\n    if (!('Num' in data2)){\n        msg.error = 8;\n        msg.errorMsg = \"no Num\";\n        return msg;\n    }\n    if (!('MaterialDetails' in data2)){\n        msg.error = 9;\n        msg.errorMsg = \"no MaterialDetails\";\n        return msg;\n    }\n\n    for(var i=0;i<data2.MaterialDetails.length;i++){\n        const data3 = data2.MaterialDetails[i];\n        if (!('MaterialCode' in data3)){\n            msg.error = 10;\n            msg.errorMsg = \"MaterialDetails is missing\";\n            return msg;\n        }\n        if (!('Num' in data3)){\n            msg.error = 11;\n            msg.errorMsg = \"Num is missing\";\n            return msg;\n        }   \n        const _arr= [\n            \"M18-SD\",\n            \"DXF-2\",\n            \"LX\",\n            \"DXF-1\",\n            \"M24-SD\",\n            \"M14-SD\"];\n        const a = _arr.indexOf(data3.MaterialCode)\n        if(a == -1){\n            msg.error = 12;\n            msg.errorMsg = \"MaterialCode is wrong \"+data3.MaterialCode;\n            return msg;\n        }                \n    }\n}\nelse{\n    msg.error = 13;\n    msg.errorMsg = \"ProcessDetail.length should be 1\";\n    return msg;\n}\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 240,
        "wires": [
            [
                "fc96a790b927cdd2",
                "73b814cc9bcff094"
            ]
        ]
    },
    {
        "id": "fc96a790b927cdd2",
        "type": "switch",
        "z": "7ea93ba33d73caab",
        "name": "",
        "property": "error",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 240,
        "wires": [
            [
                "154ad952083142ba"
            ],
            [
                "bd8fa95de4919def"
            ]
        ]
    },
    {
        "id": "bd8fa95de4919def",
        "type": "function",
        "z": "7ea93ba33d73caab",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg:\"失败\"+msg.errorMsg\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 200,
        "wires": [
            [
                "a1fe1df9593815c4"
            ]
        ]
    },
    {
        "id": "73b814cc9bcff094",
        "type": "debug",
        "z": "7ea93ba33d73caab",
        "name": "debug 13",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 340,
        "y": 180,
        "wires": []
    },
    {
        "id": "f140fab0c69631ae",
        "type": "change",
        "z": "7ea93ba33d73caab",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "StationTask_60.BillCode",
                "pt": "global",
                "to": "-",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "5e601b804206ef8a",
        "type": "inject",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 640,
        "wires": [
            [
                "af9cfd15b1cb0699"
            ]
        ]
    },
    {
        "id": "af9cfd15b1cb0699",
        "type": "trigger",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 310,
        "y": 640,
        "wires": [
            [
                "aaa503bcc7600e51",
                "4f7c79fd77fb38dc"
            ]
        ]
    },
    {
        "id": "3af8e0ca5cbf05b0",
        "type": "http in",
        "z": "0ed9a07ea391dd22",
        "name": "通用读多个接口",
        "url": "/90/ReadValue",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 480,
        "wires": [
            [
                "765dd18278471806",
                "a8c76c3f5f30968b"
            ]
        ]
    },
    {
        "id": "60c3df52814aa044",
        "type": "modbus-flex-getter",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "logIOActivities": false,
        "server": "d6782a77eee52a2e",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 830,
        "y": 480,
        "wires": [
            [
                "0a6e009d35077a8c"
            ],
            [
                "872f3464f7276685"
            ]
        ]
    },
    {
        "id": "765dd18278471806",
        "type": "change",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ReadValue_90",
                "pt": "global",
                "to": "[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 480,
        "wires": [
            [
                "c790fc92799892a2"
            ]
        ]
    },
    {
        "id": "c790fc92799892a2",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "modbus 报文拆分",
        "func": "var arr = msg.payload;\nfor(var i=0;i<arr.length;i++){\n    var t = arr[i];\n    node.send({payload:{fc:3, address: parseInt(t.Address), quantity:1},temp:parseInt(t.Address)});\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 480,
        "wires": [
            [
                "60c3df52814aa044"
            ]
        ]
    },
    {
        "id": "0a6e009d35077a8c",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "函数 4",
        "func": "var arr = global.get(\"ReadValue_90\");\narr.push({\n    Address: msg.modbusRequest.address,\n    Value: msg.payload[0],\n    ValueType: \"int\"\n});\nconsole.debug(arr);\nglobal.set(\"ReadValue_90\",arr);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "58487f8fcf1ad13b",
        "type": "change",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.Code",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload.Msg",
                "pt": "msg",
                "to": "操作成功",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.Data",
                "pt": "msg",
                "to": "ReadValue_90",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 520,
        "wires": [
            [
                "e890259894823d74"
            ]
        ]
    },
    {
        "id": "e890259894823d74",
        "type": "http response",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 520,
        "wires": []
    },
    {
        "id": "a8c76c3f5f30968b",
        "type": "delay",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 300,
        "y": 520,
        "wires": [
            [
                "feeeb7d1502ebb11"
            ]
        ]
    },
    {
        "id": "b5c59853053b3706",
        "type": "rbe",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 370,
        "y": 720,
        "wires": [
            [
                "24bd5c639ca0b785"
            ]
        ]
    },
    {
        "id": "aaa503bcc7600e51",
        "type": "change",
        "z": "0ed9a07ea391dd22",
        "name": "状态变化监听",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_60.AI.status",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 720,
        "wires": [
            [
                "b5c59853053b3706"
            ]
        ]
    },
    {
        "id": "24bd5c639ca0b785",
        "type": "switch",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            },
            {
                "t": "btwn",
                "v": "40",
                "vt": "num",
                "v2": "49",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 720,
        "wires": [
            [
                "94c65982ead6d98e"
            ],
            [
                "61736a596fade06c"
            ]
        ]
    },
    {
        "id": "7b0ffa0664da1a24",
        "type": "http request",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1060,
        "y": 720,
        "wires": [
            [
                "f0793d20cf4c7a15"
            ]
        ]
    },
    {
        "id": "ca8979c14b6bd108",
        "type": "rbe",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 370,
        "y": 800,
        "wires": [
            [
                "02e7718eb30bcc6e"
            ]
        ]
    },
    {
        "id": "4f7c79fd77fb38dc",
        "type": "change",
        "z": "0ed9a07ea391dd22",
        "name": "故障信号监听",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_60.AI.error",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 800,
        "wires": [
            [
                "ca8979c14b6bd108"
            ]
        ]
    },
    {
        "id": "02e7718eb30bcc6e",
        "type": "switch",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 800,
        "wires": [
            [
                "9e9291c82e052d7e"
            ]
        ]
    },
    {
        "id": "5cc06bbd651b129a",
        "type": "http request",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Accept",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 860,
        "y": 800,
        "wires": [
            [
                "86637bde03033fa8"
            ]
        ]
    },
    {
        "id": "872f3464f7276685",
        "type": "debug",
        "z": "0ed9a07ea391dd22",
        "name": "调试 15",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 540,
        "wires": []
    },
    {
        "id": "feeeb7d1502ebb11",
        "type": "change",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 520,
        "wires": [
            [
                "58487f8fcf1ad13b"
            ]
        ]
    },
    {
        "id": "f0793d20cf4c7a15",
        "type": "debug",
        "z": "0ed9a07ea391dd22",
        "name": "调试 16",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1220,
        "y": 720,
        "wires": []
    },
    {
        "id": "86637bde03033fa8",
        "type": "debug",
        "z": "0ed9a07ea391dd22",
        "name": "调试 17",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 800,
        "wires": []
    },
    {
        "id": "60761f342f0ccb75",
        "type": "inject",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 900,
        "wires": [
            [
                "43c94bb3c7194856"
            ]
        ]
    },
    {
        "id": "43c94bb3c7194856",
        "type": "trigger",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-2",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 340,
        "y": 900,
        "wires": [
            [
                "89074e6b0dbf3de2"
            ]
        ]
    },
    {
        "id": "89074e6b0dbf3de2",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "物料缺料告知MES",
        "func": "const StationTask_90 = global.get(\"StationTask_90\");\nconst MaterialDetails = StationTask_90.ProcessDetail[0].MaterialDetails;\nfor(var i=0;i<MaterialDetails.length;i++){\n    var t = MaterialDetails[i];\n    if (t.remain==0){\n        node.send({payload:[{\n            EquipmentCode: \"OP90\",\n            EquipmentName: \"OP90\",\n            MaterialCode: t.code,\n            MaterialName: t.name,\n            LocationCode: \"L1\",\n            MaxTryNum: 1,\n        }]});\n    }\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 900,
        "wires": [
            [
                "e0216d35cb402cbb"
            ]
        ]
    },
    {
        "id": "e0216d35cb402cbb",
        "type": "http request",
        "z": "0ed9a07ea391dd22",
        "name": "GetLackMaterialsInfo",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost/GetLackMaterialsInfo",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 780,
        "y": 900,
        "wires": [
            [
                "fe31c4f5b61bc2eb"
            ]
        ]
    },
    {
        "id": "fe31c4f5b61bc2eb",
        "type": "debug",
        "z": "0ed9a07ea391dd22",
        "name": "调试 18",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 900,
        "wires": []
    },
    {
        "id": "879e05c683a3e472",
        "type": "http in",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "url": "/90/GetTrayInfo",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 1020,
        "wires": [
            [
                "23be5ea4ed10689f"
            ]
        ]
    },
    {
        "id": "23be5ea4ed10689f",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "函数 12",
        "func": "var arr = msg.payload.PortNumber;\nvar data = [];\nvar materials = global.get(\"materials\");\nfor(var i=0;i<arr.length;i++){\n    for (var i2 = 0; i2 < materials.length; i2++) {\n        if(arr[i]==materials[i2].position){\n            data.push({\n                TotalNum: 1,\n                LocationCode: materials[i2].position,\n                item:[{\n                TraySn: materials[i2].position,\n                MaterialCode: materials[i2].code,\n                MaterialName: materials[i2].name,\n                Num: materials[i2].remain,\n            }]})\n        }\n    }\n}\nmsg = {payload:{Code:0, Msg:\"操作成功\",Data:data}};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1020,
        "wires": [
            [
                "42eb1857563aab68"
            ]
        ]
    },
    {
        "id": "42eb1857563aab68",
        "type": "http response",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 1020,
        "wires": []
    },
    {
        "id": "fd7c4304e1e0f6e4",
        "type": "http in",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "url": "/90/ReceiveMaterialInfo",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 1080,
        "wires": [
            [
                "8854440cbbe3442e"
            ]
        ]
    },
    {
        "id": "8854440cbbe3442e",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "函数 14",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1080,
        "wires": [
            [
                "93080e03b04d1131"
            ]
        ]
    },
    {
        "id": "93080e03b04d1131",
        "type": "http response",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 1080,
        "wires": []
    },
    {
        "id": "121a4c46651a955a",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "function 19",
        "func": "msg.payload = {\n \t\"requestID\": global.get(\"RequestID_60\"),\n\t\"startTime\": global.get(\"StartTime_60\"),\n\t\"endTime\": global.get(\"EndTime_60\")\n};\n\nmsg.url = global.get(\"LCS\")+\"actionCompletedSignal\";\n//msg.method = \"POST\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 720,
        "wires": [
            [
                "7b0ffa0664da1a24"
            ]
        ]
    },
    {
        "id": "9e9291c82e052d7e",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "function 20",
        "func": "var ErrorMap_60 = global.get(\"ErrorMap_60\");\nmsg.payload ={\t\t\t\t\n\tEquipmentCode: \"OP60\",\t\t\t\n\tEquipmentName: \"上料泛在控制器\",\t\t\t\n\tStatus: 0,\n    WarnContent: ErrorMap_60[msg.payload]\t\t\n};\nmsg.url = global.get(\"LCS\")+\"receiveUbiquitousWarn\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 800,
        "wires": [
            [
                "5cc06bbd651b129a"
            ]
        ]
    },
    {
        "id": "61736a596fade06c",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "开始生产",
        "func": "\nvar t = (new Date()).toISOString();\nglobal.set(\"StartTime_90\", t);\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "94c65982ead6d98e",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "生产完成",
        "func": "\nvar t = (new Date()).toISOString();\nglobal.set(\"EndTime_90\", t);\nglobal.set(\"RequestID_90\", \"-\");\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 680,
        "wires": [
            [
                "121a4c46651a955a"
            ]
        ]
    },
    {
        "id": "5ecf9e73235be089",
        "type": "inject",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 490,
        "y": 680,
        "wires": [
            [
                "94c65982ead6d98e"
            ]
        ]
    },
    {
        "id": "f3c49b373184a805",
        "type": "http response",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1090,
        "y": 220,
        "wires": []
    },
    {
        "id": "c938d34e09d68ee4",
        "type": "http in",
        "z": "0ed9a07ea391dd22",
        "name": "工位任务接收",
        "url": "/90/ReceiveStationTask",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 240,
        "wires": [
            [
                "36619e542aba5288"
            ]
        ]
    },
    {
        "id": "a0092eea86d92c0c",
        "type": "http in",
        "z": "0ed9a07ea391dd22",
        "name": "泛在通用写多个接口",
        "url": "/90/WriteValue",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 440,
        "wires": [
            [
                "6a3735a3b253faf8"
            ]
        ]
    },
    {
        "id": "6a3735a3b253faf8",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "modbus 报文拆分",
        "func": "var arr = msg.payload;\nfor(var i=0;i<arr.length;i++){\n    var t = arr[i];\n    msg.payload = { value: parseInt(t.Value), 'fc': 6, 'unitid': 1, 'address': parseInt(t.Address), 'quantity': 1 } \n    node.send(msg);\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 440,
        "wires": [
            [
                "98b8d2691dca6793"
            ]
        ]
    },
    {
        "id": "98b8d2691dca6793",
        "type": "modbus-flex-write",
        "z": "0ed9a07ea391dd22",
        "name": "批量修改modbus值",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "server": "8b08ccb1dadce45a",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 770,
        "y": 420,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "691f4907f25d5e2b",
        "type": "change",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "StationTask_90",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 240,
        "wires": [
            [
                "b1c462673f309b47"
            ]
        ]
    },
    {
        "id": "b1c462673f309b47",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg:\"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 240,
        "wires": [
            [
                "f3c49b373184a805"
            ]
        ]
    },
    {
        "id": "39c10f5357b6e371",
        "type": "http in",
        "z": "0ed9a07ea391dd22",
        "name": "ReceiveEndSignal",
        "url": "/90/ReceiveEndSignal",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "ad3f7e483b265d37"
            ]
        ]
    },
    {
        "id": "48e2cd34c41e0cf0",
        "type": "http response",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 140,
        "wires": []
    },
    {
        "id": "70ae8bb0498d2b1a",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 120,
        "wires": [
            [
                "48e2cd34c41e0cf0"
            ]
        ]
    },
    {
        "id": "ad3f7e483b265d37",
        "type": "switch",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "property": "payload.BillCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "StationTask_90.BillCode",
                "vt": "global"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 120,
        "wires": [
            [
                "00523132650e98ad",
                "70ae8bb0498d2b1a",
                "c937c9d35ef2f7e8"
            ],
            [
                "0306e5e277a70a68"
            ]
        ]
    },
    {
        "id": "00523132650e98ad",
        "type": "change",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.production",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "0306e5e277a70a68",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg: \"操作失败,当前设备执行的工单和下发的结束工单不一致\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 160,
        "wires": [
            [
                "48e2cd34c41e0cf0"
            ]
        ]
    },
    {
        "id": "f4290f4200caddbd",
        "type": "http response",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 280,
        "wires": []
    },
    {
        "id": "8c151f8624b8ee64",
        "type": "http in",
        "z": "0ed9a07ea391dd22",
        "name": "工位状态-轮询",
        "url": "/90/GetStationState",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 280,
        "wires": [
            [
                "312d03afb40a3ed8"
            ]
        ]
    },
    {
        "id": "312d03afb40a3ed8",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "反馈",
        "func": "var IO_60 = global.get(\"IO_90\");\nmsg.payload = {\n\t\"Code\": 0,\n\t\"Msg\": \"操作成功\",\n\t\"Data\": [{\n\t\t\"StationCode\": \"OP90\",\n\t\t\"StationName\": \"丝堵预装配\",\n\t\t\"Status\": IO_90.AI.status\n\t}]\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 280,
        "wires": [
            [
                "f4290f4200caddbd"
            ]
        ]
    },
    {
        "id": "2db1929c03ea3aea",
        "type": "http in",
        "z": "0ed9a07ea391dd22",
        "name": "动作执行",
        "url": "/90/DoAction",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 400,
        "wires": [
            [
                "923d6985d026cfc9"
            ]
        ]
    },
    {
        "id": "fe2cb743682890b3",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "modbus 报文拆分",
        "func": "var t = msg.payload;\nvar RequestID = t.RequestID;\nglobal.set(\"RequestID_90\",RequestID);\nmsg.payload = { value: parseInt(t.Value), 'fc': 6, 'unitid': 1, 'address': parseInt(t.Address), 'quantity': 1 } \nnode.send(msg);",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 360,
        "wires": [
            [
                "98b8d2691dca6793"
            ]
        ]
    },
    {
        "id": "923d6985d026cfc9",
        "type": "switch",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "property": "RequestID_90",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "-",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 310,
        "y": 400,
        "wires": [
            [
                "fe2cb743682890b3",
                "58cc1a92971be7a5"
            ],
            [
                "9a0d23d7b8dd6280"
            ]
        ]
    },
    {
        "id": "58cc1a92971be7a5",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 320,
        "wires": [
            [
                "7ab02fc49140ef8c"
            ]
        ]
    },
    {
        "id": "7ab02fc49140ef8c",
        "type": "http response",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 320,
        "wires": []
    },
    {
        "id": "9a0d23d7b8dd6280",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg: \"上一个动作还未完成\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 400,
        "wires": [
            [
                "7ab02fc49140ef8c"
            ]
        ]
    },
    {
        "id": "36619e542aba5288",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "格式解析",
        "func": "msg.error = 0;\n\nvar task = global.get(\"StationTask_90\");\nif(task.BillCode!='-'){\n    msg.error = 1;\n    msg.errorMsg = \"previese task is on going\";\n    return msg;\n}\n\nconst data = msg.payload;\nif((typeof(data)!='object')){\n    msg.error = 2;\n    msg.errorMsg = \"format wrong\";\n    return msg;\n}\n\nif (!('BillCode' in data)){\n    msg.error = 3;\n    msg.errorMsg = \"no BillCode\";\n    return msg;\n}\nif (!('ProductCode' in data)){\n    msg.error = 4;\n    msg.errorMsg = \"no ProductCode\";\n    return msg;\n}\n\nif (!('ProcessDetail' in data)){\n    msg.error = 5;\n    msg.errorMsg = \"no ProcessDetail\";\n    return msg;\n}\n\nif(data.ProcessDetail.length==1){\n    const data2 = data.ProcessDetail[0];\n    if (!('ProcessCode' in data2)){\n        msg.error = 6;\n        msg.errorMsg = \"no ProcessCode\";\n        return msg;\n    }\n    if(data2.ProcessCode!='OP90'){\n        msg.error = 7;\n        msg.errorMsg = \"no OP90\";\n        return msg;\n    }\n    if (!('Num' in data2)){\n        msg.error = 8;\n        msg.errorMsg = \"no Num\";\n        return msg;\n    }\n    if (!('MaterialDetails' in data2)){\n        msg.error = 9;\n        msg.errorMsg = \"no MaterialDetails\";\n        return msg;\n    }\n\n    for(var i=0;i<data2.MaterialDetails.length;i++){\n        const data3 = data2.MaterialDetails[i];\n        if (!('MaterialCode' in data3)){\n            msg.error = 10;\n            msg.errorMsg = \"MaterialDetails is missing\";\n            return msg;\n        }\n        if (!('Num' in data3)){\n            msg.error = 11;\n            msg.errorMsg = \"Num is missing\";\n            return msg;\n        }   \n        const _arr= [\n            \"M5x20\",\n            \"M6x85\",\n            \"XDF\",];\n        const a = _arr.indexOf(data3.MaterialCode)\n        if(a == -1){\n            msg.error = 12;\n            msg.errorMsg = \"MaterialCode is wrong \"+data3.MaterialCode;\n            return msg;\n        }                \n    }\n}\nelse{\n    msg.error = 13;\n    msg.errorMsg = \"ProcessDetail.length should be 1\";\n    return msg;\n}\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 240,
        "wires": [
            [
                "f9c8a9ac3c5633de",
                "b4469b3b451f28da"
            ]
        ]
    },
    {
        "id": "f9c8a9ac3c5633de",
        "type": "switch",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "property": "error",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 240,
        "wires": [
            [
                "691f4907f25d5e2b"
            ],
            [
                "b297b36fbd2f791d"
            ]
        ]
    },
    {
        "id": "b297b36fbd2f791d",
        "type": "function",
        "z": "0ed9a07ea391dd22",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg:\"失败\"+msg.errorMsg\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 200,
        "wires": [
            [
                "f3c49b373184a805"
            ]
        ]
    },
    {
        "id": "b4469b3b451f28da",
        "type": "debug",
        "z": "0ed9a07ea391dd22",
        "name": "debug 14",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 320,
        "y": 180,
        "wires": []
    },
    {
        "id": "c937c9d35ef2f7e8",
        "type": "change",
        "z": "0ed9a07ea391dd22",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "StationTask_90.BillCode",
                "pt": "global",
                "to": "-",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "47561ca890b23427",
        "type": "tcp in",
        "z": "e938579b29d3cf7f",
        "name": "",
        "server": "client",
        "host": "localhost",
        "port": "1090",
        "datamode": "stream",
        "datatype": "buffer",
        "newline": "",
        "topic": "",
        "trim": false,
        "base64": false,
        "tls": "",
        "x": 150,
        "y": 160,
        "wires": [
            [
                "e1dbca2036be2385"
            ]
        ]
    },
    {
        "id": "50cc819c6bf8d907",
        "type": "tcp out",
        "z": "e938579b29d3cf7f",
        "name": "",
        "host": "",
        "port": "",
        "beserver": "reply",
        "base64": false,
        "end": false,
        "tls": "",
        "x": 1090,
        "y": 220,
        "wires": []
    },
    {
        "id": "5e0be52bdb654ff5",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "先导阀料盘定位",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#1",
        "payloadType": "str",
        "x": 620,
        "y": 460,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ]
    },
    {
        "id": "c9302598456b8a85",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "阀体定位",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#2",
        "payloadType": "str",
        "x": 600,
        "y": 400,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ]
    },
    {
        "id": "2ace157097b94190",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "螺丝定位",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#3",
        "payloadType": "str",
        "x": 600,
        "y": 720,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ]
    },
    {
        "id": "e1dbca2036be2385",
        "type": "function",
        "z": "e938579b29d3cf7f",
        "name": "视觉报文解析",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 160,
        "wires": [
            [
                "167f14fc927453a5"
            ]
        ]
    },
    {
        "id": "167f14fc927453a5",
        "type": "switch",
        "z": "e938579b29d3cf7f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "AGV",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "truss",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "relocate",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 530,
        "y": 160,
        "wires": [
            [
                "e5af5aed4a13802a"
            ],
            [
                "a5b47af96c629f58"
            ],
            [
                "470fe16a5540a4de"
            ]
        ]
    },
    {
        "id": "42b3a660ce7e3773",
        "type": "status",
        "z": "e938579b29d3cf7f",
        "name": "",
        "scope": [
            "47561ca890b23427"
        ],
        "x": 230,
        "y": 80,
        "wires": [
            [
                "fc675eccf5199059"
            ]
        ]
    },
    {
        "id": "fc675eccf5199059",
        "type": "function",
        "z": "e938579b29d3cf7f",
        "name": "监听视觉控制器连接",
        "func": "if(msg.status.text=='common.status.connected'){\n    var Vision_90 = global.get(\"Vision_90\");\n    Vision_90.session = msg._session.id;\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "b27518de2a57a0f1",
        "type": "function",
        "z": "e938579b29d3cf7f",
        "name": "添加视觉session",
        "func": "var Vision_90 = global.get(\"Vision_90\");\nmsg._session.id = Vision_90.session;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 220,
        "wires": [
            [
                "50cc819c6bf8d907"
            ]
        ]
    },
    {
        "id": "5c7fec376aee60ee",
        "type": "change",
        "z": "e938579b29d3cf7f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Vision_90.v1.request",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 220,
        "wires": [
            [
                "96c51262bea65964"
            ]
        ]
    },
    {
        "id": "96c51262bea65964",
        "type": "rbe",
        "z": "e938579b29d3cf7f",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 675,
        "y": 220,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ],
        "l": false
    },
    {
        "id": "e5af5aed4a13802a",
        "type": "function",
        "z": "e938579b29d3cf7f",
        "name": "进料盘抓取拍照读坐标反馈",
        "func": "const str = msg.payload;\nconst arr = str.split(\",\");\nconst result = arr[0];\nvar x = 0;\nvar y = 0;\nif(result == 1){\n    x = arr[1];\n    y = arr[2];\n}\nvar Vision_90 = global.get(\"Vision_90\");\nVision_90.p1.x = x;\nVision_90.p1.y = y;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "a5b47af96c629f58",
        "type": "function",
        "z": "e938579b29d3cf7f",
        "name": "三轴桁架打螺丝定位",
        "func": "const str = msg.payload;\nconst arr = str.split(\",\");\nconst result = arr[0];\nvar x = 0;\nvar y = 0;\nif(result == 1){\n    x = arr[1];\n    y = arr[2];\n}\nvar Vision_90 = global.get(\"Vision_90\");\nVision_90.p2.x = x;\nVision_90.p2.y = y;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "470fe16a5540a4de",
        "type": "function",
        "z": "e938579b29d3cf7f",
        "name": "进料盘抓取拍照读坐标反馈",
        "func": "const str = msg.payload;\nconst arr = str.split(\",\");\nconst result = arr[0];\nvar x = 0;\nvar y = 0;\nif(result == 1){\n    x = arr[1];\n    y = arr[2];\n}\nvar Vision_90 = global.get(\"Vision_90\");\nVision_90.p1.x = x;\nVision_90.p1.y = y;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "ea784a7aa298e9b7",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "先导阀料盘定位",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#1",
        "payloadType": "str",
        "x": 620,
        "y": 500,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ]
    },
    {
        "id": "fe64b8fb197ca0e1",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "先导阀料盘定位",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#1",
        "payloadType": "str",
        "x": 620,
        "y": 540,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ]
    },
    {
        "id": "709b191b55cad137",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "先导阀料盘定位",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#1",
        "payloadType": "str",
        "x": 620,
        "y": 580,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ]
    },
    {
        "id": "958ee8a6e9fab01b",
        "type": "change",
        "z": "e938579b29d3cf7f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Vision_90.v2.request",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 280,
        "wires": [
            [
                "3a8c605f779988fe"
            ]
        ]
    },
    {
        "id": "3a8c605f779988fe",
        "type": "rbe",
        "z": "e938579b29d3cf7f",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 675,
        "y": 280,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ],
        "l": false
    },
    {
        "id": "34f67a6b55d96ec1",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 280,
        "wires": [
            [
                "80b3c83afbaee1a5"
            ]
        ]
    },
    {
        "id": "80b3c83afbaee1a5",
        "type": "trigger",
        "z": "e938579b29d3cf7f",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 290,
        "y": 280,
        "wires": [
            [
                "5c7fec376aee60ee",
                "958ee8a6e9fab01b"
            ]
        ]
    },
    {
        "id": "dc679eed5e8b3634",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "先导阀-缺漏检测",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#1",
        "payloadType": "str",
        "x": 620,
        "y": 620,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ]
    },
    {
        "id": "ea11736917aae1fa",
        "type": "inject",
        "z": "e938579b29d3cf7f",
        "name": "先导阀-缺漏检测2",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "#1",
        "payloadType": "str",
        "x": 620,
        "y": 660,
        "wires": [
            [
                "b27518de2a57a0f1"
            ]
        ]
    },
    {
        "id": "65170c2cae5b9a08",
        "type": "inject",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 160,
        "wires": [
            [
                "1f7e1367f1d6305e"
            ]
        ]
    },
    {
        "id": "1f7e1367f1d6305e",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "val",
        "op2type": "val",
        "duration": "250",
        "extend": "false",
        "overrideDelay": "false",
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 170,
        "y": 260,
        "wires": [
            [
                "42dd2d5ea4f6ee70",
                "45262990fef4f228",
                "036b163a4fe3af6e",
                "2520f3aafa73f8e3",
                "189c4ebe370cfd31",
                "62de5c9244c00408",
                "c24a22aed195e444"
            ]
        ]
    },
    {
        "id": "3dda43d271b988b3",
        "type": "rbe",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 495,
        "y": 200,
        "wires": [
            [
                "046e0bc36ff0affc"
            ]
        ],
        "l": false
    },
    {
        "id": "42dd2d5ea4f6ee70",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "调度器命令变化",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_90.AI_LCS.Action",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 200,
        "wires": [
            [
                "3dda43d271b988b3"
            ]
        ]
    },
    {
        "id": "046e0bc36ff0affc",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "property": "IO_90.AI_LCS.Action",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.LCS_start",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.LCS_stop",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.LCS_pause",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.LCS_resume",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.LCS_run",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 670,
        "y": 200,
        "wires": [
            [
                "d92662f191272585",
                "6f8a9dbdaf0545fc"
            ],
            [
                "d92662f191272585",
                "6f8a9dbdaf0545fc"
            ],
            [
                "d92662f191272585",
                "6f8a9dbdaf0545fc"
            ],
            [
                "d92662f191272585",
                "6f8a9dbdaf0545fc"
            ],
            [
                "244e9547d62d529c",
                "d92662f191272585",
                "6f8a9dbdaf0545fc"
            ]
        ]
    },
    {
        "id": "244e9547d62d529c",
        "type": "function",
        "z": "6b25f2664a9c5aec",
        "name": "要求执行生产",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 240,
        "wires": [
            [
                "e3e665bf4e51b328"
            ]
        ]
    },
    {
        "id": "e3e665bf4e51b328",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "3轴桁架做视觉定位,6轴拍料盘",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.truss3_moveToVission",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1110,
        "y": 240,
        "wires": [
            [
                "163836b16066b540"
            ]
        ]
    },
    {
        "id": "163836b16066b540",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1315,
        "y": 240,
        "wires": [
            [
                "23b0c5ee3c9cbdba"
            ]
        ],
        "l": false
    },
    {
        "id": "23b0c5ee3c9cbdba",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "3轴视觉检测",
        "property": "IO_90.AI.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.truss3_moveToVission_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1430,
        "y": 240,
        "wires": [
            [
                "fa8024fc8e6093f7"
            ]
        ]
    },
    {
        "id": "3ea5d6359c35340c",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_90.AO_6axes.index_place",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1995,
        "y": 240,
        "wires": [
            [
                "38d1e24738ce7145",
                "d2b037480bac34f0"
            ]
        ],
        "l": false
    },
    {
        "id": "34b57a971eb27428",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "依次装配先导阀",
        "property": "IO_90.AO_6axes.assembled",
        "propertyType": "global",
        "rules": [
            {
                "t": "lt",
                "v": "Material_90[0].consumption",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "Material_90[0].consumption",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1860,
        "y": 240,
        "wires": [
            [
                "3ea5d6359c35340c"
            ],
            [
                "5340dd217ff5e2d0"
            ]
        ]
    },
    {
        "id": "940a6c2c0b7763df",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_90.AO.truss_vision_x",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload2",
                "pt": "msg",
                "to": "IO_90.AO.M1",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1685,
        "y": 240,
        "wires": [
            [
                "163836b16066b540",
                "34b57a971eb27428",
                "b7a4e04b83a0429e",
                "03ab97d4b988d426"
            ]
        ],
        "l": false
    },
    {
        "id": "f00706b10bf526fd",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2545,
        "y": 240,
        "wires": [
            [
                "2fcb0f8fdf17b1f9",
                "bb3c3b2ded0b1cf7"
            ]
        ],
        "l": false
    },
    {
        "id": "d4ed3db781ec3cad",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "放置到顶螺丝",
        "property": "IO_90.AO_6axes.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.robot_pick_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2250,
        "y": 240,
        "wires": [
            [
                "ec6b6a968ca99c3a"
            ]
        ]
    },
    {
        "id": "2fcb0f8fdf17b1f9",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO_6axes.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "global",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2135,
        "y": 240,
        "wires": [
            [
                "d4ed3db781ec3cad",
                "94436ae579247365"
            ]
        ],
        "l": false
    },
    {
        "id": "d2b037480bac34f0",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO_6axes.request",
                "pt": "global",
                "to": "ns.robot_pick",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.loader_home",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2075,
        "y": 240,
        "wires": [
            [
                "2fcb0f8fdf17b1f9"
            ]
        ],
        "l": false
    },
    {
        "id": "38d1e24738ce7145",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 15",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 2055,
        "y": 200,
        "wires": [],
        "l": false
    },
    {
        "id": "dab15aa933168155",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2965,
        "y": 240,
        "wires": [
            [
                "a865974f35135f1d",
                "6d0e3d7987435914"
            ]
        ],
        "l": false
    },
    {
        "id": "c5ec21a66af8cfdf",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "2轴桁架顶螺丝",
        "property": "IO_90.AO.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.truss2_screw_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2820,
        "y": 240,
        "wires": [
            [
                "dab15aa933168155"
            ]
        ]
    },
    {
        "id": "a865974f35135f1d",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2685,
        "y": 240,
        "wires": [
            [
                "c5ec21a66af8cfdf",
                "3d61a9224301d798"
            ]
        ],
        "l": false
    },
    {
        "id": "bb3c3b2ded0b1cf7",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.truss2_screw",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2625,
        "y": 240,
        "wires": [
            [
                "a865974f35135f1d"
            ]
        ],
        "l": false
    },
    {
        "id": "785a7b36d34bc8b8",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "6轴抓先导阀视觉判定",
        "property": "IO_90.AO_6axes.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.robot_grabToVission_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3250,
        "y": 240,
        "wires": [
            [
                "207cbd6f2e1f0314"
            ]
        ]
    },
    {
        "id": "68330b29d1e4eeaf",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO_6axes.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 3095,
        "y": 240,
        "wires": [
            [
                "785a7b36d34bc8b8",
                "a6e31fc66dacc45e"
            ]
        ],
        "l": false
    },
    {
        "id": "6d0e3d7987435914",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO_6axes.request",
                "pt": "global",
                "to": "ns.robot_grabToVission",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3035,
        "y": 240,
        "wires": [
            [
                "68330b29d1e4eeaf"
            ]
        ],
        "l": false
    },
    {
        "id": "207cbd6f2e1f0314",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3405,
        "y": 240,
        "wires": [
            [
                "68330b29d1e4eeaf",
                "c5474c94c5312af2"
            ]
        ],
        "l": false
    },
    {
        "id": "669940b9dcc5f013",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "6轴抓先导阀放阀体",
        "property": "IO_90.AO_6axes.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.robot_placeToProduct_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3810,
        "y": 240,
        "wires": [
            [
                "f3b9c8af7b49503f"
            ]
        ]
    },
    {
        "id": "682871fba0abd120",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO_6axes.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 3665,
        "y": 240,
        "wires": [
            [
                "669940b9dcc5f013",
                "6ba28e032427bb53"
            ]
        ],
        "l": false
    },
    {
        "id": "45b96db1c1e6fb43",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO_6axes.request",
                "pt": "global",
                "to": "ns.robot_placeToProduct",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3605,
        "y": 240,
        "wires": [
            [
                "682871fba0abd120"
            ]
        ],
        "l": false
    },
    {
        "id": "f3b9c8af7b49503f",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3975,
        "y": 240,
        "wires": [
            [
                "682871fba0abd120",
                "e927a26c61e55100"
            ]
        ],
        "l": false
    },
    {
        "id": "ec6b6a968ca99c3a",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "待装配位",
        "property": "IO_90.AO.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.loader_home_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2410,
        "y": 240,
        "wires": [
            [
                "f00706b10bf526fd"
            ]
        ]
    },
    {
        "id": "d1d6033fb8e51b5d",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4415,
        "y": 240,
        "wires": [
            [
                "a76ff68083229bec",
                "6243867c1d20ed32"
            ]
        ],
        "l": false
    },
    {
        "id": "25e4afc83593a774",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "3轴桁架打螺丝",
        "property": "IO_90.AO.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.truss3_screw_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 4270,
        "y": 240,
        "wires": [
            [
                "d1d6033fb8e51b5d"
            ]
        ]
    },
    {
        "id": "a76ff68083229bec",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 4135,
        "y": 240,
        "wires": [
            [
                "25e4afc83593a774",
                "2079051c69c4724a"
            ]
        ],
        "l": false
    },
    {
        "id": "e927a26c61e55100",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.truss3_screw",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4075,
        "y": 240,
        "wires": [
            [
                "a76ff68083229bec"
            ]
        ],
        "l": false
    },
    {
        "id": "6243867c1d20ed32",
        "type": "function",
        "z": "6b25f2664a9c5aec",
        "name": "完成一个流程",
        "func": "var IO = global.get(\"IO_90\");\nIO.AO_6axes.M1 --;\nIO.AO_6axes.assembled ++;\nIO.AO.assembled ++;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4590,
        "y": 300,
        "wires": [
            [
                "4f9e1dd4adb757bb"
            ]
        ]
    },
    {
        "id": "4f9e1dd4adb757bb",
        "type": "function",
        "z": "6b25f2664a9c5aec",
        "name": "开始下一次装配",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1670,
        "y": 300,
        "wires": [
            [
                "34b57a971eb27428"
            ]
        ]
    },
    {
        "id": "94436ae579247365",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 17",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2185,
        "y": 200,
        "wires": [],
        "l": false
    },
    {
        "id": "3d61a9224301d798",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 2765,
        "y": 200,
        "wires": [],
        "l": false
    },
    {
        "id": "a6e31fc66dacc45e",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 19",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 3165,
        "y": 200,
        "wires": [],
        "l": false
    },
    {
        "id": "6ba28e032427bb53",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 20",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 3735,
        "y": 280,
        "wires": [],
        "l": false
    },
    {
        "id": "2079051c69c4724a",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 21",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 4205,
        "y": 280,
        "wires": [],
        "l": false
    },
    {
        "id": "fa8024fc8e6093f7",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "料盘有料",
        "property": "IO_90.AO.M1",
        "propertyType": "global",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1580,
        "y": 240,
        "wires": [
            [
                "940a6c2c0b7763df"
            ]
        ]
    },
    {
        "id": "b7a4e04b83a0429e",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 22",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1755,
        "y": 200,
        "wires": [],
        "l": false
    },
    {
        "id": "03ab97d4b988d426",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 23",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1845,
        "y": 200,
        "wires": [],
        "l": false
    },
    {
        "id": "a4ad8ddc07cad853",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "6轴抓先导阀放废料",
        "property": "IO_90.AO_6axes.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.robot_placeToTrash_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3810,
        "y": 180,
        "wires": [
            [
                "f6528f51beffae0f"
            ]
        ]
    },
    {
        "id": "1594b0b34ba742f9",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO_6axes.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 3665,
        "y": 180,
        "wires": [
            [
                "a4ad8ddc07cad853",
                "97047b82d3075752"
            ]
        ],
        "l": false
    },
    {
        "id": "9c0b890c505927d5",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO_6axes.request",
                "pt": "global",
                "to": "ns.robot_placeToTrash",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3605,
        "y": 180,
        "wires": [
            [
                "1594b0b34ba742f9"
            ]
        ],
        "l": false
    },
    {
        "id": "f6528f51beffae0f",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3975,
        "y": 180,
        "wires": [
            [
                "1594b0b34ba742f9",
                "893ee25836f4e34a"
            ]
        ],
        "l": false
    },
    {
        "id": "97047b82d3075752",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 24",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 3735,
        "y": 140,
        "wires": [],
        "l": false
    },
    {
        "id": "c5474c94c5312af2",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "视觉结果",
        "property": "Vision_90.echeck_screw.result",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.vission_fail",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.vission_success",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3500,
        "y": 200,
        "wires": [
            [
                "45b96db1c1e6fb43"
            ],
            [
                "9c0b890c505927d5"
            ]
        ]
    },
    {
        "id": "893ee25836f4e34a",
        "type": "function",
        "z": "6b25f2664a9c5aec",
        "name": "直接结束到下一个流程",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4320,
        "y": 180,
        "wires": [
            [
                "6243867c1d20ed32"
            ]
        ]
    },
    {
        "id": "d9371762dde341c3",
        "type": "comment",
        "z": "6b25f2664a9c5aec",
        "name": "主流程",
        "info": "",
        "x": 830,
        "y": 280,
        "wires": []
    },
    {
        "id": "45262990fef4f228",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "当前料盘用料数变化",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_90.AO.M1",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 620,
        "wires": [
            [
                "fc87df724f9b6fb9"
            ]
        ]
    },
    {
        "id": "fc87df724f9b6fb9",
        "type": "rbe",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 535,
        "y": 620,
        "wires": [
            [
                "0182ef8497a1a06f"
            ]
        ],
        "l": false
    },
    {
        "id": "0182ef8497a1a06f",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "当前料盘先导阀用尽",
        "property": "IO_90.AO.M1",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 620,
        "wires": [
            [
                "4eed290d96ed9c23"
            ]
        ]
    },
    {
        "id": "4eed290d96ed9c23",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "空盘层数小于6",
        "property": "IO_90.AO.tray_out_count",
        "propertyType": "global",
        "rules": [
            {
                "t": "lt",
                "v": "6",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 940,
        "y": 620,
        "wires": [
            [
                "5026b6bc07dfb032"
            ]
        ]
    },
    {
        "id": "d24aa1ec214cb939",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1365,
        "y": 620,
        "wires": [
            [
                "69818a363a1ad565",
                "1180d1bc7a5d323d"
            ]
        ],
        "l": false
    },
    {
        "id": "e6317f730c5f6f82",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "完成换料盘",
        "property": "IO_90.AO.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.panel_shift_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1260,
        "y": 620,
        "wires": [
            [
                "d24aa1ec214cb939",
                "4476b9b508028231"
            ]
        ]
    },
    {
        "id": "69818a363a1ad565",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1135,
        "y": 620,
        "wires": [
            [
                "e6317f730c5f6f82",
                "56ece51683f4b5ce"
            ]
        ],
        "l": false
    },
    {
        "id": "5026b6bc07dfb032",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.panel_shift",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1075,
        "y": 620,
        "wires": [
            [
                "69818a363a1ad565"
            ]
        ],
        "l": false
    },
    {
        "id": "56ece51683f4b5ce",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 25",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1215,
        "y": 580,
        "wires": [],
        "l": false
    },
    {
        "id": "9b29bd91ee521eca",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "6轴对料盘定位",
        "property": "IO_90.AO_6axes.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.robot_moveToVission_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1640,
        "y": 620,
        "wires": [
            [
                "03d653f98c28f712"
            ]
        ]
    },
    {
        "id": "6ff119c0583a975f",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO_6axes.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1505,
        "y": 620,
        "wires": [
            [
                "9b29bd91ee521eca",
                "b843458fb4ff4af1"
            ]
        ],
        "l": false
    },
    {
        "id": "1180d1bc7a5d323d",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO_6axes.request",
                "pt": "global",
                "to": "ns.robot_moveToVission",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1445,
        "y": 620,
        "wires": [
            [
                "6ff119c0583a975f"
            ]
        ],
        "l": false
    },
    {
        "id": "03d653f98c28f712",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Vision_90.materials.result",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1815,
        "y": 620,
        "wires": [
            [
                "6ff119c0583a975f",
                "a521edbf407130c3",
                "6a579d1a4ebf1595"
            ]
        ],
        "l": false
    },
    {
        "id": "b843458fb4ff4af1",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 26",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1575,
        "y": 580,
        "wires": [],
        "l": false
    },
    {
        "id": "a521edbf407130c3",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 27",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1925,
        "y": 580,
        "wires": [],
        "l": false
    },
    {
        "id": "4476b9b508028231",
        "type": "function",
        "z": "6b25f2664a9c5aec",
        "name": "料盘数量变化",
        "func": "var IO = global.get(\"IO_90\");\nIO.AO.tray_in_count --;\nIO.AO.tray_out_count++;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "5340dd217ff5e2d0",
        "type": "function",
        "z": "6b25f2664a9c5aec",
        "name": "生产完成",
        "func": "var StationTask_90 = global.get(\"StationTask_90\");\nvar obj = StationTask_90.ProcessDetail[0].MaterialDetails[0];\nobj.Num -= obj.consumption;\n\nvar obj2 = StationTask_90.ProcessDetail[0].MaterialDetails[1];\nobj2.Num -= obj2.consumption;\n\nvar obj3 = StationTask_90.ProcessDetail[0].MaterialDetails[2];\nobj3.Num -= obj3.consumption;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2040,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "26a37ed447d02b85",
        "type": "modbus-flex-getter",
        "z": "6b25f2664a9c5aec",
        "name": "虚拟modbus",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "logIOActivities": false,
        "server": "8b08ccb1dadce45a",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 570,
        "y": 380,
        "wires": [
            [
                "9efdb1128671a89d",
                "565266f43c98ada7"
            ],
            []
        ]
    },
    {
        "id": "036b163a4fe3af6e",
        "type": "function",
        "z": "6b25f2664a9c5aec",
        "name": "调度器下发AGV调度",
        "func": "msg.payload = {  'fc': 3, 'unitid': 1, 'address': 4093 , 'quantity': 2 } ;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 380,
        "wires": [
            [
                "26a37ed447d02b85"
            ]
        ]
    },
    {
        "id": "9efdb1128671a89d",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "property": "payload[0]",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 380,
        "wires": [
            [
                "3933854362f279b3"
            ],
            [
                "a96910fca49fc134"
            ]
        ]
    },
    {
        "id": "3933854362f279b3",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.panel_in_in",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 855,
        "y": 340,
        "wires": [
            [
                "9457d77b17f6021c"
            ]
        ],
        "l": false
    },
    {
        "id": "a96910fca49fc134",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.panel_in_out",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 855,
        "y": 440,
        "wires": [
            [
                "b9d98043de88e476"
            ]
        ],
        "l": false
    },
    {
        "id": "565266f43c98ada7",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "property": "payload[1]",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 520,
        "wires": [
            [
                "372397daba768d77"
            ]
        ]
    },
    {
        "id": "372397daba768d77",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.panel_out_out",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 855,
        "y": 520,
        "wires": [
            [
                "ecd85c8c91a84157"
            ]
        ],
        "l": false
    },
    {
        "id": "b9e3b4281a104e2b",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "进口盘-进",
        "property": "IO_90.AO.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.panel_in_in_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1060,
        "y": 340,
        "wires": [
            [
                "347fa8c9487ee25a"
            ]
        ]
    },
    {
        "id": "9457d77b17f6021c",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 945,
        "y": 340,
        "wires": [
            [
                "b9e3b4281a104e2b",
                "cb8177e1cd98e91f"
            ]
        ],
        "l": false
    },
    {
        "id": "347fa8c9487ee25a",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1185,
        "y": 340,
        "wires": [
            [
                "9457d77b17f6021c",
                "ce1df37bfb0bcd16"
            ]
        ],
        "l": false
    },
    {
        "id": "cb8177e1cd98e91f",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 28",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1015,
        "y": 300,
        "wires": [],
        "l": false
    },
    {
        "id": "1babca274db92f3c",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "进口盘-出",
        "property": "IO_90.AO.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.panel_in_out_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1060,
        "y": 440,
        "wires": [
            [
                "bc9b4faf4d3d94b7"
            ]
        ]
    },
    {
        "id": "b9d98043de88e476",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 945,
        "y": 440,
        "wires": [
            [
                "1babca274db92f3c",
                "fb211c13ddd9062f"
            ]
        ],
        "l": false
    },
    {
        "id": "bc9b4faf4d3d94b7",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1185,
        "y": 440,
        "wires": [
            [
                "b9d98043de88e476",
                "ce1df37bfb0bcd16"
            ]
        ],
        "l": false
    },
    {
        "id": "fb211c13ddd9062f",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 29",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1015,
        "y": 400,
        "wires": [],
        "l": false
    },
    {
        "id": "8bb2fa15a2288b58",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "出口盘-出",
        "property": "IO_90.AO.response",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.panel_out_out_done",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1060,
        "y": 520,
        "wires": [
            [
                "1848cb3d465e0485"
            ]
        ]
    },
    {
        "id": "ecd85c8c91a84157",
        "type": "trigger",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "op1": "IO_90.AO.response",
        "op2": "0",
        "op1type": "global",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 945,
        "y": 520,
        "wires": [
            [
                "8bb2fa15a2288b58",
                "4279befa1d1df672"
            ]
        ],
        "l": false
    },
    {
        "id": "1848cb3d465e0485",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1185,
        "y": 520,
        "wires": [
            [
                "ecd85c8c91a84157",
                "ce1df37bfb0bcd16"
            ]
        ],
        "l": false
    },
    {
        "id": "4279befa1d1df672",
        "type": "debug",
        "z": "6b25f2664a9c5aec",
        "name": "debug 30",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1015,
        "y": 480,
        "wires": [],
        "l": false
    },
    {
        "id": "ce1df37bfb0bcd16",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1345,
        "y": 440,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "2520f3aafa73f8e3",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "AGV出口盘层数到6",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_90.AO.tray_out_count",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 780,
        "wires": [
            [
                "d869d9bac1feb958"
            ]
        ]
    },
    {
        "id": "189c4ebe370cfd31",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "AGV进口盘层数到9",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_90.AO.tray_in_count",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 840,
        "wires": [
            [
                "523cc8682cc3f2b9"
            ]
        ]
    },
    {
        "id": "d869d9bac1feb958",
        "type": "rbe",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 515,
        "y": 780,
        "wires": [
            [
                "4be16ba875e57abc"
            ]
        ],
        "l": false
    },
    {
        "id": "523cc8682cc3f2b9",
        "type": "rbe",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 515,
        "y": 840,
        "wires": [
            [
                "02113662514eec00"
            ]
        ],
        "l": false
    },
    {
        "id": "4be16ba875e57abc",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "property": "IO_90.AO.tray_out_count",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "6",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 595,
        "y": 780,
        "wires": [
            [
                "b7b592be5745bc29"
            ]
        ],
        "l": false
    },
    {
        "id": "02113662514eec00",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "property": "IO_90.AO.tray_in_count",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 595,
        "y": 840,
        "wires": [
            [
                "0768714def03ade4"
            ]
        ],
        "l": false
    },
    {
        "id": "b7b592be5745bc29",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.panel_out_out",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 665,
        "y": 780,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "0768714def03ade4",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "ns.panel_in_in",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 665,
        "y": 840,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "62de5c9244c00408",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "6轴对视觉请求",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_90.AI_6axes.request_vission",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1020,
        "wires": [
            [
                "71386b2d4706b8a9"
            ]
        ]
    },
    {
        "id": "71386b2d4706b8a9",
        "type": "rbe",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 515,
        "y": 1020,
        "wires": [
            [
                "57e098a0e27aa0c7"
            ]
        ],
        "l": false
    },
    {
        "id": "57e098a0e27aa0c7",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "property": "IO_90.AI_6axes.request_vission",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.tray_corner_1",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.tray_corner_2",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.tray_corner_3",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.tray_corner_4",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.material_check_1",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.material_check_2",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "ns.screw_check",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 7,
        "x": 595,
        "y": 1020,
        "wires": [
            [
                "d3dfd15138a97c3d"
            ],
            [
                "a55c371432a85d8e"
            ],
            [
                "ce9fcdc3cc87cb09"
            ],
            [
                "08a0a0953caa2d84"
            ],
            [
                "710e089568442e26"
            ],
            [
                "ec773d5162ad2d40"
            ],
            [
                "91711d5e296a30aa"
            ]
        ],
        "l": false
    },
    {
        "id": "d3dfd15138a97c3d",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Vision_90.v2.request",
                "pt": "global",
                "to": "#11,11,11",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 775,
        "y": 900,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "c24a22aed195e444",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "桁架对视觉请求",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_90.AI.request_vission",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1200,
        "wires": [
            [
                "19db402874fa0435"
            ]
        ]
    },
    {
        "id": "19db402874fa0435",
        "type": "rbe",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 515,
        "y": 1200,
        "wires": [
            [
                "c14edb65c9168f37"
            ]
        ],
        "l": false
    },
    {
        "id": "c14edb65c9168f37",
        "type": "switch",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "property": "IO_90.AI.request_vission",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "ns.screw_product",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 595,
        "y": 1200,
        "wires": [
            [
                "8799fb2892c97ff7"
            ]
        ],
        "l": false
    },
    {
        "id": "a55c371432a85d8e",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Vision_90.v2.request",
                "pt": "global",
                "to": "#11,11,11",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 775,
        "y": 940,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "ce9fcdc3cc87cb09",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Vision_90.v2.request",
                "pt": "global",
                "to": "#11,11,11",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 775,
        "y": 980,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "08a0a0953caa2d84",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Vision_90.v2.request",
                "pt": "global",
                "to": "#11,11,11",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 775,
        "y": 1020,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "710e089568442e26",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Vision_90.v2.request",
                "pt": "global",
                "to": "#11,11,11",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 775,
        "y": 1060,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "ec773d5162ad2d40",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Vision_90.v2.request",
                "pt": "global",
                "to": "#11,11,11",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 775,
        "y": 1100,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "91711d5e296a30aa",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Vision_90.v2.request",
                "pt": "global",
                "to": "#11,11,11",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 775,
        "y": 1140,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "8799fb2892c97ff7",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Vision_90.v1.request",
                "pt": "global",
                "to": "#11,11,11",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 775,
        "y": 1200,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "d92662f191272585",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.LCS",
                "pt": "global",
                "to": "IO_90.AI_LCS.request",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 875,
        "y": 140,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "6f8a9dbdaf0545fc",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO_6axes.LCS",
                "pt": "global",
                "to": "IO_90.AI_LCS.request",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 875,
        "y": 200,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "c21c6feb68b26df4",
        "type": "comment",
        "z": "6b25f2664a9c5aec",
        "name": "先导阀料盘切换",
        "info": "",
        "x": 720,
        "y": 660,
        "wires": []
    },
    {
        "id": "6a579d1a4ebf1595",
        "type": "change",
        "z": "6b25f2664a9c5aec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.request",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1995,
        "y": 620,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "3bcf26799f73d963",
        "type": "modbus-server",
        "z": "3b5216fa86e84cf0",
        "name": "",
        "logEnabled": false,
        "hostname": "0.0.0.0",
        "serverPort": "10090",
        "responseDelay": 100,
        "delayUnit": "ms",
        "coilsBufferSize": 10000,
        "holdingBufferSize": 10000,
        "inputBufferSize": 10000,
        "discreteBufferSize": 10000,
        "showErrors": true,
        "x": 140,
        "y": 620,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "e5c13ce7b96e711b",
        "type": "modbus-read",
        "z": "3b5216fa86e84cf0",
        "name": "读取6轴modbus-do控制",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "Coil",
        "adr": "100",
        "quantity": "10",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "967785e4049706c4",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 160,
        "y": 80,
        "wires": [
            [
                "abfcdf9120383db9"
            ],
            []
        ]
    },
    {
        "id": "57a41c47a33fd710",
        "type": "modbus-read",
        "z": "3b5216fa86e84cf0",
        "name": "读取控制器modbus-di控制",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "Input",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "9644a7088aaca35d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 180,
        "wires": [
            [
                "1ab3bd61098c4a2a",
                "c337be33ef47db16",
                "0a971699a2633268"
            ],
            []
        ]
    },
    {
        "id": "1ab3bd61098c4a2a",
        "type": "modbus-write",
        "z": "3b5216fa86e84cf0",
        "name": "DI信号同步到6轴",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "0",
        "quantity": "100",
        "server": "9644a7088aaca35d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 470,
        "y": 180,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "abfcdf9120383db9",
        "type": "modbus-write",
        "z": "3b5216fa86e84cf0",
        "name": "DO信号同步到控制器",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "0",
        "quantity": "10",
        "server": "9644a7088aaca35d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 480,
        "y": 80,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "8eb01bf9acb7562a",
        "type": "modbus-read",
        "z": "3b5216fa86e84cf0",
        "name": "读取控制器modbus-ao-逻辑变量",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "9644a7088aaca35d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 190,
        "y": 300,
        "wires": [
            [
                "3d78fd4e5044cab1"
            ],
            []
        ]
    },
    {
        "id": "c337be33ef47db16",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "写入到本地内存",
        "func": "var DI_Names = [\n    \"DI_JiTing\",\n    \"DI_QiDong\",\n    \"DI_TingZhi\",\n    \"DI_ZiDong\",\n    \"DI_ShouDong\",\n    \"DI_L_GunTong_DaoWei\",\n    \"DI_R_GunTong_DaoWei\",\n    \"-\",\n    \"DI_L_ShenJiang_DaoWei\",\n    \"DI_R_ShenJiang_DaoWei\",\n    \"DI_ZhuaPan1_DaKaiDaoWei\",\n    \"DI_ZhuaPan2_GuanBiWei\",\n    \"DI_ZhuaPan1_DaKaiDaoWei\",\n    \"DI_ZhuaPan2_GuanBiWei\",\n    \"DI_HengYi_YouLiao\",\n    \"-\",\n    \"DI_NingJin_ShenDaoWei1\",\n    \"DI_NingJin_SuoDaoWei\",\n    \"DI_HengYi_SongKaiDaoWei\",\n    \"DI_HengYi_JiaJinDaoWei\",\n    \"DI_M5_FenLi1_DaKaiDaoWei\",\n    \"DI_M5_FenLi1_GuanBiDaoWei\",\n    \"DI_M6_FenLi_DaKaiDaoWei\",\n    \"DI_M6_FenLi_GuanBiDaoWei\",\n    \"DI_HengYi_ShangShenDaoWei\",\n    \"DI_HengYi_XiaJiangDaoWei\",\n    \"DI_M5_SongLiao_GuanBiDaoWei\",\n    \"DI_M5_SongLiao_DaKaiDaoWei\",\n    \"-\",\n    \"-\",\n    \"DI_NingJin_ShenDaoWei2\",\n    \"-\",\n    \"DI_DingWei_GuanBiDaoWei1\",\n    \"DI_DingWei_DaKaiDaoWei1\",\n    \"DI_DingWei_GuanBiDaoWei2\",\n    \"DI_DingWei_DaKaiDaoWei2\",\n    \"DI_M6_FenLiao_DaKaiDaoWei\",\n    \"DI_M6_FenLiao_GuanBiDaoWei\",\n    \"DI_ROB_JiaJinDaoWei2\",\n    \"-\",\n    \"DI_DingWei_GuanBiDaoWei3\",\n    \"DI_DingWei_DaKaiDaoWei3\",\n    \"DI_M5_FenLi2_DaKaiDaoWei\",\n    \"DI_M5_FenLi2_GuanBiDaoWei\",\n    \"DI_M5_ZDP_YouLiao\",\n    \"DI_M6_ZDP_DaoKaiDaoWei1\",\n    \"DI_M6_ZDP_GuanBiDaoWei1\",\n    \"DI_M6_ZDP_DaoKaiDaoWei2\",\n    \"DI_M6_ZDP_YouLiao\",\n    \"DI_ROB_DaKaiDaoWei1\",\n    \"DI_ROB_JiaJinDaoWei1\",\n    \"DI_ZDP_ZhengFanJianCe\",\n    \"DI_FuWei\",\n    \"DI_LianJi\",\n    \"DI_DanBuQianJin\",\n    \"DI_DanBuHouTui\",\n    ];\n\nvar IO_90 = global.get(\"IO_90\");\nconst data = msg.payload;\nfor(var i=0;i<DI_Names.length;i++){\n    if(DI_Names[i]!='-'){\n        IO_90.DI[DI_Names[i]] = data[i];\n    }\n}\nglobal.set(\"IO_90\",IO_90);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "3d78fd4e5044cab1",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "写入到本地内存",
        "func": "const data = msg.payload;\nvar IO = global.get(\"IO_90\");\nvar i = 0;\nIO.AI.action = data[i]; i++;\nIO.AI.error = data[i]; i++;\nIO.AI.status = data[i]; i++;\nIO.AI.screw_reset = data[i]; i++;\nIO.AI.screw_run = data[i]; i++;\nIO.AI.screw_clockwise = data[i]; i++;\nIO.AI.screw_pause = data[i]; i++;\nIO.AI.screw_mode = data[i]; i++;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "83fa0339e5960b43",
        "type": "inject",
        "z": "3b5216fa86e84cf0",
        "name": "OP90数据初始化",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 40,
        "wires": [
            [
                "fb8a9610e83c1ed9"
            ]
        ]
    },
    {
        "id": "7935456f1150e60e",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "IO初始化",
        "func": "var IO_90 = {\n    DO:{},\n    DI:{\n        DI_JiTing:0,\n        DI_QiDong:0,\n        DI_TingZhi:0,\n        DI_ZiDong:0,\n        DI_ShouDong:0,\n        DI_L_GunTong_DaoWei:0,\n        DI_R_GunTong_DaoWei:0,\n        \n        DI_L_ShenJiang_DaoWei:0,\n        DI_R_ShenJiang_DaoWei:0,\n        DI_ZhuaPan1_DaKaiDaoWei:0,\n        DI_ZhuaPan2_GuanBiWei:0,\n        DI_HengYi_YouLiao:0,\n        \n        DI_NingJin_ShenDaoWei1:0,\n        DI_NingJin_SuoDaoWei:0,\n        DI_HengYi_SongKaiDaoWei:0,\n        DI_HengYi_JiaJinDaoWei:0,\n        DI_M5_FenLi1_DaKaiDaoWei:0,\n        DI_M5_FenLi1_GuanBiDaoWei:0,\n        DI_M6_FenLi_DaKaiDaoWei:0,\n        DI_M6_FenLi_GuanBiDaoWei:0,\n        DI_HengYi_ShangShenDaoWei:0,\n        DI_HengYi_XiaJiangDaoWei:0,\n        DI_M5_SongLiao_GuanBiDaoWei:0,\n        DI_M5_SongLiao_DaKaiDaoWei:0,\n        \n        DI_NingJin_ShenDaoWei2:0,\n        \n        DI_DingWei_GuanBiDaoWei1:0,\n        DI_DingWei_DaKaiDaoWei1:0,\n        DI_DingWei_GuanBiDaoWei2:0,\n        DI_DingWei_DaKaiDaoWei2:0,\n        DI_M6_FenLiao_DaKaiDaoWei:0,\n        DI_M6_FenLiao_GuanBiDaoWei:0,\n        DI_ROB_JiaJinDaoWei2:0,\n        \n        DI_DingWei_GuanBiDaoWei3:0,\n        DI_DingWei_DaKaiDaoWei3:0,\n        DI_M5_FenLi2_DaKaiDaoWei:0,\n        DI_M5_FenLi2_GuanBiDaoWei:0,\n        DI_M5_ZDP_YouLiao:0,\n        DI_M6_ZDP_DaoKaiDaoWei1:0,\n        DI_M6_ZDP_GuanBiDaoWei1:0,\n        DI_M6_ZDP_DaoKaiDaoWei2:0,\n        DI_M6_ZDP_YouLiao:0,\n        DI_ROB_DaKaiDaoWei1:0,\n        DI_ROB_JiaJinDaoWei1:0,\n        DI_ZDP_ZhengFanJianCe:0,\n        DI_FuWei:0,\n        DI_LianJi:0,\n        DI_DanBuQianJin:0,\n        DI_DanBuHouTui:0,\n    },\n    AI:{//node-red收到来自控制器的逻辑变量\n        response: 0,//控制器端动作端的完成信号\n        error: 0,//控制器端的故障码\n        status: 0,//控制器端的状态\n        screw_reset : 0,\n        screw_run : 0,\n        screw_clockwise : 0,\n        screw_pause : 0,     \n        screw_mode : 0, \n        request_vision: 0,\n    },\n    AO:{//node-red要发送下去的逻辑变量\n        request: 0,//下发给控制器的动作号\n        tray_in_count: 6,//AGV进口区的托盘号\n        tray_out_count: 6,//AGV出口区的托盘号y\n        tray_count: 30,//当前料盘上的先导阀数量\n        truss_vision_x: 90,//3轴桁架拍照纠偏的X坐标\n        assembled: 0,\n        screw_status: 0,\n        material_status: 0,\n        work_object: 0, //产品类型\n        response_vision: 0,\n        LCS: 0,\n    },    \n    AI_6axes:{\n        response: 0,//6轴机械臂端动作的完成信号\n        error: 0,//6轴机械臂的故障码\n        status: 0,//6轴机械臂状态\n        request_vission:0,\n    },\n\n    AO_6axes:{\n        Vision_X_1: 90,//料盘拍照纠偏得y到的X坐标\n        Vision_Y_1: 90,//料盘拍照纠偏得到的y坐标\n        Vision_QueXian: 0,\n        request:0,\n        M1 : 0,\n        assembled: 0,\n        response_vission: 0,\n        LCS: 0,\n    },\n    AI_LCS:{\n        request: 0,\n    },\n    AO_LCS:{\n        response: 0,\n    },\n    AI_AGV:{\n        request: 0,\n    },\n    AO_AGV:{\n        response: 0,\n    },    \n    AI_screw:{\n        status: 0,\n        error: 0,\n        torque: 0,\n    },\n    AO_screw:{\n        reset : 0,\n        run : 0,\n        clockwise : 0,\n        pause : 0,     \n        mode : 0, \n    }       \n};\n\nglobal.set(\"IO_90\",IO_90);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 40,
        "wires": [
            [
                "52e5c80254d5ee2a"
            ]
        ]
    },
    {
        "id": "2b60c027eb43fa05",
        "type": "modbus-read",
        "z": "3b5216fa86e84cf0",
        "name": "6轴机械臂modbus-ao-逻辑变量",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "967785e4049706c4",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 190,
        "y": 360,
        "wires": [
            [
                "24de9f2ffc261c53"
            ],
            []
        ]
    },
    {
        "id": "24de9f2ffc261c53",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "写入到本地内存",
        "func": "const data = msg.payload;\nvar IO = global.get(\"IO_90\");\nvar i = 0;\nIO.AI_6axes.response = data[i]; i++;\nIO.AI_6axes.error = data[i]; i++;\nIO.AI_6axes.status = data[i]; i++;\nIO.AI_6axes.request_vission = data[i]; i++;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "0a971699a2633268",
        "type": "modbus-write",
        "z": "3b5216fa86e84cf0",
        "name": "DI信号同步到虚拟modbus",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "0",
        "quantity": "100",
        "server": "8b08ccb1dadce45a",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 490,
        "y": 240,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "cd6a596d07980434",
        "type": "inject",
        "z": "3b5216fa86e84cf0",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 480,
        "wires": [
            [
                "116583a8a44a97b1"
            ]
        ]
    },
    {
        "id": "116583a8a44a97b1",
        "type": "trigger",
        "z": "3b5216fa86e84cf0",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "val",
        "op2type": "val",
        "duration": "250",
        "extend": "false",
        "overrideDelay": "false",
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 290,
        "y": 480,
        "wires": [
            [
                "2dc73bd065955c8d",
                "75cf6f4d68188369",
                "33daa1b70b329a4d",
                "3f333be6e9d1af15"
            ]
        ]
    },
    {
        "id": "398ca89e7aedb8db",
        "type": "modbus-write",
        "z": "3b5216fa86e84cf0",
        "name": "写入到泛在控制器",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "100",
        "server": "9644a7088aaca35d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 730,
        "y": 480,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "2dc73bd065955c8d",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "写入到泛在控制器",
        "func": "var data = [];\nvar IO = global.get(\"IO_90\");\ndata.push(IO.AO.controller_action);\ndata.push(IO.AO.M1);\ndata.push(IO.AO.material_status);\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 480,
        "wires": [
            [
                "398ca89e7aedb8db"
            ]
        ]
    },
    {
        "id": "2a3a5be77c6b5d35",
        "type": "modbus-write",
        "z": "3b5216fa86e84cf0",
        "name": "写入到6轴",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "100",
        "server": "967785e4049706c4",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 710,
        "y": 540,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "75cf6f4d68188369",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "写入到6轴机械臂",
        "func": "var data = [];\nvar IO = global.get(\"IO_90\");\ndata.push(IO.AO2.controller_6axes);\ndata.push(IO.AO2.tray_vision_x);\ndata.push(IO.AO2.tray_vision_y);\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 540,
        "wires": [
            [
                "2a3a5be77c6b5d35"
            ]
        ]
    },
    {
        "id": "f51777edb24f4a29",
        "type": "modbus-read",
        "z": "3b5216fa86e84cf0",
        "name": "LCS 调度命令读取",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "4090",
        "quantity": "7",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "8b08ccb1dadce45a",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 150,
        "y": 420,
        "wires": [
            [
                "d60024e9414279eb"
            ],
            []
        ]
    },
    {
        "id": "d60024e9414279eb",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "写入到本地内存",
        "func": "\nconst data = msg.payload;\nvar IO = global.get(\"IO_90\");\nvar i = 0;\nIO.AI_LCS.request = data[i]; i++;\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "33daa1b70b329a4d",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "发送给LCS呼叫AGV",
        "func": "var data = [];\nvar IO = global.get(\"IO_90\");\ndata.push(IO.AO_LCS.Pos_In);\ndata.push(IO.AO_LCS.Pos_Out);\n\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 600,
        "wires": [
            [
                "39a996cf72ad3212"
            ]
        ]
    },
    {
        "id": "39a996cf72ad3212",
        "type": "modbus-write",
        "z": "3b5216fa86e84cf0",
        "name": "写入到虚拟modbus",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "100",
        "server": "8b08ccb1dadce45a",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 730,
        "y": 600,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "52e5c80254d5ee2a",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "物料-视觉-工单 初始化",
        "func": "\nvar Vision_90 = {\n    session_6axes: \"\",\n    sessin: \"\",\n    v1:{//阀体上料后拍照\n        request: \"\",\n        response: \"\",\n        x:0,\n        result: 0,\n    },\n    v2: {//第一层料盘上的物料,总计20个坐标,由视觉计算反馈\n        request: \"\",\n        response: \"\",\n        positions: [ [0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0] ],\n        result: 0,\n        step: 0,\n    },\n};\nvar ErrorMap_90 = [\n    \"视觉通信故障\",\n    \"螺丝刀通信故障\",\n    \"伺服1故障\",\n    \"伺服2故障\",\n    \"伺服3故障\",\n    \"伺服4故障\",   \n    \"伺服5故障\",\n    \"伺服6故障\",\n    \"伺服7故障\",\n    ];\n    \nglobal.set(\"StationTask_90\",{\n    BillCode: \"-\",\n    ProductCode: \"-\",\n    ProductName:\"-\",\n    ProcessDetail: [{\n        ProcessCode: \"OP90\",\n        ProcessName: \"-\",\n        EquipmentCode: \"OP90\",\n        ProgramNumer: 1,\n        Num: 0,\n        MaterialDetails: [\n            {\n                MaterialCode: \"M5x20\",\n                MaterialName: \"M5x20内六角螺丝\",\n                Num: 0,\n                consumption: 15,\n                remain: 0,\n                used: 0,\n            },\n            {\n                MaterialCode: \"M6x85\",\n                MaterialName: \"M6x85内六角螺丝\",\n                Num: 0,\n                consumption: 15,\n                remain: 0,\n                used: 0,\n            },\n            {\n                MaterialCode: \"XDF\",\n                MaterialName: \"先导阀\",\n                Num: 0,\n                consumption: 15,\n                remain: 0,\n                used: 0,\n            },\n      \n        ]\n    }]\n});\n\nglobal.set(\"Vision_90\",Vision_90);\nglobal.set(\"ErrorMap_90\", ErrorMap_90);\nvar t = (new Date()).toISOString();\nglobal.set(\"StartTime_90\", t);\nglobal.set(\"EndTime_90\", t);\nglobal.set(\"RequestID_90\", \"-\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "fb8a9610e83c1ed9",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "定义变量名",
        "func": "global.set(\"ns\",{\n    truss3_vission:1,\n    panel_in_in:2,\n    panel_out_out:3,\n    panel_in_out:4,\n    truss2_screw:5,\n    truss3_screw:6,\n    all_home:7,\n    panel_shift:8,\n    truss2_release:9,\n    loader_home:10,\n        \n    truss3_vission_done:101,\n    panel_in_in_done:102,\n    panel_out_out_done:103,\n    panel_in_out_done:104,\n    truss2_screw_done:105,\n    truss3_screw_done:106,\n    all_home_done:107,\n    panel_shift_done:108,\n    truss2_release_done:109,\n    loader_home_done:110,  \n    \n    robot_moveToVission: 1,\n    robot_pick:2,\n    robot_grabToVission: 3,\n    robot_placeToTrash: 4,\n    robot_placeToProduct: 5,\n    robot_home: 6,\n    \n    robot_moveToVission_done:101,\n    robot_pick_done:102,\n    robot_grabToVission_done:103,\n    robot_placeToProduct_done:104,\n    robot_placeToTrash_done:105,\n    robot_home_done:106,\n    \n    LCS_start:1,\n    LCS_stop:2,\n    LCS_pause:3,\n    LCS_resume:4,\n    LCS_run:5,\n    \n    \n    vission_success: 1,\n    vission_fail: 2,\n    \n    tray_corner_1:101,\n    tray_corner_2:102,\n    tray_corner_3:103,\n    tray_corner_4:104,\n    material_check_1:201,\n    material_check_2:202,\n    screw_check:301,\n    \n    screw_product: 401,\n    \n    \n});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 40,
        "wires": [
            [
                "7935456f1150e60e"
            ]
        ]
    },
    {
        "id": "3f333be6e9d1af15",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "螺丝刀数据",
        "func": "\nvar IO = global.get(\"IO_90\");\nIO.AO_screw.reset = IO.AI.screw_reset;\nIO.AO_screw.run = IO.AI.screw_run;\nIO.AO_screw.clockwise = IO.AI.screw_clockwise;\nIO.AO_screw.pause = IO.AI.screw_pause;\nIO.AO_screw.mode = IO.AI.screw_mode;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "25c8ab4eb8155ac7",
        "type": "http in",
        "z": "3b5216fa86e84cf0",
        "name": "",
        "url": "/data",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 760,
        "wires": [
            [
                "0b9d3b84d0538dc7"
            ]
        ]
    },
    {
        "id": "90978ca684a0d7d2",
        "type": "http response",
        "z": "3b5216fa86e84cf0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 570,
        "y": 760,
        "wires": []
    },
    {
        "id": "0b9d3b84d0538dc7",
        "type": "function",
        "z": "3b5216fa86e84cf0",
        "name": "function 28",
        "func": "const p = msg.payload.key;\nvar arr = p.split(\".\");\nconsole.debug(arr);\nconst obj = global.get(arr[0]);\neval(\"var \"+arr[0]+\" = obj;\");\nconsole.debug(1);\neval(\"msg.payload = \"+p+\";\");\nconsole.debug(2);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 760,
        "wires": [
            [
                "90978ca684a0d7d2"
            ]
        ]
    },
    {
        "id": "2a80fca02ce33f08",
        "type": "modbus-read",
        "z": "0aceb91922d497d0",
        "name": "螺丝刀-93",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "31",
        "quantity": "2",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "b73080d51bca954d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 120,
        "y": 80,
        "wires": [
            [
                "db17f68c9dd546f0",
                "c3f891af2e1b1a67"
            ],
            []
        ]
    },
    {
        "id": "db17f68c9dd546f0",
        "type": "debug",
        "z": "0aceb91922d497d0",
        "name": "调试 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 270,
        "y": 80,
        "wires": []
    },
    {
        "id": "dbcf207b20ea3687",
        "type": "modbus-write",
        "z": "0aceb91922d497d0",
        "name": "螺丝刀-控制",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "3",
        "quantity": "1",
        "server": "b73080d51bca954d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1030,
        "y": 240,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "2a8d34fca97e4058",
        "type": "inject",
        "z": "0aceb91922d497d0",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 730,
        "y": 240,
        "wires": [
            [
                "dbcf207b20ea3687"
            ]
        ]
    },
    {
        "id": "2c1198ed8c6d61f5",
        "type": "inject",
        "z": "0aceb91922d497d0",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "8",
        "payloadType": "num",
        "x": 730,
        "y": 280,
        "wires": [
            [
                "dbcf207b20ea3687"
            ]
        ]
    },
    {
        "id": "884e04237bfbda8e",
        "type": "inject",
        "z": "0aceb91922d497d0",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 730,
        "y": 320,
        "wires": [
            [
                "dbcf207b20ea3687"
            ]
        ]
    },
    {
        "id": "e8e78ece20beaef8",
        "type": "trigger",
        "z": "0aceb91922d497d0",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 390,
        "y": 180,
        "wires": [
            [
                "eb37fbc14097f749",
                "e69ca90dc3f2c992"
            ]
        ]
    },
    {
        "id": "eb37fbc14097f749",
        "type": "function",
        "z": "0aceb91922d497d0",
        "name": "控制",
        "func": "var val = 0;\nconst IO_90 = global.get(\"IO_90\");\nif(IO_90.AO_screw.run==1){\n    val += 1;\n}\nif (IO_90.AO_screw.clockwise==1){\n    val += 2;\n}\nif (IO_90.AO_screw.pause == 1) {\n    val += 4;\n}\nif (IO_90.AO_screw.reset == 1) {\n    val += 8;\n}\nmsg.payload = val;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 180,
        "wires": [
            [
                "f6e420c9a1fc7f7b"
            ]
        ]
    },
    {
        "id": "c3f891af2e1b1a67",
        "type": "change",
        "z": "0aceb91922d497d0",
        "name": "故障和状态",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AI_screw.error",
                "pt": "global",
                "to": "payload[0]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "IO_90.AI_screw.status",
                "pt": "global",
                "to": "payload[1]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "1ffddf51f01e9d58",
        "type": "modbus-read",
        "z": "0aceb91922d497d0",
        "name": "螺丝刀-93-扭力反馈",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "25",
        "quantity": "2",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "b73080d51bca954d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 510,
        "y": 80,
        "wires": [
            [
                "e4e15c5fc07fe382"
            ],
            []
        ]
    },
    {
        "id": "e4e15c5fc07fe382",
        "type": "function",
        "z": "0aceb91922d497d0",
        "name": "完成扭矩",
        "func": "var data = msg.payload[0] + msg.payload[1]*0xff;\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 80,
        "wires": [
            [
                "c2b844d098ce39d4"
            ]
        ]
    },
    {
        "id": "c2b844d098ce39d4",
        "type": "change",
        "z": "0aceb91922d497d0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AI_screw.torque",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "7ec0322db0b6da1a",
        "type": "inject",
        "z": "0aceb91922d497d0",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 180,
        "wires": [
            [
                "e8e78ece20beaef8"
            ]
        ]
    },
    {
        "id": "f9c9bf6a8355b1fa",
        "type": "inject",
        "z": "0aceb91922d497d0",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 730,
        "y": 360,
        "wires": [
            [
                "dbcf207b20ea3687"
            ]
        ]
    },
    {
        "id": "f6e420c9a1fc7f7b",
        "type": "rbe",
        "z": "0aceb91922d497d0",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 755,
        "y": 180,
        "wires": [
            [
                "dbcf207b20ea3687",
                "2142e387b8d18ca4"
            ]
        ],
        "l": false
    },
    {
        "id": "46a47cc1a6b4083c",
        "type": "modbus-write",
        "z": "0aceb91922d497d0",
        "name": "螺丝刀-模式",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "48",
        "quantity": "1",
        "server": "b73080d51bca954d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1090,
        "y": 400,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "3c27be35ade8a32a",
        "type": "inject",
        "z": "0aceb91922d497d0",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "12",
        "payloadType": "num",
        "x": 730,
        "y": 480,
        "wires": [
            [
                "46a47cc1a6b4083c"
            ]
        ]
    },
    {
        "id": "b0f68a4e7f5078ad",
        "type": "inject",
        "z": "0aceb91922d497d0",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 730,
        "y": 520,
        "wires": [
            [
                "46a47cc1a6b4083c"
            ]
        ]
    },
    {
        "id": "4b44deb1437a610c",
        "type": "rbe",
        "z": "0aceb91922d497d0",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 765,
        "y": 420,
        "wires": [
            [
                "46a47cc1a6b4083c"
            ]
        ],
        "l": false
    },
    {
        "id": "2142e387b8d18ca4",
        "type": "debug",
        "z": "0aceb91922d497d0",
        "name": "调试 21",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 140,
        "wires": []
    },
    {
        "id": "e69ca90dc3f2c992",
        "type": "function",
        "z": "0aceb91922d497d0",
        "name": "模式",
        "func": "const IO_90 = global.get(\"IO_90\");\nmsg.payload = IO_90.AO_screw.mode;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 420,
        "wires": [
            [
                "4b44deb1437a610c"
            ]
        ]
    },
    {
        "id": "2b5ad56c2341e602",
        "type": "modbus-server",
        "z": "8c57d52fe6250639",
        "name": "OP10",
        "logEnabled": false,
        "hostname": "0.0.0.0",
        "serverPort": "10010",
        "responseDelay": 100,
        "delayUnit": "ms",
        "coilsBufferSize": 10000,
        "holdingBufferSize": 10000,
        "inputBufferSize": 10000,
        "discreteBufferSize": 10000,
        "showErrors": true,
        "x": 130,
        "y": 620,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "1ed90e87ef0ab5ce",
        "type": "modbus-read",
        "z": "8c57d52fe6250639",
        "name": "读取控制器modbus-di控制-前段",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "Input",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "b491bf7158494622",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 210,
        "y": 220,
        "wires": [
            [
                "1cd97ef4953b89a0",
                "90f2a6da81217d8d"
            ],
            []
        ]
    },
    {
        "id": "1cd97ef4953b89a0",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "写入到本地内存",
        "func": "var DI_Names = [\n    \"DI_JiTing\",\n    \"DI_QiDong\",\n    \"DI_TingZhi\",\n    \"DI_ZiDong\",\n    \"DI_ShouDong\",\n    \"DI_L_GunTong_DaoWei\",\n    \"DI_R_GunTong_DaoWei\",\n    \"-\",\n    \"DI_L_ShenJiang_DaoWei\",\n    \"DI_R_ShenJiang_DaoWei\",\n    \"DI_ZhuaPan1_DaKaiDaoWei\",\n    \"DI_ZhuaPan2_GuanBiWei\",\n    \"DI_ZhuaPan1_DaKaiDaoWei\",\n    \"DI_ZhuaPan2_GuanBiWei\",\n    \"DI_HengYi_YouLiao\",\n    \"-\",\n    \"DI_NingJin_ShenDaoWei1\",\n    \"DI_NingJin_SuoDaoWei\",\n    \"DI_HengYi_SongKaiDaoWei\",\n    \"DI_HengYi_JiaJinDaoWei\",\n    \"DI_M5_FenLi1_DaKaiDaoWei\",\n    \"DI_M5_FenLi1_GuanBiDaoWei\",\n    \"DI_M6_FenLi_DaKaiDaoWei\",\n    \"DI_M6_FenLi_GuanBiDaoWei\",\n    \"DI_HengYi_ShangShenDaoWei\",\n    \"DI_HengYi_XiaJiangDaoWei\",\n    \"DI_M5_SongLiao_GuanBiDaoWei\",\n    \"DI_M5_SongLiao_DaKaiDaoWei\",\n    \"-\",\n    \"-\",\n    \"DI_NingJin_ShenDaoWei2\",\n    \"-\",\n    \"DI_DingWei_GuanBiDaoWei1\",\n    \"DI_DingWei_DaKaiDaoWei1\",\n    \"DI_DingWei_GuanBiDaoWei2\",\n    \"DI_DingWei_DaKaiDaoWei2\",\n    \"DI_M6_FenLiao_DaKaiDaoWei\",\n    \"DI_M6_FenLiao_GuanBiDaoWei\",\n    \"DI_ROB_JiaJinDaoWei2\",\n    \"-\",\n    \"DI_DingWei_GuanBiDaoWei3\",\n    \"DI_DingWei_DaKaiDaoWei3\",\n    \"DI_M5_FenLi2_DaKaiDaoWei\",\n    \"DI_M5_FenLi2_GuanBiDaoWei\",\n    \"DI_M5_ZDP_YouLiao\",\n    \"DI_M6_ZDP_DaoKaiDaoWei1\",\n    \"DI_M6_ZDP_GuanBiDaoWei1\",\n    \"DI_M6_ZDP_DaoKaiDaoWei2\",\n    \"DI_M6_ZDP_YouLiao\",\n    \"DI_ROB_DaKaiDaoWei1\",\n    \"DI_ROB_JiaJinDaoWei1\",\n    \"DI_ZDP_ZhengFanJianCe\",\n    \"DI_FuWei\",\n    \"DI_LianJi\",\n    \"DI_DanBuQianJin\",\n    \"DI_DanBuHouTui\",\n    ];\n\nvar IO_10 = global.get(\"IO_10\");\nconst data = msg.payload;\nfor(var i=0;i<DI_Names.length;i++){\n    if(DI_Names[i]!='-'){\n        IO_10.DI[DI_Names[i]] = data[i];\n    }\n}\nglobal.set(\"IO_10\",IO_10);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "6438a2b608a115ee",
        "type": "inject",
        "z": "8c57d52fe6250639",
        "name": "OP10数据初始化",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 40,
        "wires": [
            [
                "9c22b32ef6374ba0"
            ]
        ]
    },
    {
        "id": "1897a224540a3006",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "IO初始化",
        "func": "var IO_10 = {\n    DO:{},\n    DI:{\n        DI_JiTing:0,\n        DI_QiDong:0,\n        DI_TingZhi:0,\n        DI_ZiDong:0,\n        DI_ShouDong:0,\n        DI_L_GunTong_DaoWei:0,\n        DI_R_GunTong_DaoWei:0,\n        \n        DI_L_ShenJiang_DaoWei:0,\n        DI_R_ShenJiang_DaoWei:0,\n        DI_ZhuaPan1_DaKaiDaoWei:0,\n        DI_ZhuaPan2_GuanBiWei:0,\n        DI_HengYi_YouLiao:0,\n        \n        DI_NingJin_ShenDaoWei1:0,\n        DI_NingJin_SuoDaoWei:0,\n        DI_HengYi_SongKaiDaoWei:0,\n        DI_HengYi_JiaJinDaoWei:0,\n        DI_M5_FenLi1_DaKaiDaoWei:0,\n        DI_M5_FenLi1_GuanBiDaoWei:0,\n        DI_M6_FenLi_DaKaiDaoWei:0,\n        DI_M6_FenLi_GuanBiDaoWei:0,\n        DI_HengYi_ShangShenDaoWei:0,\n        DI_HengYi_XiaJiangDaoWei:0,\n        DI_M5_SongLiao_GuanBiDaoWei:0,\n        DI_M5_SongLiao_DaKaiDaoWei:0,\n        \n        DI_NingJin_ShenDaoWei2:0,\n        \n        DI_DingWei_GuanBiDaoWei1:0,\n        DI_DingWei_DaKaiDaoWei1:0,\n        DI_DingWei_GuanBiDaoWei2:0,\n        DI_DingWei_DaKaiDaoWei2:0,\n        DI_M6_FenLiao_DaKaiDaoWei:0,\n        DI_M6_FenLiao_GuanBiDaoWei:0,\n        DI_ROB_JiaJinDaoWei2:0,\n        \n        DI_DingWei_GuanBiDaoWei3:0,\n        DI_DingWei_DaKaiDaoWei3:0,\n        DI_M5_FenLi2_DaKaiDaoWei:0,\n        DI_M5_FenLi2_GuanBiDaoWei:0,\n        DI_M5_ZDP_YouLiao:0,\n        DI_M6_ZDP_DaoKaiDaoWei1:0,\n        DI_M6_ZDP_GuanBiDaoWei1:0,\n        DI_M6_ZDP_DaoKaiDaoWei2:0,\n        DI_M6_ZDP_YouLiao:0,\n        DI_ROB_DaKaiDaoWei1:0,\n        DI_ROB_JiaJinDaoWei1:0,\n        DI_ZDP_ZhengFanJianCe:0,\n        DI_FuWei:0,\n        DI_LianJi:0,\n        DI_DanBuQianJin:0,\n        DI_DanBuHouTui:0,\n    },\n    AI:{//node-red收到来自控制器的逻辑变量\n        response: 0,//控制器端动作端的完成信号\n        error: 0,//控制器端的故障码\n        status: 0,//控制器端的状态\n        screw_reset : 0,\n        screw_run : 0,\n        screw_clockwise : 0,\n        screw_pause : 0,     \n        screw_mode : 0, \n        request_vision: 0,\n    },\n    AO:{//node-red要发送下去的逻辑变量\n        request: 0,//下发给控制器的动作号\n        tray_in_count: 6,//AGV进口区的托盘号\n        tray_out_count: 6,//AGV出口区的托盘号y\n        tray_count: 30,//当前料盘上的先导阀数量\n        truss_vision_x: 90,//3轴桁架拍照纠偏的X坐标\n        assembled: 0,\n        screw_status: 0,\n        material_status: 0,\n        work_object: 0, //产品类型\n        response_vision: 0,\n        LCS: 0,\n    },    \n    AI_6axes:{\n        response: 0,//6轴机械臂端动作的完成信号\n        error: 0,//6轴机械臂的故障码\n        status: 0,//6轴机械臂状态\n        request_vission:0,\n    },\n\n    AO_6axes:{\n        Vision_X_1: 90,//料盘拍照纠偏得y到的X坐标\n        Vision_Y_1: 90,//料盘拍照纠偏得到的y坐标\n        Vision_QueXian: 0,\n        request:0,\n        M1 : 0,\n        assembled: 0,\n        response_vission: 0,\n        LCS: 0,\n    },\n    AI_LCS:{\n        request: 0,\n    },\n    AO_LCS:{\n        response: 0,\n    },\n    AI_AGV:{\n        request: 0,\n    },\n    AO_AGV:{\n        response: 0,\n    },    \n    AI_screw:{\n        status: 0,\n        error: 0,\n        torque: 0,\n    },\n    AO_screw:{\n        reset : 0,\n        run : 0,\n        clockwise : 0,\n        pause : 0,     \n        mode : 0, \n    }       \n};\n\nglobal.set(\"IO_10\",IO_10);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 40,
        "wires": [
            [
                "e0fd6c2d76fabf9f"
            ]
        ]
    },
    {
        "id": "33511cf9790c1661",
        "type": "modbus-read",
        "z": "8c57d52fe6250639",
        "name": "6轴机械臂modbus-ao-逻辑变量",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "b491bf7158494622",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "77b0106cb3348651"
            ],
            []
        ]
    },
    {
        "id": "77b0106cb3348651",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "写入到本地内存",
        "func": "const data = msg.payload;\nvar IO = global.get(\"IO_90\");\nvar i = 0;\nIO.AI_6axes.response = data[i]; i++;\nIO.AI_6axes.error = data[i]; i++;\nIO.AI_6axes.status = data[i]; i++;\nIO.AI_6axes.request_vission = data[i]; i++;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "90f2a6da81217d8d",
        "type": "modbus-write",
        "z": "8c57d52fe6250639",
        "name": "DI信号同步到虚拟modbus-10",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "0",
        "quantity": "100",
        "server": "f45c8577844ced46",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 520,
        "y": 240,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "c6d9732bbca85682",
        "type": "inject",
        "z": "8c57d52fe6250639",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 480,
        "wires": [
            [
                "9a16d87b386f27e5"
            ]
        ]
    },
    {
        "id": "9a16d87b386f27e5",
        "type": "trigger",
        "z": "8c57d52fe6250639",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "val",
        "op2type": "val",
        "duration": "250",
        "extend": "false",
        "overrideDelay": "false",
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 310,
        "y": 480,
        "wires": [
            [
                "272db971681b6aaf",
                "3c2d34047f6139bf"
            ]
        ]
    },
    {
        "id": "6cea8a9c9676e2f4",
        "type": "modbus-write",
        "z": "8c57d52fe6250639",
        "name": "写入到6轴",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "100",
        "server": "b491bf7158494622",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 730,
        "y": 540,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "272db971681b6aaf",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "写入到6轴机械臂",
        "func": "var data = [];\nvar IO = global.get(\"IO_90\");\ndata.push(IO.AO2.controller_6axes);\ndata.push(IO.AO2.tray_vision_x);\ndata.push(IO.AO2.tray_vision_y);\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 540,
        "wires": [
            [
                "6cea8a9c9676e2f4"
            ]
        ]
    },
    {
        "id": "b440bba5e4e9cb92",
        "type": "modbus-read",
        "z": "8c57d52fe6250639",
        "name": "LCS 调度命令读取",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "4090",
        "quantity": "7",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "f45c8577844ced46",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 420,
        "wires": [
            [
                "5d240a04c4c77d19"
            ],
            []
        ]
    },
    {
        "id": "5d240a04c4c77d19",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "写入到本地内存",
        "func": "\nconst data = msg.payload;\nvar IO = global.get(\"IO_90\");\nvar i = 0;\nIO.AI_LCS.request = data[i]; i++;\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "3c2d34047f6139bf",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "发送给LCS呼叫AGV",
        "func": "var data = [];\nvar IO = global.get(\"IO_90\");\ndata.push(IO.AO_LCS.Pos_In);\ndata.push(IO.AO_LCS.Pos_Out);\n\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 600,
        "wires": [
            [
                "b5be94f7376aad73"
            ]
        ]
    },
    {
        "id": "b5be94f7376aad73",
        "type": "modbus-write",
        "z": "8c57d52fe6250639",
        "name": "写入到虚拟modbus",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "100",
        "server": "f45c8577844ced46",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 750,
        "y": 600,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "e0fd6c2d76fabf9f",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "物料-视觉-工单 初始化",
        "func": "\nvar Vision_10 = {\n    session_6axes: \"\",\n    sessin: \"\",\n    v1:{//阀体上料后拍照\n        request: \"\",\n        response: \"\",\n        x:0,\n        result: 0,\n    },\n    v2: {//第一层料盘上的物料,总计20个坐标,由视觉计算反馈\n        request: \"\",\n        response: \"\",\n        positions: [ [0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0] ],\n        result: 0,\n        step: 0,\n    },\n};\nvar ErrorMap_10 = [\n    \"视觉通信故障\",\n    \"螺丝刀通信故障\",\n    \"伺服1故障\",\n    \"伺服2故障\",\n    \"伺服3故障\",\n    \"伺服4故障\",   \n    \"伺服5故障\",\n    \"伺服6故障\",\n    \"伺服7故障\",\n    ];\n    \nglobal.set(\"StationTask_10\",{\n    BillCode: \"-\",\n    ProductCode: \"-\",\n    ProductName:\"-\",\n    ProcessDetail: [{\n        ProcessCode: \"OP90\",\n        ProcessName: \"-\",\n        EquipmentCode: \"OP90\",\n        ProgramNumer: 1,\n        Num: 0,\n        MaterialDetails: [\n            {\n                MaterialCode: \"M5x20\",\n                MaterialName: \"M5x20内六角螺丝\",\n                Num: 0,\n                consumption: 15,\n                remain: 0,\n                used: 0,\n            },\n            {\n                MaterialCode: \"M6x85\",\n                MaterialName: \"M6x85内六角螺丝\",\n                Num: 0,\n                consumption: 15,\n                remain: 0,\n                used: 0,\n            },\n            {\n                MaterialCode: \"XDF\",\n                MaterialName: \"先导阀\",\n                Num: 0,\n                consumption: 15,\n                remain: 0,\n                used: 0,\n            },\n      \n        ]\n    }]\n});\n\nglobal.set(\"Vision_10\",Vision_90);\nglobal.set(\"ErrorMap_10\", ErrorMap_90);\nvar t = (new Date()).toISOString();\nglobal.set(\"StartTime_10\", t);\nglobal.set(\"EndTime_10\", t);\nglobal.set(\"RequestID_10\", \"-\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "9c22b32ef6374ba0",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "定义变量名",
        "func": "global.set(\"n1\",{\n \n    \n    \n});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 40,
        "wires": [
            [
                "1897a224540a3006"
            ]
        ]
    },
    {
        "id": "9ab459d877bebb3a",
        "type": "http in",
        "z": "8c57d52fe6250639",
        "name": "",
        "url": "/10/data",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 860,
        "wires": [
            [
                "b0e241d043d4d797"
            ]
        ]
    },
    {
        "id": "62db20fb3815ac1e",
        "type": "http response",
        "z": "8c57d52fe6250639",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 860,
        "wires": []
    },
    {
        "id": "b0e241d043d4d797",
        "type": "function",
        "z": "8c57d52fe6250639",
        "name": "function 29",
        "func": "const p = msg.payload.key;\nvar arr = p.split(\".\");\nconst obj = global.get(arr[0]);\neval(\"var \"+arr[0]+\" = obj;\");\nconsole.debug(1);\neval(\"msg.payload = \"+p+\";\");\nconsole.debug(2);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 860,
        "wires": [
            [
                "62db20fb3815ac1e"
            ]
        ]
    },
    {
        "id": "3dba3e8d93abf91f",
        "type": "modbus-server",
        "z": "f9ed7ce98dfb48f5",
        "name": "OP100",
        "logEnabled": false,
        "hostname": "0.0.0.0",
        "serverPort": "10100",
        "responseDelay": 100,
        "delayUnit": "ms",
        "coilsBufferSize": 10000,
        "holdingBufferSize": 10000,
        "inputBufferSize": 10000,
        "discreteBufferSize": 10000,
        "showErrors": true,
        "x": 140,
        "y": 620,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "ae2ec5083c579d8e",
        "type": "modbus-read",
        "z": "f9ed7ce98dfb48f5",
        "name": "读取控制器modbus-di控制-后段",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "Input",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "1a3a610758658ecb",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 210,
        "y": 220,
        "wires": [
            [
                "7f573a2b4067baa6",
                "05f3f7d57a0dc813"
            ],
            []
        ]
    },
    {
        "id": "7f573a2b4067baa6",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "写入到本地内存",
        "func": "var DI_Names = [\n    \"DI_JiTing\",\n    \"DI_QiDong\",\n    \"DI_TingZhi\",\n    \"DI_ZiDong\",\n    \"DI_ShouDong\",\n    \"DI_L_GunTong_DaoWei\",\n    \"DI_R_GunTong_DaoWei\",\n    \"-\",\n    \"DI_L_ShenJiang_DaoWei\",\n    \"DI_R_ShenJiang_DaoWei\",\n    \"DI_ZhuaPan1_DaKaiDaoWei\",\n    \"DI_ZhuaPan2_GuanBiWei\",\n    \"DI_ZhuaPan1_DaKaiDaoWei\",\n    \"DI_ZhuaPan2_GuanBiWei\",\n    \"DI_HengYi_YouLiao\",\n    \"-\",\n    \"DI_NingJin_ShenDaoWei1\",\n    \"DI_NingJin_SuoDaoWei\",\n    \"DI_HengYi_SongKaiDaoWei\",\n    \"DI_HengYi_JiaJinDaoWei\",\n    \"DI_M5_FenLi1_DaKaiDaoWei\",\n    \"DI_M5_FenLi1_GuanBiDaoWei\",\n    \"DI_M6_FenLi_DaKaiDaoWei\",\n    \"DI_M6_FenLi_GuanBiDaoWei\",\n    \"DI_HengYi_ShangShenDaoWei\",\n    \"DI_HengYi_XiaJiangDaoWei\",\n    \"DI_M5_SongLiao_GuanBiDaoWei\",\n    \"DI_M5_SongLiao_DaKaiDaoWei\",\n    \"-\",\n    \"-\",\n    \"DI_NingJin_ShenDaoWei2\",\n    \"-\",\n    \"DI_DingWei_GuanBiDaoWei1\",\n    \"DI_DingWei_DaKaiDaoWei1\",\n    \"DI_DingWei_GuanBiDaoWei2\",\n    \"DI_DingWei_DaKaiDaoWei2\",\n    \"DI_M6_FenLiao_DaKaiDaoWei\",\n    \"DI_M6_FenLiao_GuanBiDaoWei\",\n    \"DI_ROB_JiaJinDaoWei2\",\n    \"-\",\n    \"DI_DingWei_GuanBiDaoWei3\",\n    \"DI_DingWei_DaKaiDaoWei3\",\n    \"DI_M5_FenLi2_DaKaiDaoWei\",\n    \"DI_M5_FenLi2_GuanBiDaoWei\",\n    \"DI_M5_ZDP_YouLiao\",\n    \"DI_M6_ZDP_DaoKaiDaoWei1\",\n    \"DI_M6_ZDP_GuanBiDaoWei1\",\n    \"DI_M6_ZDP_DaoKaiDaoWei2\",\n    \"DI_M6_ZDP_YouLiao\",\n    \"DI_ROB_DaKaiDaoWei1\",\n    \"DI_ROB_JiaJinDaoWei1\",\n    \"DI_ZDP_ZhengFanJianCe\",\n    \"DI_FuWei\",\n    \"DI_LianJi\",\n    \"DI_DanBuQianJin\",\n    \"DI_DanBuHouTui\",\n    ];\n\nvar IO_10 = global.get(\"IO_10\");\nconst data = msg.payload;\nfor(var i=0;i<DI_Names.length;i++){\n    if(DI_Names[i]!='-'){\n        IO_10.DI[DI_Names[i]] = data[i];\n    }\n}\nglobal.set(\"IO_10\",IO_10);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "5510cac9c6e89b5c",
        "type": "inject",
        "z": "f9ed7ce98dfb48f5",
        "name": "OP100数据初始化",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 40,
        "wires": [
            [
                "1ea186152dc1a1ba"
            ]
        ]
    },
    {
        "id": "d173ea419e8a649d",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "IO初始化",
        "func": "var IO_100 = {\n    DO:{},\n    DI:{\n        DI_JiTing:0,\n        DI_QiDong:0,\n        DI_TingZhi:0,\n        DI_ZiDong:0,\n        DI_ShouDong:0,\n        DI_L_GunTong_DaoWei:0,\n        DI_R_GunTong_DaoWei:0,\n        \n        DI_L_ShenJiang_DaoWei:0,\n        DI_R_ShenJiang_DaoWei:0,\n        DI_ZhuaPan1_DaKaiDaoWei:0,\n        DI_ZhuaPan2_GuanBiWei:0,\n        DI_HengYi_YouLiao:0,\n        \n        DI_NingJin_ShenDaoWei1:0,\n        DI_NingJin_SuoDaoWei:0,\n        DI_HengYi_SongKaiDaoWei:0,\n        DI_HengYi_JiaJinDaoWei:0,\n        DI_M5_FenLi1_DaKaiDaoWei:0,\n        DI_M5_FenLi1_GuanBiDaoWei:0,\n        DI_M6_FenLi_DaKaiDaoWei:0,\n        DI_M6_FenLi_GuanBiDaoWei:0,\n        DI_HengYi_ShangShenDaoWei:0,\n        DI_HengYi_XiaJiangDaoWei:0,\n        DI_M5_SongLiao_GuanBiDaoWei:0,\n        DI_M5_SongLiao_DaKaiDaoWei:0,\n        \n        DI_NingJin_ShenDaoWei2:0,\n        \n        DI_DingWei_GuanBiDaoWei1:0,\n        DI_DingWei_DaKaiDaoWei1:0,\n        DI_DingWei_GuanBiDaoWei2:0,\n        DI_DingWei_DaKaiDaoWei2:0,\n        DI_M6_FenLiao_DaKaiDaoWei:0,\n        DI_M6_FenLiao_GuanBiDaoWei:0,\n        DI_ROB_JiaJinDaoWei2:0,\n        \n        DI_DingWei_GuanBiDaoWei3:0,\n        DI_DingWei_DaKaiDaoWei3:0,\n        DI_M5_FenLi2_DaKaiDaoWei:0,\n        DI_M5_FenLi2_GuanBiDaoWei:0,\n        DI_M5_ZDP_YouLiao:0,\n        DI_M6_ZDP_DaoKaiDaoWei1:0,\n        DI_M6_ZDP_GuanBiDaoWei1:0,\n        DI_M6_ZDP_DaoKaiDaoWei2:0,\n        DI_M6_ZDP_YouLiao:0,\n        DI_ROB_DaKaiDaoWei1:0,\n        DI_ROB_JiaJinDaoWei1:0,\n        DI_ZDP_ZhengFanJianCe:0,\n        DI_FuWei:0,\n        DI_LianJi:0,\n        DI_DanBuQianJin:0,\n        DI_DanBuHouTui:0,\n    },\n    AI:{//node-red收到来自控制器的逻辑变量\n        response: 0,//控制器端动作端的完成信号\n        error: 0,//控制器端的故障码\n        status: 0,//控制器端的状态\n        screw_reset : 0,\n        screw_run : 0,\n        screw_clockwise : 0,\n        screw_pause : 0,     \n        screw_mode : 0, \n        request_vision: 0,\n    },\n    AO:{//node-red要发送下去的逻辑变量\n        request: 0,//下发给控制器的动作号\n        tray_in_count: 6,//AGV进口区的托盘号\n        tray_out_count: 6,//AGV出口区的托盘号y\n        tray_count: 30,//当前料盘上的先导阀数量\n        truss_vision_x: 90,//3轴桁架拍照纠偏的X坐标\n        assembled: 0,\n        screw_status: 0,\n        material_status: 0,\n        work_object: 0, //产品类型\n        response_vision: 0,\n        LCS: 0,\n    },    \n    AI_6axes:{\n        response: 0,//6轴机械臂端动作的完成信号\n        error: 0,//6轴机械臂的故障码\n        status: 0,//6轴机械臂状态\n        request_vission:0,\n    },\n\n    AO_6axes:{\n        Vision_X_1: 90,//料盘拍照纠偏得y到的X坐标\n        Vision_Y_1: 90,//料盘拍照纠偏得到的y坐标\n        Vision_QueXian: 0,\n        request:0,\n        M1 : 0,\n        assembled: 0,\n        response_vission: 0,\n        LCS: 0,\n    },\n    AI_LCS:{\n        request: 0,\n    },\n    AO_LCS:{\n        response: 0,\n    },\n    AI_AGV:{\n        request: 0,\n    },\n    AO_AGV:{\n        response: 0,\n    },    \n    AI_screw:{\n        status: 0,\n        error: 0,\n        torque: 0,\n    },\n    AO_screw:{\n        reset : 0,\n        run : 0,\n        clockwise : 0,\n        pause : 0,     \n        mode : 0, \n    }       \n};\n\nglobal.set(\"IO_100\",IO_100);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 40,
        "wires": [
            [
                "604d8873ecf1a876"
            ]
        ]
    },
    {
        "id": "ec1227fef549c0f8",
        "type": "modbus-read",
        "z": "f9ed7ce98dfb48f5",
        "name": "6轴机械臂modbus-ao-逻辑变量",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "0",
        "quantity": "100",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "1a3a610758658ecb",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "4633ab44f4e2cfef"
            ],
            []
        ]
    },
    {
        "id": "4633ab44f4e2cfef",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "写入到本地内存",
        "func": "const data = msg.payload;\nvar IO = global.get(\"IO_90\");\nvar i = 0;\nIO.AI_6axes.response = data[i]; i++;\nIO.AI_6axes.error = data[i]; i++;\nIO.AI_6axes.status = data[i]; i++;\nIO.AI_6axes.request_vission = data[i]; i++;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "05f3f7d57a0dc813",
        "type": "modbus-write",
        "z": "f9ed7ce98dfb48f5",
        "name": "DI信号同步到虚拟modbus-10",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MCoils",
        "adr": "0",
        "quantity": "100",
        "server": "ebdc7b3b4236640e",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 520,
        "y": 240,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "581258e7ec76ca3f",
        "type": "inject",
        "z": "f9ed7ce98dfb48f5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 480,
        "wires": [
            [
                "992229330d7f0aa0"
            ]
        ]
    },
    {
        "id": "992229330d7f0aa0",
        "type": "trigger",
        "z": "f9ed7ce98dfb48f5",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "val",
        "op2type": "val",
        "duration": "250",
        "extend": "false",
        "overrideDelay": "false",
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 310,
        "y": 480,
        "wires": [
            [
                "3f5bb7c3b3a49d19",
                "05ac1629b6a0b772"
            ]
        ]
    },
    {
        "id": "db2fd7353bc50f2b",
        "type": "modbus-write",
        "z": "f9ed7ce98dfb48f5",
        "name": "写入到6轴",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "100",
        "server": "1a3a610758658ecb",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 730,
        "y": 540,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "3f5bb7c3b3a49d19",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "写入到6轴机械臂",
        "func": "var data = [];\nvar IO = global.get(\"IO_90\");\ndata.push(IO.AO2.controller_6axes);\ndata.push(IO.AO2.tray_vision_x);\ndata.push(IO.AO2.tray_vision_y);\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 540,
        "wires": [
            [
                "db2fd7353bc50f2b"
            ]
        ]
    },
    {
        "id": "357e91fad310949b",
        "type": "modbus-read",
        "z": "f9ed7ce98dfb48f5",
        "name": "LCS 调度命令读取",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "4090",
        "quantity": "7",
        "rate": "200",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "ebdc7b3b4236640e",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 170,
        "y": 420,
        "wires": [
            [
                "0b44f277f7555902"
            ],
            []
        ]
    },
    {
        "id": "0b44f277f7555902",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "写入到本地内存",
        "func": "\nconst data = msg.payload;\nvar IO = global.get(\"IO_90\");\nvar i = 0;\nIO.AI_LCS.request = data[i]; i++;\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "05ac1629b6a0b772",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "发送给LCS呼叫AGV",
        "func": "var data = [];\nvar IO = global.get(\"IO_90\");\ndata.push(IO.AO_LCS.Pos_In);\ndata.push(IO.AO_LCS.Pos_Out);\n\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 600,
        "wires": [
            [
                "a065307aaef40619"
            ]
        ]
    },
    {
        "id": "a065307aaef40619",
        "type": "modbus-write",
        "z": "f9ed7ce98dfb48f5",
        "name": "写入到虚拟modbus",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "MHoldingRegisters",
        "adr": "0",
        "quantity": "100",
        "server": "ebdc7b3b4236640e",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 750,
        "y": 600,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "604d8873ecf1a876",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "物料-视觉-工单 初始化",
        "func": "\nvar Vision_100 = {\n    sessin: \"\",\n    v1: {//第一层料盘上的物料,总计20个坐标,由视觉计算反馈\n        request: \"\",\n        response: \"\",\n        positions: [ [0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0] ],\n        result: 0,\n        step: 0,\n    },\n};\nvar ErrorMap_100 = [\n    \"视觉通信故障\",\n    \"螺丝刀通信故障\",\n    \"伺服1故障\",\n    \"伺服2故障\",\n    \"伺服3故障\",\n    \"伺服4故障\",   \n    \"伺服5故障\",\n    \"伺服6故障\",\n    \"伺服7故障\",\n    ];\n    \nglobal.set(\"StationTask_100\",{\n    BillCode: \"-\",\n    ProductCode: \"-\",\n    ProductName:\"-\",\n    ProcessDetail: [{\n        ProcessCode: \"OP100\",\n        ProcessName: \"-\",\n        EquipmentCode: \"OP100\",\n        ProgramNumer: 1,\n        Num: 0,\n        MaterialDetails: [\n           \n      \n        ]\n    }]\n});\n\nglobal.set(\"Vision_100\",Vision_100);\nglobal.set(\"ErrorMap_100\", ErrorMap_100);\nvar t = (new Date()).toISOString();\nglobal.set(\"StartTime_100\", t);\nglobal.set(\"EndTime_100\", t);\nglobal.set(\"RequestID_100\", \"-\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "1ea186152dc1a1ba",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "定义变量名",
        "func": "global.set(\"n10\",{\n \n    \n    \n});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 40,
        "wires": [
            [
                "d173ea419e8a649d"
            ]
        ]
    },
    {
        "id": "def7b74dd73c77b9",
        "type": "http in",
        "z": "f9ed7ce98dfb48f5",
        "name": "",
        "url": "/100/data",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 860,
        "wires": [
            [
                "9bc3906f868c0782"
            ]
        ]
    },
    {
        "id": "1e57f8f96e834f72",
        "type": "http response",
        "z": "f9ed7ce98dfb48f5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 860,
        "wires": []
    },
    {
        "id": "9bc3906f868c0782",
        "type": "function",
        "z": "f9ed7ce98dfb48f5",
        "name": "function 30",
        "func": "const p = msg.payload.key;\nvar arr = p.split(\".\");\nconst obj = global.get(arr[0]);\neval(\"var \"+arr[0]+\" = obj;\");\nconsole.debug(1);\neval(\"msg.payload = \"+p+\";\");\nconsole.debug(2);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 860,
        "wires": [
            [
                "1e57f8f96e834f72"
            ]
        ]
    },
    {
        "id": "5b4e21d2e264a3b8",
        "type": "inject",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 640,
        "wires": [
            [
                "3a2763e16069b1ca"
            ]
        ]
    },
    {
        "id": "3a2763e16069b1ca",
        "type": "trigger",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-250",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 310,
        "y": 640,
        "wires": [
            [
                "b432f21ea8a0c076",
                "6e1662cb6cf9703d"
            ]
        ]
    },
    {
        "id": "7bd5064aa60abc6c",
        "type": "http in",
        "z": "b60c316ff0a6b6c0",
        "name": "通用读多个接口",
        "url": "/10/ReadValue",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 480,
        "wires": [
            [
                "abf419e4087513ea",
                "46cf809cb9daa3a5"
            ]
        ]
    },
    {
        "id": "23ed647795da08ac",
        "type": "modbus-flex-getter",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "logIOActivities": false,
        "server": "f45c8577844ced46",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 830,
        "y": 480,
        "wires": [
            [
                "4356d9605954ea3e"
            ],
            [
                "53462c6c5f5c6254"
            ]
        ]
    },
    {
        "id": "abf419e4087513ea",
        "type": "change",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ReadValue_90",
                "pt": "global",
                "to": "[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 480,
        "wires": [
            [
                "6d2816ce6f58614a"
            ]
        ]
    },
    {
        "id": "6d2816ce6f58614a",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "modbus 报文拆分",
        "func": "var arr = msg.payload;\nfor(var i=0;i<arr.length;i++){\n    var t = arr[i];\n    node.send({payload:{fc:3, address: parseInt(t.Address), quantity:1},temp:parseInt(t.Address)});\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 480,
        "wires": [
            [
                "23ed647795da08ac"
            ]
        ]
    },
    {
        "id": "4356d9605954ea3e",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "函数 4",
        "func": "var arr = global.get(\"ReadValue_90\");\narr.push({\n    Address: msg.modbusRequest.address,\n    Value: msg.payload[0],\n    ValueType: \"int\"\n});\nconsole.debug(arr);\nglobal.set(\"ReadValue_90\",arr);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "bf64874f8de1d1f2",
        "type": "change",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.Code",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload.Msg",
                "pt": "msg",
                "to": "操作成功",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.Data",
                "pt": "msg",
                "to": "ReadValue_90",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 520,
        "wires": [
            [
                "8c67c6b28b652f9f"
            ]
        ]
    },
    {
        "id": "8c67c6b28b652f9f",
        "type": "http response",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 520,
        "wires": []
    },
    {
        "id": "46cf809cb9daa3a5",
        "type": "delay",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 300,
        "y": 520,
        "wires": [
            [
                "e55f366c9e5b8dd4"
            ]
        ]
    },
    {
        "id": "a7fe531c9b8b9c41",
        "type": "rbe",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 370,
        "y": 720,
        "wires": [
            [
                "1796bf9ffd5535ad"
            ]
        ]
    },
    {
        "id": "b432f21ea8a0c076",
        "type": "change",
        "z": "b60c316ff0a6b6c0",
        "name": "状态变化监听",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_10.AI.status",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 720,
        "wires": [
            [
                "a7fe531c9b8b9c41"
            ]
        ]
    },
    {
        "id": "1796bf9ffd5535ad",
        "type": "switch",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            },
            {
                "t": "btwn",
                "v": "40",
                "vt": "num",
                "v2": "49",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 720,
        "wires": [
            [
                "de27a252b48ff1b5"
            ],
            [
                "d63158632bc80206"
            ]
        ]
    },
    {
        "id": "44d4e7db3305d62e",
        "type": "http request",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1060,
        "y": 720,
        "wires": [
            [
                "b62ca316eb13ad1a"
            ]
        ]
    },
    {
        "id": "c776a0aa2699059e",
        "type": "rbe",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 370,
        "y": 800,
        "wires": [
            [
                "b53c94fcf893ec7d"
            ]
        ]
    },
    {
        "id": "6e1662cb6cf9703d",
        "type": "change",
        "z": "b60c316ff0a6b6c0",
        "name": "故障信号监听",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IO_10.AI.error",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 800,
        "wires": [
            [
                "c776a0aa2699059e"
            ]
        ]
    },
    {
        "id": "b53c94fcf893ec7d",
        "type": "switch",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 800,
        "wires": [
            [
                "c494ac7f58b40cf2"
            ]
        ]
    },
    {
        "id": "f25ba9e302a386fd",
        "type": "http request",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Accept",
                "valueType": "other",
                "valueValue": "application/json"
            }
        ],
        "x": 860,
        "y": 800,
        "wires": [
            [
                "f4e4deeed0f9c88a"
            ]
        ]
    },
    {
        "id": "53462c6c5f5c6254",
        "type": "debug",
        "z": "b60c316ff0a6b6c0",
        "name": "调试 15",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 540,
        "wires": []
    },
    {
        "id": "e55f366c9e5b8dd4",
        "type": "change",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 520,
        "wires": [
            [
                "bf64874f8de1d1f2"
            ]
        ]
    },
    {
        "id": "b62ca316eb13ad1a",
        "type": "debug",
        "z": "b60c316ff0a6b6c0",
        "name": "调试 16",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1220,
        "y": 720,
        "wires": []
    },
    {
        "id": "f4e4deeed0f9c88a",
        "type": "debug",
        "z": "b60c316ff0a6b6c0",
        "name": "调试 17",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 800,
        "wires": []
    },
    {
        "id": "ede19c1dd1a48804",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "function 31",
        "func": "msg.payload = {\n \t\"requestID\": global.get(\"RequestID_60\"),\n\t\"startTime\": global.get(\"StartTime_60\"),\n\t\"endTime\": global.get(\"EndTime_60\")\n};\n\nmsg.url = global.get(\"LCS\")+\"actionCompletedSignal\";\n//msg.method = \"POST\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 720,
        "wires": [
            [
                "44d4e7db3305d62e"
            ]
        ]
    },
    {
        "id": "c494ac7f58b40cf2",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "function 32",
        "func": "var ErrorMap_60 = global.get(\"ErrorMap_60\");\nmsg.payload ={\t\t\t\t\n\tEquipmentCode: \"OP60\",\t\t\t\n\tEquipmentName: \"上料泛在控制器\",\t\t\t\n\tStatus: 0,\n    WarnContent: ErrorMap_60[msg.payload]\t\t\n};\nmsg.url = global.get(\"LCS\")+\"receiveUbiquitousWarn\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 800,
        "wires": [
            [
                "f25ba9e302a386fd"
            ]
        ]
    },
    {
        "id": "d63158632bc80206",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "开始生产",
        "func": "\nvar t = (new Date()).toISOString();\nglobal.set(\"StartTime_90\", t);\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "de27a252b48ff1b5",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "生产完成",
        "func": "\nvar t = (new Date()).toISOString();\nglobal.set(\"EndTime_90\", t);\nglobal.set(\"RequestID_90\", \"-\");\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 680,
        "wires": [
            [
                "ede19c1dd1a48804"
            ]
        ]
    },
    {
        "id": "fbf2750d95e5d960",
        "type": "inject",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 490,
        "y": 680,
        "wires": [
            [
                "de27a252b48ff1b5"
            ]
        ]
    },
    {
        "id": "fb27549faaf4df38",
        "type": "http response",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1090,
        "y": 220,
        "wires": []
    },
    {
        "id": "4a2521e0cea6f181",
        "type": "http in",
        "z": "b60c316ff0a6b6c0",
        "name": "工位任务接收",
        "url": "/10/ReceiveStationTask",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 240,
        "wires": [
            [
                "249c701a144c7661"
            ]
        ]
    },
    {
        "id": "6a4c6646110d08c5",
        "type": "http in",
        "z": "b60c316ff0a6b6c0",
        "name": "泛在通用写多个接口",
        "url": "/10/WriteValue",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 440,
        "wires": [
            [
                "728d158acf67d988"
            ]
        ]
    },
    {
        "id": "728d158acf67d988",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "modbus 报文拆分",
        "func": "var arr = msg.payload;\nfor(var i=0;i<arr.length;i++){\n    var t = arr[i];\n    msg.payload = { value: parseInt(t.Value), 'fc': 6, 'unitid': 1, 'address': parseInt(t.Address), 'quantity': 1 } \n    node.send(msg);\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 440,
        "wires": [
            [
                "f6cce74e561807da"
            ]
        ]
    },
    {
        "id": "f6cce74e561807da",
        "type": "modbus-flex-write",
        "z": "b60c316ff0a6b6c0",
        "name": "批量修改modbus值",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "server": "f45c8577844ced46",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 770,
        "y": 420,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "4b08f8c03e37af75",
        "type": "change",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "StationTask_90",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 240,
        "wires": [
            [
                "5422fe3beb921c6c"
            ]
        ]
    },
    {
        "id": "5422fe3beb921c6c",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg:\"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 240,
        "wires": [
            [
                "fb27549faaf4df38"
            ]
        ]
    },
    {
        "id": "5f2d50fe11da5433",
        "type": "http in",
        "z": "b60c316ff0a6b6c0",
        "name": "ReceiveEndSignal",
        "url": "/10/ReceiveEndSignal",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "aa38984a734707e1"
            ]
        ]
    },
    {
        "id": "13f19cbb678fecfc",
        "type": "http response",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 140,
        "wires": []
    },
    {
        "id": "a87a85b7794a1a6e",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 120,
        "wires": [
            [
                "13f19cbb678fecfc"
            ]
        ]
    },
    {
        "id": "aa38984a734707e1",
        "type": "switch",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "property": "payload.BillCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "StationTask_90.BillCode",
                "vt": "global"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 120,
        "wires": [
            [
                "410e90894f9b82f8",
                "a87a85b7794a1a6e",
                "168aa29d0a82a483"
            ],
            [
                "649e5fadeb818fa6"
            ]
        ]
    },
    {
        "id": "410e90894f9b82f8",
        "type": "change",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IO_90.AO.production",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "649e5fadeb818fa6",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg: \"操作失败,当前设备执行的工单和下发的结束工单不一致\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 160,
        "wires": [
            [
                "13f19cbb678fecfc"
            ]
        ]
    },
    {
        "id": "1d0ee5f6d13974f7",
        "type": "http response",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 280,
        "wires": []
    },
    {
        "id": "b24efc27b16de1e8",
        "type": "http in",
        "z": "b60c316ff0a6b6c0",
        "name": "工位状态-轮询",
        "url": "/10/GetStationState",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 280,
        "wires": [
            [
                "a02d16b74ebe1b1d"
            ]
        ]
    },
    {
        "id": "a02d16b74ebe1b1d",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "反馈",
        "func": "var IO_60 = global.get(\"IO_90\");\nmsg.payload = {\n\t\"Code\": 0,\n\t\"Msg\": \"操作成功\",\n\t\"Data\": [{\n\t\t\"StationCode\": \"OP90\",\n\t\t\"StationName\": \"丝堵预装配\",\n\t\t\"Status\": IO_90.AI.status\n\t}]\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 280,
        "wires": [
            [
                "1d0ee5f6d13974f7"
            ]
        ]
    },
    {
        "id": "a28f18a533722341",
        "type": "http in",
        "z": "b60c316ff0a6b6c0",
        "name": "动作执行",
        "url": "/10/DoAction",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 400,
        "wires": [
            [
                "b3b717bf872f4930"
            ]
        ]
    },
    {
        "id": "cd601a9f82909663",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "modbus 报文拆分",
        "func": "var t = msg.payload;\nvar RequestID = t.RequestID;\nglobal.set(\"RequestID_90\",RequestID);\nmsg.payload = { value: parseInt(t.Value), 'fc': 6, 'unitid': 1, 'address': parseInt(t.Address), 'quantity': 1 } \nnode.send(msg);",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 360,
        "wires": [
            [
                "f6cce74e561807da"
            ]
        ]
    },
    {
        "id": "b3b717bf872f4930",
        "type": "switch",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "property": "RequestID_90",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "-",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 310,
        "y": 400,
        "wires": [
            [
                "cd601a9f82909663",
                "67c0b81032f7cf6e"
            ],
            [
                "d16be92a0471a0e4"
            ]
        ]
    },
    {
        "id": "67c0b81032f7cf6e",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 0,\n    Msg: \"操作成功\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 320,
        "wires": [
            [
                "2c21729d8f477c36"
            ]
        ]
    },
    {
        "id": "2c21729d8f477c36",
        "type": "http response",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 320,
        "wires": []
    },
    {
        "id": "d16be92a0471a0e4",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg: \"上一个动作还未完成\"\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 400,
        "wires": [
            [
                "2c21729d8f477c36"
            ]
        ]
    },
    {
        "id": "249c701a144c7661",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "格式解析",
        "func": "msg.error = 0;\n\nvar task = global.get(\"StationTask_90\");\nif(task.BillCode!='-'){\n    msg.error = 1;\n    msg.errorMsg = \"previese task is on going\";\n    return msg;\n}\n\nconst data = msg.payload;\nif((typeof(data)!='object')){\n    msg.error = 2;\n    msg.errorMsg = \"format wrong\";\n    return msg;\n}\n\nif (!('BillCode' in data)){\n    msg.error = 3;\n    msg.errorMsg = \"no BillCode\";\n    return msg;\n}\nif (!('ProductCode' in data)){\n    msg.error = 4;\n    msg.errorMsg = \"no ProductCode\";\n    return msg;\n}\n\nif (!('ProcessDetail' in data)){\n    msg.error = 5;\n    msg.errorMsg = \"no ProcessDetail\";\n    return msg;\n}\n\nif(data.ProcessDetail.length==1){\n    const data2 = data.ProcessDetail[0];\n    if (!('ProcessCode' in data2)){\n        msg.error = 6;\n        msg.errorMsg = \"no ProcessCode\";\n        return msg;\n    }\n    if(data2.ProcessCode!='OP90'){\n        msg.error = 7;\n        msg.errorMsg = \"no OP90\";\n        return msg;\n    }\n    if (!('Num' in data2)){\n        msg.error = 8;\n        msg.errorMsg = \"no Num\";\n        return msg;\n    }\n    if (!('MaterialDetails' in data2)){\n        msg.error = 9;\n        msg.errorMsg = \"no MaterialDetails\";\n        return msg;\n    }\n\n    for(var i=0;i<data2.MaterialDetails.length;i++){\n        const data3 = data2.MaterialDetails[i];\n        if (!('MaterialCode' in data3)){\n            msg.error = 10;\n            msg.errorMsg = \"MaterialDetails is missing\";\n            return msg;\n        }\n        if (!('Num' in data3)){\n            msg.error = 11;\n            msg.errorMsg = \"Num is missing\";\n            return msg;\n        }   \n        const _arr= [\n            \"M5x20\",\n            \"M6x85\",\n            \"XDF\",];\n        const a = _arr.indexOf(data3.MaterialCode)\n        if(a == -1){\n            msg.error = 12;\n            msg.errorMsg = \"MaterialCode is wrong \"+data3.MaterialCode;\n            return msg;\n        }                \n    }\n}\nelse{\n    msg.error = 13;\n    msg.errorMsg = \"ProcessDetail.length should be 1\";\n    return msg;\n}\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 240,
        "wires": [
            [
                "7450e7532a9133c3",
                "1426ab1e430853ca"
            ]
        ]
    },
    {
        "id": "7450e7532a9133c3",
        "type": "switch",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "property": "error",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 240,
        "wires": [
            [
                "4b08f8c03e37af75"
            ],
            [
                "6b55599cd966446c"
            ]
        ]
    },
    {
        "id": "6b55599cd966446c",
        "type": "function",
        "z": "b60c316ff0a6b6c0",
        "name": "反馈",
        "func": "msg.payload = {\n    Code: 1,\n    Msg:\"失败\"+msg.errorMsg\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 200,
        "wires": [
            [
                "fb27549faaf4df38"
            ]
        ]
    },
    {
        "id": "1426ab1e430853ca",
        "type": "debug",
        "z": "b60c316ff0a6b6c0",
        "name": "debug 31",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 320,
        "y": 180,
        "wires": []
    },
    {
        "id": "168aa29d0a82a483",
        "type": "change",
        "z": "b60c316ff0a6b6c0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "StationTask_90.BillCode",
                "pt": "global",
                "to": "-",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 40,
        "wires": [
            []
        ]
    }
]